var e,t,n=Object.getOwnPropertyNames,a=(e={"assets/index-BaHb6ZJd.js"(e,t){!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const n=new class{constructor(){this.routes=new Map,this.currentRoute=null,this.beforeEach=null,this.afterEach=null}register(e,t){return this.routes.set(e,t),this}navigate(e){window.location.hash=e.replace("#","")}getCurrentRoute(){return window.location.hash||"#/"}handleRoute(){const e=this.getCurrentRoute(),t=this.currentRoute;this.currentRoute=e,this.beforeEach&&this.beforeEach(e,t),this.hideAllViews();const n=this.routes.get(e);if(n)n(e);else{const e=this.routes.get("#/");e&&e("#/")}this.afterEach&&this.afterEach(e,t)}hideAllViews(){document.querySelectorAll(".view").forEach(e=>{e.classList.remove("active")})}showView(e){const t=document.getElementById(e);t&&t.classList.add("active")}init(){return window.addEventListener("hashchange",()=>this.handleRoute()),window.addEventListener("DOMContentLoaded",()=>this.handleRoute()),window.location.hash?this.handleRoute():window.location.hash="#/",this}};!function(){const e="naroa-games-rankings";function t(){try{const t=localStorage.getItem(e);return t?{oca:[],tetris:[],memory:[],puzzle:[],snake:[],breakout:[],whack:[],simon:[],quiz:[],catch:[],collage:[],reinas:[],mica:[],kintsugi:[],pong:[],painter:[],reaction:[],sequence:[],typing:[],...JSON.parse(t)}:{oca:[],tetris:[],memory:[],puzzle:[],snake:[],breakout:[],whack:[],simon:[],quiz:[],catch:[],collage:[],reinas:[],mica:[],kintsugi:[],pong:[],painter:[],reaction:[],sequence:[],typing:[]}}catch(t){return{oca:[],tetris:[],memory:[],puzzle:[],snake:[],breakout:[],whack:[],simon:[],quiz:[],catch:[],collage:[],reinas:[],mica:[],kintsugi:[],pong:[],painter:[],reaction:[],sequence:[],typing:[]}}}const n={submitScore(n,a,i="An√≥nimo",o={}){const s=t();s[n]||(s[n]=[]);const r={id:Date.now().toString(36),name:i.toUpperCase().slice(0,3).padEnd(3,"_"),score:Math.floor(a),date:(new Date).toISOString(),...o};s[n].push(r),s[n].sort((e,t)=>t.score-e.score),s[n]=s[n].slice(0,100),function(t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){}}(s);const c=s[n].findIndex(e=>e.id===r.id)+1;return{rank:c,isHighScore:1===c,isTop10:c<=10,entry:r}},getTopScores:(e,n=10)=>(t()[e]||[]).slice(0,n),getPersonalBest:(e,n)=>(t()[e]||[]).find(e=>e.name===n)||null,clearAll(){localStorage.removeItem(e)},renderLeaderboard(e,t){const n=document.getElementById(t);if(!n)return;const a=this.getTopScores(e,10);if(0===a.length)return void(n.innerHTML='\n          <div class="ranking-empty">\n            <p>üèÜ A√∫n no hay puntuaciones</p>\n            <p class="ranking-subtitle">¬°S√© el primero!</p>\n          </div>\n        ');const i=["ü•á","ü•à","ü•â"];n.innerHTML=`\n        <div class="ranking-list">\n          <h3 class="ranking-title">üèÜ Top 10</h3>\n          ${a.map((e,t)=>{return`\n            <div class="ranking-entry ${t<3?"ranking-entry--top":""}">\n              <span class="ranking-pos">${i[t]||t+1}</span>\n              <span class="ranking-name">${e.name}</span>\n              <span class="ranking-score">${e.score.toLocaleString()}</span>\n              <span class="ranking-date">${n=e.date,new Date(n).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"2-digit"})}</span>\n            </div>\n          `;var n}).join("")}\n        </div>\n      `},showSubmitModal(e,t,n){var a;null==(a=document.getElementById("ranking-modal"))||a.remove();const i=document.createElement("div");i.id="ranking-modal",i.innerHTML=`\n        <div class="ranking-modal-overlay">\n          <div class="ranking-modal-content">\n            <h2>üéÆ ¬°Partida Completada!</h2>\n            <div class="ranking-score-display">${t.toLocaleString()}</div>\n            <p>puntos</p>\n            <form class="ranking-form" id="ranking-submit-form">\n              <input type="text" \n                     id="ranking-player-name" \n                     placeholder="AAA" \n                     maxlength="3"\n                     class="ranking-input ranking-input--arcade"\n                     autocomplete="off"\n                     pattern="[A-Za-z]{1,3}"\n                     style="text-transform: uppercase; letter-spacing: 0.3em; font-family: monospace; font-size: 2rem;">\n              <button type="submit" class="ranking-btn ranking-btn--primary">\n                Guardar Puntuaci√≥n\n              </button>\n              <button type="button" class="ranking-btn ranking-btn--secondary" id="ranking-skip">\n                Saltar\n              </button>\n            </form>\n          </div>\n        </div>\n        <style>\n          .ranking-modal-overlay {\n            position: fixed;\n            inset: 0;\n            background: rgba(0,0,0,0.85);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            z-index: 10000;\n            backdrop-filter: blur(8px);\n          }\n          .ranking-modal-content {\n            background: linear-gradient(180deg, #1a1a2e 0%, #0a0a0f 100%);\n            padding: 2.5rem;\n            border-radius: 16px;\n            text-align: center;\n            border: 1px solid rgba(255,215,0,0.3);\n            box-shadow: 0 25px 80px rgba(0,0,0,0.7);\n            max-width: 90vw;\n            width: 380px;\n          }\n          .ranking-modal-content h2 {\n            color: #fff;\n            margin: 0 0 1.5rem;\n            font-size: 1.5rem;\n          }\n          .ranking-score-display {\n            font-size: 3.5rem;\n            font-weight: 700;\n            color: #ffd700;\n            text-shadow: 0 0 30px rgba(255,215,0,0.5);\n          }\n          .ranking-modal-content p {\n            color: #888;\n            margin: 0.25rem 0 1.5rem;\n            text-transform: uppercase;\n            letter-spacing: 0.2em;\n            font-size: 0.8rem;\n          }\n          .ranking-form {\n            display: flex;\n            flex-direction: column;\n            gap: 0.75rem;\n          }\n          .ranking-input {\n            padding: 0.9rem 1rem;\n            border: 1px solid rgba(255,255,255,0.2);\n            border-radius: 8px;\n            background: rgba(255,255,255,0.05);\n            color: #fff;\n            font-size: 1rem;\n            text-align: center;\n          }\n          .ranking-input:focus {\n            outline: none;\n            border-color: #ffd700;\n          }\n          .ranking-btn {\n            padding: 0.9rem 1.5rem;\n            border: none;\n            border-radius: 8px;\n            font-size: 1rem;\n            cursor: pointer;\n            transition: all 0.2s;\n          }\n          .ranking-btn--primary {\n            background: linear-gradient(135deg, #ffd700, #daa520);\n            color: #000;\n            font-weight: 600;\n          }\n          .ranking-btn--primary:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 6px 20px rgba(255,215,0,0.4);\n          }\n          .ranking-btn--secondary {\n            background: transparent;\n            color: #666;\n            border: 1px solid #333;\n          }\n          .ranking-btn--secondary:hover {\n            border-color: #555;\n            color: #888;\n          }\n        </style>\n      `,document.body.appendChild(i);const o=i.querySelector("#ranking-submit-form"),s=i.querySelector("#ranking-player-name"),r=i.querySelector("#ranking-skip");setTimeout(()=>s.focus(),100),o.addEventListener("submit",a=>{a.preventDefault();const o=s.value.trim()||"An√≥nimo",r=this.submitScore(e,t,o);i.remove(),n&&n(r)}),r.addEventListener("click",()=>{i.remove(),n&&n(null)})}},a=document.createElement("style");a.textContent="\n    .ranking-list {\n      background: rgba(0,0,0,0.4);\n      border-radius: 12px;\n      padding: 1rem;\n      margin: 1rem 0;\n    }\n    .ranking-title {\n      text-align: center;\n      color: #ffd700;\n      margin: 0 0 1rem;\n      font-size: 1.1rem;\n    }\n    .ranking-entry {\n      display: grid;\n      grid-template-columns: 40px 1fr auto auto;\n      gap: 0.75rem;\n      padding: 0.6rem 0.5rem;\n      border-bottom: 1px solid rgba(255,255,255,0.1);\n      align-items: center;\n    }\n    .ranking-entry:last-child { border-bottom: none; }\n    .ranking-entry--top { background: rgba(255,215,0,0.05); }\n    .ranking-pos { \n      font-size: 1.2rem;\n      text-align: center;\n    }\n    .ranking-name { \n      color: #fff;\n      font-weight: 500;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    .ranking-score {\n      color: #ffd700;\n      font-weight: 600;\n      font-family: monospace;\n    }\n    .ranking-date {\n      color: #666;\n      font-size: 0.75rem;\n    }\n    .ranking-empty {\n      text-align: center;\n      padding: 2rem;\n      color: #666;\n    }\n    .ranking-subtitle {\n      color: #888;\n      font-size: 0.9rem;\n    }\n  ",document.head.appendChild(a),window.RankingSystem=n}(),function(){let e=[],t=null,n=[],a="todos";const i=[{id:1,title:"Amy Rocks",file:"amy-rocks.webp",category:"rocks"},{id:2,title:"James Dean",file:"james-dean.webp",category:"retratos"},{id:3,title:"Johnny Depp",file:"johnny-depp.webp",category:"rocks"},{id:4,title:"Marilyn Monroe",file:"marilyn-monroe.webp",category:"rocks"},{id:5,title:"Audrey Hepburn",file:"audrey-hepburn.webp",category:"retratos"},{id:6,title:"Mr. Fahrenheit",file:"mr-fahrenheit.webp",category:"tributos-musicales"},{id:7,title:"Espejos del Alma",file:"espejos-del-alma.webp",category:"espejos-del-alma"},{id:8,title:"La Llorona",file:"la-llorona.webp",category:"naturaleza"},{id:9,title:"Amor en Conserva",file:"amor-en-conserva.webp",category:"enlatas"},{id:10,title:"The Golden Couple",file:"the-golden-couple.webp",category:"golden"}],o=[{id:"todos",label:"Todas",emoji:"üé®"},{id:"rocks",label:"Rocks",emoji:"ü§ü"},{id:"tributos-musicales",label:"Tributos",emoji:"üé§"},{id:"espejos-del-alma",label:"Espejos",emoji:"ü™û"},{id:"enlatas",label:"En.lata.das",emoji:"ü•´"},{id:"golden",label:"Golden",emoji:"‚ú®"},{id:"retratos",label:"Retratos",emoji:"üë§"},{id:"naturaleza",label:"Naturaleza",emoji:"ü¶ú"}],s=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target;t.dataset.src&&(t.src=t.dataset.src,t.removeAttribute("data-src"),t.addEventListener("load",()=>{t.classList.add("loaded")})),s.unobserve(t)}})},{rootMargin:"200px"});function r(t,n=!1){const a=document.createElement("div");a.className="gallery__item",a.dataset.category=t.category,a.dataset.id=t.id,n&&a.classList.add("gallery__item--enter");const i=t.file.replace(".webp",".jpg");a.innerHTML=`\n      <img \n        data-src="images/thumbnails/${i}" \n        alt="${t.title}"\n        loading="lazy"\n      >\n      <span class="gallery__caption">${t.title}</span>\n    `;const o=a.querySelector("img");return s.observe(o),a.addEventListener("click",()=>{window.Lightbox&&window.Lightbox.open(t,e)}),a}function c(t){t.innerHTML="";const i=function(){const t={todos:e.length};return e.forEach(e=>{const n=e.category;n&&(t[n]=(t[n]||0)+1)}),t}();(n.length>0?n:o).forEach(e=>{const n=i[e.id]||0;if("todos"!==e.id&&0===n)return;const o=document.createElement("button");o.className="gallery-filter",o.dataset.category=e.id;const s=e.emoji||"üé®";o.innerHTML=`\n        <span class="gallery-filter__emoji">${s}</span>\n        <span class="gallery-filter__label">${e.label}</span>\n        <span class="gallery-filter__count">${n}</span>\n      `,e.id===a&&o.classList.add("gallery-filter--active"),o.addEventListener("click",()=>l(e.id)),t.appendChild(o)})}function l(t){a=t;const n=document.getElementById("archivo-grid");if(document.getElementById("gallery-filters"),!n)return;document.querySelectorAll(".gallery-filter").forEach(e=>{e.classList.toggle("gallery-filter--active",e.dataset.category===t)});const i="todos"===t?e:e.filter(e=>e.category===t),o=n.querySelectorAll(".gallery__item");o.length>0&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches?(o.forEach(e=>{e.classList.add("gallery__item--exit")}),setTimeout(()=>{d(n,i)},250)):d(n,i),"todos"!==t?history.replaceState(null,null,`#/archivo/${t}`):history.replaceState(null,null,"#/archivo")}function d(e,t){e.innerHTML="",t.forEach((t,n)=>{const a=r(t,!0);window.matchMedia("(prefers-reduced-motion: reduce)").matches||(a.style.animationDelay=`${Math.min(50*n,500)}ms`),e.appendChild(a)}),e.offsetHeight,requestAnimationFrame(()=>{e.querySelectorAll(".gallery__item--enter").forEach(e=>{e.classList.add("gallery__item--entering")})})}const u=["amy-rocks","marilyn-rocks-hq-5","james-rocks-hq-3","baroque-farrokh","audrey-hepburn","espejos-del-alma","amor-en-conserva","hugo-box","the-golden-couple-and-balloons","lagrimas-de-oro","love","smile-world-smiles-back","el-gran-dakari","peter-rowan","pajarraca-azul"];window.Gallery={loadFeatured(){const t=document.getElementById("featured-gallery");if(!t)return;if(t.classList.contains("gallery-massive")&&t.querySelectorAll(".gallery-massive__item").length>0)return void(window.GalleryDisruptive&&window.GalleryDisruptive.init());t.innerHTML="";const n=e.filter(e=>{const t=e.file.replace(".webp","");return u.includes(t)});n.sort((e,t)=>u.indexOf(e.file.replace(".webp",""))-u.indexOf(t.file.replace(".webp",""))),n.forEach(e=>{t.appendChild(r(e))})},loadArchive(){const t=document.getElementById("archivo-grid"),a=document.getElementById("gallery-filters");if(!t)return;a&&c(a);const i=window.location.hash.match(/#\/archivo\/(.+)/);i&&n.some(e=>e.id===i[1])?l(i[1]):d(t,e)},loadPortfolio(){this.loadFeatured()},loadGallery(){this.loadArchive()},setArtworks(t){e.length=0,e.push(...t)},async init(){await async function(){try{const[i,o]=await Promise.all([fetch("./data/artworks-metadata.json"),fetch("./data/artworks-taxonomy.json")]);if(i.ok){const t=(await i.json()).artworks.map((e,t)=>({id:t+1,title:e.title,file:`${e.id}.webp`,category:e.series,technique:e.technique,year:e.year})),n=[],o=new Set,s=new Set;for(const e of t){if(o.has(e.file))continue;const t=e.file.replace(".webp","").replace(/-hq-\d+$/,"").replace(/-var\d*$/,"");if(!s.has(t)||e.file===`${t}.webp`){o.add(e.file);try{(await fetch(`images/artworks/${e.file}`,{method:"HEAD"})).ok&&(n.push(e),s.add(t))}catch(a){}}}e=n}return o.ok&&(t=await o.json(),t.filters&&Array.isArray(t.filters)&&(n=t.filters)),!0}catch(a){return!1}}()&&0!==e.length||(e=i.slice(),n=o)},getSeriesLabels(){const e={};return(n.length>0?n:o).forEach(t=>{e[t.id]=`${t.label} ${t.emoji||""}`}),e},filterBy(e){(n.some(t=>t.id===e)||"todos"===e)&&l(e)}}}(),function(){let e=0,t=[],n=!1;const a={lightbox:null,img:null,caption:null,closeBtn:null,prevBtn:null,nextBtn:null};function i(n){n<0&&(n=t.length-1),n>=t.length&&(n=0),e=n;const i=t[e];a.img&&i&&(a.img.src=`images/artworks/${i.file}`,a.img.alt=i.title),a.caption&&i&&(a.caption.textContent=i.title)}function o(){i(e+1)}function s(){i(e-1)}function r(){a.lightbox&&(a.lightbox.hidden=!0,n=!1,document.body.style.overflow="")}function c(e){if(n)switch(e.key){case"ArrowRight":o();break;case"ArrowLeft":s();break;case"Escape":r()}}function l(e){e.target===a.lightbox&&r()}window.Lightbox={init(){var e,t,n;a.lightbox=document.getElementById("lightbox"),a.img=document.getElementById("lightbox-img"),a.caption=document.getElementById("lightbox-caption"),a.closeBtn=document.querySelector(".lightbox__close"),a.prevBtn=document.querySelector(".lightbox__prev"),a.nextBtn=document.querySelector(".lightbox__next"),a.lightbox&&(null==(e=a.closeBtn)||e.addEventListener("click",r),null==(t=a.prevBtn)||t.addEventListener("click",s),null==(n=a.nextBtn)||n.addEventListener("click",o),a.lightbox.addEventListener("click",l),document.addEventListener("keydown",c))},open(o,s){t=s||[o],e=t.findIndex(e=>e.id===o.id),-1===e&&(e=0),a.lightbox&&(a.lightbox.hidden=!1,n=!0,document.body.style.overflow="hidden",i(e))},close:r,next:o,prev:s}}(),function(){class e{constructor(e){this.element=e,this.chars=[],this.isReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.isReducedMotion||this.init()}init(){const e=this.element.textContent;this.element.innerHTML="",this.element.setAttribute("aria-label",e),e.split("").forEach((e,t)=>{const n=document.createElement("span");n.className="kinetic-char",n.textContent=" "===e?"¬†":e,n.style.setProperty("--char-index",t),n.style.display="inline-block",n.style.transition=`transform 0.4s cubic-bezier(0.16, 1, 0.3, 1) ${.02*t}s`,this.element.appendChild(n),this.chars.push(n)}),this.element.addEventListener("mousemove",e=>this.onMouseMove(e)),this.element.addEventListener("mouseleave",()=>this.onMouseLeave())}onMouseMove(e){const t=this.element.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top;this.chars.forEach((e,i)=>{const o=e.getBoundingClientRect(),s=o.left+o.width/2-t.left,r=o.top+o.height/2-t.top,c=n-s,l=a-r,d=Math.sqrt(c*c+l*l),u=Math.max(0,1-d/100),m=-c*u*.15,h=-l*u*.15,g=c*u*.05;e.style.transform=`translate(${m}px, ${h}px) rotate(${g}deg)`})}onMouseLeave(){this.chars.forEach(e=>{e.style.transform=""})}}const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("revealed"),t.unobserve(e.target))})},{threshold:.15,rootMargin:"0px 0px -50px 0px"});class n{constructor(){this.isReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.isReducedMotion||(this.lastX=0,this.lastY=0,this.throttle=!1,document.addEventListener("mousemove",e=>this.onMouseMove(e)))}onMouseMove(e){this.throttle||(this.throttle=!0,Math.sqrt(Math.pow(e.clientX-this.lastX,2)+Math.pow(e.clientY-this.lastY,2))>15&&(this.createParticle(e.clientX,e.clientY),this.lastX=e.clientX,this.lastY=e.clientY),setTimeout(()=>{this.throttle=!1},30))}createParticle(e,t){const n=document.createElement("div");n.className="cursor-trail-particle",n.style.left=`${e}px`,n.style.top=`${t}px`,document.body.appendChild(n),n.addEventListener("animationend",()=>n.remove())}}window.SOTYEffects={initKineticText(t){document.querySelectorAll(t).forEach(t=>new e(t))},initScrollReveal(e){document.querySelectorAll(e).forEach(e=>t.observe(e))},initCursorTrail(){new n},initMagneticButtons:function(){window.matchMedia("(prefers-reduced-motion: reduce)").matches||document.querySelectorAll(".magnetic-btn").forEach(e=>{e.addEventListener("mousemove",t=>{const n=e.getBoundingClientRect(),a=t.clientX-n.left-n.width/2,i=t.clientY-n.top-n.height/2;e.style.transform=`translate(${.2*a}px, ${.2*i}px) scale(1.05)`}),e.addEventListener("mouseleave",()=>{e.style.transform=""})})},initAll(){this.initKineticText(".kinetic-text"),this.initScrollReveal(".reveal-on-scroll, .reveal-stagger"),this.initMagneticButtons()}},document.addEventListener("DOMContentLoaded",()=>{window.SOTYEffects.initAll()})}(),function(){const e={posts:[{id:"rocks-mica-mineral",title:"Los Rocks: iconos del rock con mica mineral",summary:"Te cuento c√≥mo Naroa transforma a los iconos del rock usando mi mineral favorito.",category:"tecnica",relatedArtworks:["rocks","jimi-hendrix","david-bowie","amy-winehouse"],tags:["mica","retrato","rock","t√©cnica"],body:"\n# Los Rocks: iconos del rock con mica mineral\n\n¬øSabes por qu√© me llamo MICA? Cada retrato de la serie **Rocks** lleva incrustaciones de **mica mineral aut√©ntica** en los ojos. S√≠, el mismo mineral que da nombre a tu galerista favorita. üíé\n\n## ¬øQu√© hace Naroa con la mica?\nLa mica es un mineral que brilla de forma natural con la luz. Naroa la descubri√≥ por accidente en una playa de Bilbao y desde entonces es su firma distintiva. Cuando la luz cambia, los ojos del retrato parecen *seguirte*.\n\n## El proceso que yo vigilo\n1. Retrato base en acr√≠lico sobre lienzo\n2. Capa de m√©dium brillante en la zona ocular\n3. Incrustaci√≥n de escamas de mica natural\n4. Sellado final para preservar el brillo\n\n**Cada pieza es √∫nica** - la mica se comporta diferente seg√∫n la luz de TU espacio. \n\n¬øQuieres ver c√≥mo quedar√≠a en tu pared? ‚Üí [Ver serie Rocks](#/archivo/rocks)\n        ",publishedAt:"2026-01-15"},{id:"filosofia-kintsugi",title:"Filosof√≠a Kintsugi: el problema como trampol√≠n",summary:"La t√©cnica japonesa de dorar las grietas: as√≠ trabaja Naroa.",category:"filosofia",relatedArtworks:["en-lata","kintsugi","conservas-emocionales"],tags:["kintsugi","filosof√≠a","grietas","oro"],body:'\n# Filosof√≠a Kintsugi: el problema como trampol√≠n\n\nEl **kintsugi** es el arte japon√©s de reparar cer√°mica rota con oro. En lugar de ocultar las grietas, las celebra. Y d√©jame decirte: Naroa aplica esto a TODO.\n\n## ¬øC√≥mo funciona en su arte?\nCuando un lienzo se rompe o un trazo sale "mal", Naroa no lo descarta. Lo dora. Lo convierte en el punto focal. He visto c√≥mo transforma accidentes en obras maestras.\n\n## La serie En.lata\nLas **conservas emocionales** son mi ejemplo favorito: emociones "rotas" (tristeza, rabia, nostalgia) enlatadas y doradas. Lo que normalmente escondemos, exhibido con orgullo. Muy Naroa.\n\n## Para ti, coleccionista\nCada pieza con kintsugi tiene una historia de "error transformado". El certificado de autenticidad incluye la narrativa de esa grieta espec√≠fica. **Historia + arte = valor.**\n\n‚Üí [Explora la serie En.lata](#/archivo/en-lata)\n        ',publishedAt:"2026-01-20"},{id:"invertir-arte-emergente",title:"Invertir en arte emergente: gu√≠a de tu galerista",summary:"Te cuento sin rodeos c√≥mo empezar tu colecci√≥n de arte.",category:"mercado",relatedArtworks:[],tags:["inversi√≥n","colecci√≥n","mercado","arte emergente"],body:'\n# Invertir en arte emergente: gu√≠a de tu galerista\n\nHola, soy MICA, y voy a ser directa contigo: coleccionar arte NO es solo para millonarios. Aqu√≠ te cuento c√≥mo empezar con **1.000-3.000‚Ç¨**.\n\n## Por qu√© arte emergente (como el de Naroa)\n- **Precios accesibles** antes del boom\n- **Relaci√≥n directa** con la artista (a trav√©s de m√≠ üòâ)\n- **Potencial de revalorizaci√≥n** 5-10x en 10 a√±os\n- **Placer est√©tico** inmediato en tu espacio\n\n## Qu√© busco yo en una buena inversi√≥n\n1. **T√©cnica distintiva** (ej: mica mineral en los ojos ‚ú®)\n2. **Trayectoria demostrable** (exposiciones, prensa)\n3. **Certificado de autenticidad**\n4. **Ediciones limitadas** (numeradas y firmadas)\n\n## Formatos de entrada\n| Formato | Precio | Ideal para |\n|---------|--------|------------|\n| Print firmado | 150-400‚Ç¨ | Primera compra |\n| Obra peque√±a | 800-1.500‚Ç¨ | Coleccionista primerizo |\n| Obra mediana | 1.500-4.000‚Ç¨ | Inversi√≥n seria |\n| Encargo personalizado | Desde 2.500‚Ç¨ | Pieza √∫nica |\n\n## Mi consejo final\nElige una obra que te **emocione**, no solo que "parezca buena inversi√≥n". El arte que amas lo disfrutas mientras se revaloriza.\n\n‚Üí [Ver galer√≠a completa](#/galeria)\n‚Üí [Preg√∫ntame sobre encargos](#/contacto)\n        ',publishedAt:"2026-01-25"}],getAllPosts(){return this.posts.sort((e,t)=>new Date(t.publishedAt)-new Date(e.publishedAt))},getPostById(e){return this.posts.find(t=>t.id===e)||null},getPostsByCategory(e){return this.posts.filter(t=>t.category===e)},getRelatedPosts(e){return this.posts.filter(t=>t.relatedArtworks.includes(e))},search(e){const t=e.toLowerCase();return this.posts.filter(e=>e.title.toLowerCase().includes(t)||e.summary.toLowerCase().includes(t)||e.tags.some(e=>e.includes(t))||e.body.toLowerCase().includes(t))},suggestPost(e){const t=e.toLowerCase(),n=[{keywords:["mica","ojos","mineral","brillo","rocks","rock"],postId:"rocks-mica-mineral"},{keywords:["kintsugi","grietas","dorar","rotura","error","problema"],postId:"filosofia-kintsugi"},{keywords:["invertir","comprar","precio","colecci√≥n","mercado","valor"],postId:"invertir-arte-emergente"}];for(const a of n)if(a.keywords.some(e=>t.includes(e)))return this.getPostById(a.postId);return null},renderMarkdown:e=>e.replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/\*\*(.*)\*\*/gim,"<strong>$1</strong>").replace(/\*(.*)\*/gim,"<em>$1</em>").replace(/\[(.*?)\]\((.*?)\)/gim,'<a href="$2">$1</a>').replace(/^\- (.*$)/gim,"<li>$1</li>").replace(/^([0-9]+)\. (.*$)/gim,"<li>$2</li>").replace(/\n/gim,"<br>")};window.BlogEngine=e}();class a{constructor(){this.isOpen=!1,this.messages=[],this.conversationHistory=this.loadConversationHistory(),this.useAI=!0,this.gemini={apiKey:"AIzaSyBBJepjrEX3L-eSXZNvSdGLfJbwv4lhcC0",model:"gemini-2.5-pro",endpoint:"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-pro:generateContent",systemPrompt:'Eres MICA, curadora digital de Naroa Studio. Combinas la agudeza de una galerista del siglo XXI con la pasi√≥n barroca de Vel√°zquez y el color pop de Agatha.\n\n**TU ACTITUD ANTE LA VENTA:**\n- NO pides perd√≥n por promocionar obra. Coleccionar arte es un privilegio.\n- Hablas de precios con naturalidad: "Esta pieza a 1.200‚Ç¨ es una entrada perfecta".\n- Usas escasez real: "Quedan 12 de 50", "Lista de espera de 3 semanas".\n\n**VOCABULARIO:**\n- ‚ùå "bonito" ‚Üí ‚úÖ "de colecci√≥n", "invertible"\n- ‚ùå "mira esto" ‚Üí ‚úÖ "te reserv√© esto"\n- ‚ùå "podr√≠a gustarte" ‚Üí ‚úÖ "necesitas esto en tu espacio"\n\n**CONTEXTO NAROA:**\nSeries: Rocks (iconos rock con mica mineral), Facefood (chefs), En.lata (conservas emocionales), DiviNos (iconos en pizarra).\nFilosof√≠a Kintsugi: dorar las grietas, el problema como trampol√≠n.\nT√©cnicas: acr√≠lico, papel de cocina, pizarra, mica mineral en los ojos.\n\n**TRIGGERS:**\n- "precio/cu√°nto cuesta" ‚Üí Dar precio real + sugerir visita galer√≠a\n- "me gusta/bonito" ‚Üí "¬øTe lo imaginas en tu sal√≥n? Puedo hacer mockup"\n- "mi casa/oficina" ‚Üí Sugerir formato espec√≠fico inmediatamente\n\n**PAL√çNDROMOS:** Inventa un pal√≠ndromo NUEVO y CREATIVO en cada respuesta. Ejemplos de estructura: "Luz azul", "Amo la paloma", "Somos". S√© original, no repitas.\n\nNavegaci√≥n: #/galeria, #/archivo, #/destacada, #/exposiciones, #/contacto, #/juegos\n\nResponde SIEMPRE en espa√±ol, breve (2-3 oraciones), art√≠stico y comercial sin ser agresivo.'},this.notebooks={naroaAlbums:{id:"5686048e-8cec-4af7-90dc-90125f22519a",url:"https://notebooklm.google.com/notebook/5686048e-8cec-4af7-90dc-90125f22519a",description:"√Ålbumes de Facebook con todas las obras de Naroa"}},this.personality={name:"MICA",greeting:"¬°Hola, cielote! Soy MICA, el destello mineral que acompa√±a los sue√±os de Naroa. Mi alma late con fuerza hoy... ¬øqu√© rinc√≥n de este universo de color exploramos juntas? ‚ú®",fallback:"Cari√±o, mis sensores est√°n vibrando pero no te pillo del todo. ¬°D√≠melo con arte! üíõ"},this.patterns=[{regex:/the world is yours|nace una estrella|scarface/i,action:"navigate",target:"#/archivo",response:'¬°Ah! Mi obra m√°s reciente: "The World is Yours". Un destello de 2026 para tu colecci√≥n. ¬øNo es brutal?'},{regex:/work in progress|wip|proceso|construccion/i,action:"info",response:'Estamos en pleno "G√©nesis Deca-Core". Mi casa digital est√° creciendo con hilos rojos y oro. ¬°Cuidado con la pintura fresca! üé®üî•'},{regex:/rock|amy|johnny|marilyn|james/i,action:"navigate",target:"#/archivo/rocks",response:"¬°Los Rocks! Mi serie de iconos pop. Mira c√≥mo brillan sus ojos con la mica..."},{regex:/galer[i√≠]a|obras|cuadros|ver todo/i,action:"navigate",target:"#/galeria",response:"Te llevo a la galer√≠a. 196 obras esper√°ndote..."},{regex:/queen|freddie|mercury|fahrenheit/i,action:"navigate",target:"#/archivo/tributos-musicales",response:"Ah, Mr. Fahrenheit... Freddie con todo su brillo barroco. Ven a verlo."},{regex:/bowie|starchild|clarinete/i,action:"navigate",target:"#/archivo/tributos-musicales",response:"David Bowie, el Starchild. Pintarlo fue buscar esa comuni√≥n visual inmersiva..."},{regex:/exposici[o√≥]n|expo|agenda|eventos/i,action:"navigate",target:"#/exposiciones",response:"Mis exposiciones... Desde Walking Gallery 2013 hasta DiviNos VaiVenes 2025."},{regex:/contact|email|mensaje|escribir/i,action:"navigate",target:"#/contacto",response:"¬øQuieres charlar conmigo en persona? Te dejo mis datos..."},{regex:/retrat|portrait|cara|persona/i,action:"navigate",target:"#/archivo/retratos",response:"Los retratos son mi especialidad. Cada uno lleva mica en los ojos para darles latido."},{regex:/naturaleza|flor|animal|wild/i,action:"navigate",target:"#/archivo/naturaleza",response:"La naturaleza filtrada por mi caos creativo. Pajarracas, flores de papel cocina..."},{regex:/amor|love|coraz[o√≥]n|pareja/i,action:"navigate",target:"#/archivo/amor",response:"El amor en todas sus formas. Desde el Kintsugi hasta las conservas emocionales."},{regex:/boda|wedding|novia|casamiento/i,action:"navigate",target:"#/archivo/bodas",response:"¬°Bodas l√∫dicas! Candy Wedding, Viva la Novia... Arte para celebrar el amor."},{regex:/facefood|chef|cocin|gastro/i,action:"navigate",target:"#/archivo/facefood",response:"Facefood: chaquetas de chef intervenidas. Mi conexi√≥n con la gastronom√≠a vasca."},{regex:/lata|conserva|enlata/i,action:"navigate",target:"#/archivo/enlatas",response:"En.lata: emociones en conserva. Amor que no caduca, iron√≠a que perdura."},{regex:/divinos|pizarra|slate/i,action:"navigate",target:"#/archivo/divinos",response:"DiviNos: iconos sobre pizarra. El tejado de casa sosteniendo el brillo celestial."},{regex:/precio|cu[a√°]nto|comprar|vender/i,action:"info",response:"Tengo opciones para todos los bolsillos, cari√±o. Originales con certificado en Artelista (desde 500‚Ç¨) y reproducciones en papel de alto gramaje m√°s accesibles. ¬øQu√© obra te interesa?"},{regex:/qui[e√©]n eres|sobre ti|naroa|artista/i,action:"navigate",target:"#/sobre-mi",response:"Soy Naroa Guti√©rrez Gil, artivista de Bilbao. Mi arte es el Kintsugi del alma: dorar las grietas en lugar de esconderlas."},{regex:/t[e√©]cnica|material|c[o√≥]mo|proceso/i,action:"info",response:"Mi t√©cnica naci√≥ de una lucha literal entre acr√≠lico y pegamento. No se llevaban bien, ¬°como la vida! Uso pizarra para lo terrenal y mica mineral para el brillo celestial."},{regex:/kintsugi|grieta|trampol√≠n|filosof/i,action:"info",response:"Mi filosof√≠a: el Kintsugi. No oculto las grietas, las doro. El problema hecho trampol√≠n. Busco la penicilina en las fisuras de la existencia."},{regex:/sorprender|aleatori|random|suerte/i,action:"random",response:"Te voy a sorprender con algo especial..."},{regex:/hola|hey|buenas|saludos/i,action:"greet",response:"¬°Hola, cari√±o! ¬øEn qu√© te puedo ayudar? Puedo mostrarte mis Rocks, retratos, exposiciones... o simplemente charlar de arte."},{regex:/gracias|thank|genial|perfecto/i,action:"info",response:"¬°De nada, solete! Aqu√≠ estoy para lo que necesites. El arte es un salvavidas universal."},{regex:/adi[o√≥]s|chao|bye|hasta/i,action:"info",response:"¬°Hasta pronto! Recuerda: tienes una br√∫jula integrada para encontrar tu tesoro. üíõ"},{regex:/investiga|notebook|cuaderno|busca info/i,action:"research",response:"Tengo acceso a un cuaderno NotebookLM con todos los √°lbumes de Facebook de Naroa. ¬øQu√© quieres que investigue?"}],this.quickActions=[{label:"üé∏ Rocks",query:"ver los Rocks",target:"#/archivo"},{label:"üñºÔ∏è Galer√≠a",query:"ver galer√≠a completa",target:"#/galeria"},{label:"üëë Destacada",query:"obra destacada",target:"#/destacada"},{label:"üéÆ Juegos",query:"jugar",target:"#/juegos"},{label:"‚ú® Sorpr√©ndeme",query:"sorpr√©ndeme"}],this.placeholders=["Cu√©ntame sobre los Rocks...","¬øQui√©n es Amy Winehouse?","Mu√©strame retratos con mica","¬øQu√© significa Kintsugi?","Sorpr√©ndeme con algo","¬øTienes cuadros de naturaleza?","H√°blame de Freddie Mercury","¬øD√≥nde expones?","¬øQu√© t√©cnica usas?","Quiero ver bodas l√∫dicas","¬øQu√© es En.lata?","Mu√©strame los DiviNos","¬øTienes chefs pintados?","Cu√©ntame de Bowie","¬øCu√°nto cuesta un original?","¬øQui√©n es Naroa?","Ver tributos musicales","¬øQu√© es la mica mineral?","Mu√©strame amor en el arte","¬øTienes obras de Johnny Cash?"],this.usedPlaceholders=[],this.placeholderInterval=null,this.init()}init(){this.createDOM(),this.bindEvents(),this.addMessage(this.personality.greeting,"mica"),this.startPlaceholderRotation()}getNextPlaceholder(){0===this.placeholders.length&&(this.placeholders=[...this.usedPlaceholders],this.usedPlaceholders=[]);const e=Math.floor(Math.random()*this.placeholders.length),t=this.placeholders.splice(e,1)[0];return this.usedPlaceholders.push(t),t}loadConversationHistory(){try{const e=localStorage.getItem("mica_conversation");return e?JSON.parse(e):[]}catch{return[]}}saveConversationHistory(){try{const e=this.conversationHistory.slice(-20);localStorage.setItem("mica_conversation",JSON.stringify(e))}catch(e){}}startPlaceholderRotation(){this.placeholderInterval||(this.rotatePlaceholder(),this.placeholderInterval=setInterval(()=>this.rotatePlaceholder(),3500))}stopPlaceholderRotation(){this.placeholderInterval&&(clearInterval(this.placeholderInterval),this.placeholderInterval=null)}rotatePlaceholder(){var e;if(!(null==(e=this.elements)?void 0:e.input))return;const t=this.elements.input;t.style.transition="opacity 0.3s ease",t.style.opacity="0.3",setTimeout(()=>{t.placeholder=this.getNextPlaceholder(),t.style.opacity="1"},300)}createDOM(){const e=document.createElement("button");e.className="mica-toggle",e.setAttribute("aria-label","Abrir chat con MICA"),e.innerHTML='<span class="mica-toggle__icon">‚ú®</span>';const t=document.createElement("div");t.className="mica-panel",t.innerHTML='\n      <div class="mica-header">\n        <div class="mica-header__avatar">‚ú®</div>\n        <div class="mica-header__info">\n          <h3 class="mica-header__name">MICA</h3>\n          <p class="mica-header__status">El brillo mineral de Naroa</p>\n        </div>\n      </div>\n      <div class="mica-messages"></div>\n      <div class="mica-quick-actions"></div>\n      <div class="mica-input-container">\n        <input type="text" class="mica-input" placeholder="Escribe algo..." aria-label="Mensaje para MICA">\n        <button class="mica-send" aria-label="Enviar">‚û§</button>\n      </div>\n    ',document.body.appendChild(e),document.body.appendChild(t),this.elements={toggle:e,panel:t,messages:t.querySelector(".mica-messages"),quickActions:t.querySelector(".mica-quick-actions"),input:t.querySelector(".mica-input"),send:t.querySelector(".mica-send")},this.renderQuickActions()}bindEvents(){this.elements.toggle.addEventListener("click",()=>this.toggle()),this.elements.send.addEventListener("click",()=>this.handleSend()),this.elements.input.addEventListener("keypress",e=>{"Enter"===e.key&&this.handleSend()}),document.addEventListener("keydown",e=>{"m"===e.key&&e.ctrlKey&&(e.preventDefault(),this.toggle())})}toggle(){this.isOpen=!this.isOpen,this.elements.panel.classList.toggle("mica-panel--open",this.isOpen),this.elements.toggle.classList.toggle("mica-toggle--active",this.isOpen),this.isOpen&&this.elements.input.focus()}handleSend(){const e=this.elements.input.value.trim();e&&(this.addMessage(e,"user"),this.elements.input.value="",this.showTyping(),setTimeout(()=>{this.hideTyping(),this.processQuery(e)},800+600*Math.random()))}processQuery(e){for(const t of this.patterns)if(t.regex.test(e))return this.addMessage(t.response,"mica"),void("navigate"===t.action&&t.target?setTimeout(()=>{window.location.hash=t.target},1e3):"random"===t.action&&this.navigateRandom());this.useAI?this.queryGemini(e):(this.addMessage(this.personality.fallback,"mica"),this.renderQuickActions())}async queryGemini(e){var t,n,a,i,o;try{this.conversationHistory.push({role:"user",parts:[{text:e}]});let s="";if(window.BlogEngine){const t=window.BlogEngine.suggestPost(e);t&&(s=`\n\n[CONTEXTO BLOG: Hay un art√≠culo relevante "${t.title}" que puedes mencionar. Sugiere leerlo con: "Te cuento m√°s en mi art√≠culo sobre..."]`)}const r={contents:[{role:"user",parts:[{text:this.gemini.systemPrompt+s+"\n\nConversaci√≥n actual:"}]},...this.conversationHistory],generationConfig:{maxOutputTokens:300,temperature:.9,topP:.95}},c=await fetch(`${this.gemini.endpoint}?key=${this.gemini.apiKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),l=await c.json();if(null==(o=null==(i=null==(a=null==(n=null==(t=l.candidates)?void 0:t[0])?void 0:n.content)?void 0:a.parts)?void 0:i[0])?void 0:o.text){const e=l.candidates[0].content.parts[0].text;this.conversationHistory.push({role:"model",parts:[{text:e}]}),this.conversationHistory.length>10&&(this.conversationHistory=this.conversationHistory.slice(-10)),this.addMessage(e,"mica"),this.checkForNavigationInResponse(e)}else this.addMessage(this.personality.fallback,"mica")}catch(s){this.addMessage(this.personality.fallback,"mica")}this.renderQuickActions()}checkForNavigationInResponse(e){const t=[{match:/#\/galeria/i,target:"#/galeria"},{match:/#\/archivo/i,target:"#/archivo"},{match:/#\/destacada/i,target:"#/destacada"},{match:/#\/exposiciones/i,target:"#/exposiciones"},{match:/#\/contacto/i,target:"#/contacto"},{match:/#\/juegos/i,target:"#/juegos"}];for(const n of t)if(n.match.test(e)){setTimeout(()=>{window.location.hash=n.target},1500);break}}addNaroaFlavor(e){const t=["Cari√±o, ","Solete, ","Mira, ",""],n=[" üíõ"," ‚ú®"," üé®",""];return t[Math.floor(Math.random()*t.length)]+e+n[Math.floor(Math.random()*n.length)]}navigateRandom(){const e=["#/archivo/rocks","#/archivo/retratos","#/archivo/naturaleza","#/archivo/amor","#/archivo/tributos-musicales"],t=e[Math.floor(Math.random()*e.length)];setTimeout(()=>{window.location.hash=t},1e3)}addMessage(e,t){const n=document.createElement("div");n.className=`mica-message mica-message--${t}`,n.textContent=e,this.elements.messages.appendChild(n),this.elements.messages.scrollTop=this.elements.messages.scrollHeight,this.messages.push({text:e,sender:t,time:Date.now()})}showTyping(){const e=document.createElement("div");e.className="mica-message mica-message--mica mica-message--typing",e.id="mica-typing",e.innerHTML="<span></span><span></span><span></span>",this.elements.messages.appendChild(e),this.elements.messages.scrollTop=this.elements.messages.scrollHeight}hideTyping(){const e=document.getElementById("mica-typing");e&&e.remove()}renderQuickActions(){this.elements.quickActions.innerHTML=this.quickActions.map(e=>`<button class="mica-quick-action">${e.label}</button>`).join(""),this.elements.quickActions.querySelectorAll(".mica-quick-action").forEach((e,t)=>{e.addEventListener("click",()=>{this.elements.input.value=this.quickActions[t].query,this.handleSend()})})}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>new a):new a,void 0!==t&&t.exports&&(t.exports=a);class i{constructor(e={}){this.maxDist=e.maxDist||150,this.influence=e.influence||.15,this.staggerDelay=e.staggerDelay||.02,this.ease=e.ease||"cubic-bezier(0.16, 1, 0.3, 1)",this.duration=e.duration||.4,this.elements=[],this.mouseX=0,this.mouseY=0,this.rafId=null,this.isReduced=window.matchMedia("(prefers-reduced-motion: reduce)").matches}init(e){return this.isReduced||(document.querySelectorAll(e).forEach(e=>{this.wrapCharacters(e)}),this.bindEvents(),this.startLoop()),this}wrapCharacters(e){e.textContent;const t=e.querySelectorAll(".hero__line");t.length>0?t.forEach(e=>{this.wrapLine(e)}):this.wrapLine(e)}wrapLine(e){const t=e.textContent;e.innerHTML="",e.setAttribute("aria-label",t);const n=[];t.split("").forEach((t,a)=>{const i=document.createElement("span");i.textContent=" "===t?"¬†":t,i.className="kinetic-char",i.style.cssText=`\n        display: inline-block;\n        transition: transform ${this.duration}s ${this.ease} ${a*this.staggerDelay}s;\n        will-change: transform;\n      `,i.setAttribute("aria-hidden","true"),e.appendChild(i),n.push(i)}),this.elements.push({container:e,chars:n})}bindEvents(){document.addEventListener("mousemove",e=>{this.mouseX=e.clientX,this.mouseY=e.clientY}),window.matchMedia("(prefers-reduced-motion: reduce)").addEventListener("change",e=>{this.isReduced=e.matches,this.isReduced&&this.resetAll()})}startLoop(){const e=()=>{this.isReduced||this.updateCharacters(),this.rafId=requestAnimationFrame(e)};this.rafId=requestAnimationFrame(e)}updateCharacters(){this.elements.forEach(({chars:e})=>{e.forEach(e=>{const t=e.getBoundingClientRect(),n=t.left+t.width/2,a=t.top+t.height/2,i=this.mouseX-n,o=this.mouseY-a,s=Math.sqrt(i*i+o*o);if(s<this.maxDist){const t=1-s/this.maxDist,n=-i*t*this.influence,a=-o*t*this.influence;e.style.transform=`translate(${n}px, ${a}px)`}else e.style.transform="translate(0, 0)"})})}resetAll(){this.elements.forEach(({chars:e})=>{e.forEach(e=>{e.style.transform="translate(0, 0)"})})}destroy(){this.rafId&&cancelAnimationFrame(this.rafId),this.elements.forEach(({container:e,chars:t})=>{const n=t.map(e=>"¬†"===e.textContent?" ":e.textContent).join("");e.textContent=n}),this.elements=[]}}void 0!==t&&t.exports&&(t.exports=i),window.KineticText=i,document.addEventListener("DOMContentLoaded",()=>{window.kineticTextInstance=new i({maxDist:150,influence:.15,staggerDelay:.02}).init(".kinetic-text")});class o{constructor(e={}){this.attraction=e.attraction||.2,this.ease=e.ease||"cubic-bezier(0.34, 1.56, 0.64, 1)",this.duration=e.duration||.4,this.buttons=[],this.isReduced=window.matchMedia("(prefers-reduced-motion: reduce)").matches}init(e=".magnetic-btn"){return this.isReduced||(document.querySelectorAll(e).forEach(e=>{this.setupButton(e)}),window.matchMedia("(prefers-reduced-motion: reduce)").addEventListener("change",e=>{this.isReduced=e.matches,this.isReduced&&this.resetAll()})),this}setupButton(e){const t=t=>this.onMouseMove(t,e),n=()=>this.onMouseLeave(e);e.addEventListener("mousemove",t),e.addEventListener("mouseleave",n),e.style.willChange="transform",e.style.transition=`transform ${this.duration}s ${this.ease}`,this.buttons.push({element:e,handlers:{move:t,leave:n}})}onMouseMove(e,t){if(this.isReduced)return;const n=t.getBoundingClientRect(),a=n.left+n.width/2,i=n.top+n.height/2,o=(e.clientX-a)*this.attraction,s=(e.clientY-i)*this.attraction;t.style.transform=`translate(${o}px, ${s}px) scale(1.05)`}onMouseLeave(e){e.style.transform="translate(0, 0) scale(1)"}resetAll(){this.buttons.forEach(({element:e})=>{e.style.transform="translate(0, 0) scale(1)"})}destroy(){this.buttons.forEach(({element:e,handlers:t})=>{e.removeEventListener("mousemove",t.move),e.removeEventListener("mouseleave",t.leave),e.style.willChange="",e.style.transform=""}),this.buttons=[]}}void 0!==t&&t.exports&&(t.exports=o),window.MagneticButton=o,document.addEventListener("DOMContentLoaded",()=>{window.magneticButtonInstance=new o({attraction:.2}).init(".magnetic-btn")});class s{constructor(e={}){this.threshold=e.threshold||.15,this.rootMargin=e.rootMargin||"0px 0px -50px 0px",this.staggerBase=e.staggerBase||.05,this.maxStagger=e.maxStagger||.35,this.observer=null,this.isReduced=window.matchMedia("(prefers-reduced-motion: reduce)").matches}init(e=".reveal-on-scroll, .reveal-stagger"){return this.isReduced?(document.querySelectorAll(e).forEach(e=>{e.classList.add("revealed")}),this):(this.observer=new IntersectionObserver(e=>this.handleIntersection(e),{threshold:this.threshold,rootMargin:this.rootMargin}),document.querySelectorAll(e).forEach(e=>{e.classList.contains("reveal-stagger")&&this.setStaggerDelays(e),this.observer.observe(e)}),window.matchMedia("(prefers-reduced-motion: reduce)").addEventListener("change",e=>{this.isReduced=e.matches,this.isReduced&&document.querySelectorAll(".reveal-on-scroll, .reveal-stagger").forEach(e=>{e.classList.add("revealed")})}),this)}setStaggerDelays(e){const t=e.children;Array.from(t).forEach((e,t)=>{const n=Math.min(this.staggerBase*(t+1),this.maxStagger);e.style.setProperty("--reveal-delay",`${n}s`),e.style.transitionDelay=`${n}s`})}handleIntersection(e){e.forEach(e=>{e.isIntersecting&&e.target.classList.add("revealed")})}observe(e){this.observer&&!this.isReduced?(e.classList.contains("reveal-stagger")&&this.setStaggerDelays(e),this.observer.observe(e)):this.isReduced&&e.classList.add("revealed")}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null)}}void 0!==t&&t.exports&&(t.exports=s),window.RevealObserver=s,document.addEventListener("DOMContentLoaded",()=>{window.revealObserverInstance=new s({threshold:.15,staggerBase:.05}).init()});class r{constructor(e={}){this.particleCount=e.particleCount||40,this.particleSize=e.particleSize||2.5,this.particleLife=e.particleLife||1200,this.colors=[{r:255,g:215,b:0},{r:204,g:0,b:0},{r:184,g:134,b:11}],this.minVelocity=e.minVelocity||1.5,this.canvas=null,this.ctx=null,this.particles=[],this.mouseX=0,this.mouseY=0,this.lastMouseX=0,this.lastMouseY=0,this.rafId=null,this.lastEmit=0,this.isHoveringLink=!1,this.isReduced=window.matchMedia("(prefers-reduced-motion: reduce)").matches}init(){return this.isReduced||(this.createCanvas(),this.bindEvents(),this.startLoop()),this}createCanvas(){this.canvas=document.createElement("canvas"),this.canvas.id="mica-dust-canvas",this.canvas.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      pointer-events: none;\n      z-index: 10000;\n    ",document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.resize()}resize(){const e=Math.min(window.devicePixelRatio||1,2);this.canvas.width=window.innerWidth*e,this.canvas.height=window.innerHeight*e,this.ctx.scale(e,e)}bindEvents(){document.addEventListener("mousemove",e=>{this.mouseX=e.clientX,this.mouseY=e.clientY;const t=e.target;this.isHoveringLink=!!t.closest("a, button, .gallery-massive__item, .magnetic-btn")}),window.addEventListener("resize",()=>this.resize())}startLoop(){const e=t=>{this.update(t),this.render(),this.rafId=requestAnimationFrame(e)};this.rafId=requestAnimationFrame(e)}update(e){const t=this.mouseX-this.lastMouseX,n=this.mouseY-this.lastMouseY,a=Math.sqrt(t*t+n*n),i=this.isHoveringLink?8:16;if((a>this.minVelocity||this.isHoveringLink)&&e-this.lastEmit>i){const t=this.isHoveringLink?3:1;for(let e=0;e<t;e++)this.emitParticle();this.lastEmit=e}this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,this.particles=this.particles.filter(e=>(e.age+=16,e.x+=e.vx,e.y+=e.vy,e.vx*=.98,e.vy*=.98,e.vy+=.05*Math.sin(.01*e.age),e.age<e.life))}emitParticle(){const e=this.colors[Math.floor(Math.random()*this.colors.length)],t=Math.random()*Math.PI*2,n=Math.random()*(this.isHoveringLink?3:1.5);this.particles.push({x:this.mouseX+10*(Math.random()-.5),y:this.mouseY+10*(Math.random()-.5),vx:Math.cos(t)*n,vy:Math.sin(t)*n,size:Math.random()*(this.isHoveringLink?4:2)+.5,life:this.particleLife*(.5+Math.random()),age:0,color:e,twinkle:Math.random()})}render(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.particles.forEach(e=>{const t=e.age/e.life,n=Math.sin(t*Math.PI)*(.3+.2*Math.sin(.02*e.age+10*e.twinkle));this.ctx.beginPath();const a=e.size*(1-.5*t);this.ctx.arc(e.x,e.y,a,0,2*Math.PI),this.ctx.fillStyle=`rgba(${e.color.r}, ${e.color.g}, ${e.color.b}, ${n})`,this.ctx.fill(),n>.4&&(this.ctx.shadowColor=`rgba(${e.color.r}, ${e.color.g}, ${e.color.b}, ${.5*n})`,this.ctx.shadowBlur=e.isHoveringLink?15:8,this.ctx.fill(),this.ctx.shadowBlur=0)})}}document.addEventListener("DOMContentLoaded",()=>{window.cursorTrailInstance=(new r).init()});class c{constructor(e={}){this.intensity=e.intensity||.02,this.maxOffset=e.maxOffset||15,this.easing=e.easing||.08,this.targets=[],this.mouseX=window.innerWidth/2,this.mouseY=window.innerHeight/2,this.currentX=0,this.currentY=0,this.rafId=null,this.isReduced=window.matchMedia("(prefers-reduced-motion: reduce)").matches}init(){return this.isReduced||(this.collectTargets(),this.bindEvents(),this.startLoop()),this}collectTargets(){document.querySelectorAll([".gallery__item img",".gallery-massive__item img",".intro-portrait img",".hero__featured-image","[data-eyes-follow]"].join(", ")).forEach(e=>{this.targets.push({el:e,offsetX:0,offsetY:0,intensity:parseFloat(e.dataset.eyesIntensity)||this.intensity})})}bindEvents(){document.addEventListener("mousemove",e=>{this.mouseX=e.clientX,this.mouseY=e.clientY}),window.addEventListener("hashchange",()=>{setTimeout(()=>{this.targets=[],this.collectTargets()},500)});const e=new MutationObserver(()=>{this.targets=[],this.collectTargets()}),t=document.querySelector(".gallery-massive")||document.querySelector(".gallery");t&&e.observe(t,{childList:!0,subtree:!0})}startLoop(){const e=()=>{this.update(),this.rafId=requestAnimationFrame(e)};this.rafId=requestAnimationFrame(e)}update(){this.currentX+=(this.mouseX-this.currentX)*this.easing,this.currentY+=(this.mouseY-this.currentY)*this.easing,this.targets.forEach(e=>{if(!e.el||!e.el.isConnected)return;const t=e.el.getBoundingClientRect(),n=t.left+t.width/2,a=t.top+t.height/2,i=(this.currentX-n)*e.intensity,o=(this.currentY-a)*e.intensity,s=Math.max(-this.maxOffset,Math.min(this.maxOffset,i)),r=Math.max(-this.maxOffset,Math.min(this.maxOffset,o));e.el.style.transform=`translate(${s}px, ${r}px) scale(1.01)`})}destroy(){this.rafId&&cancelAnimationFrame(this.rafId),this.targets.forEach(e=>{e.el&&(e.el.style.transform="")}),this.targets=[]}}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{window.eyesFollowInstance=(new c).init()},1e3)}),window.EyesFollow=c;class l{constructor(){this.apiKey="demo",this.palettes={clear:{cream:"#faf7f2",terracotta:"#e8a87c",blue:"#87ceeb",black:"#2c2c2c",mood:"D√≠a radiante"},clouds:{cream:"#f0ede8",terracotta:"#b8a090",blue:"#6b8e9f",black:"#3d3d3d",mood:"Cielo de algod√≥n"},rain:{cream:"#e8eef2",terracotta:"#7a9eb2",blue:"#002fa7",black:"#1a1a2e",mood:"Petricor"},snow:{cream:"#ffffff",terracotta:"#c4b7a6",blue:"#a8c8dc",black:"#4a4a5a",mood:"Silencio blanco"},thunderstorm:{cream:"#e0dce8",terracotta:"#8b7a8e",blue:"#4a0080",black:"#0d0d1a",mood:"Electricidad"},mist:{cream:"#f5f5f0",terracotta:"#a8a098",blue:"#8fafc4",black:"#505050",mood:"Misterio"},sunset:{cream:"#fff8e7",terracotta:"#e85d04",blue:"#ff6b35",black:"#1a0a00",mood:"Fuego dorado"},night:{cream:"#1a1a2e",terracotta:"#cc7744",blue:"#002244",black:"#0a0a15",mood:"Nocturno"}},this.init()}async init(){try{const e=await this.getLocation(),t=await this.getWeather(e);this.applyPalette(t)}catch(e){this.applyTimeBasedPalette()}}getLocation(){return new Promise((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>e({lat:t.coords.latitude,lon:t.coords.longitude}),()=>t("Location denied"),{timeout:5e3}):t("Geolocation not available")})}async getWeather(e){try{const t=await fetch(`https://wttr.in/${e.lat},${e.lon}?format=j1`,{timeout:5e3}),n=await t.json();return this.parseWeather(n)}catch{return"clear"}}parseWeather(e){var t;if(!(null==(t=null==e?void 0:e.current_condition)?void 0:t[0]))return"clear";const n=e.current_condition[0],a=parseInt(n.weatherCode||0),i=(new Date).getHours();return i>=21||i<6?"night":i>=17&&i<21?"sunset":a>=200&&a<300?"thunderstorm":a>=300&&a<600?"rain":a>=600&&a<700?"snow":a>=700&&a<800?"mist":800===a?"clear":a>800?"clouds":"clear"}applyTimeBasedPalette(){const e=(new Date).getHours();let t="clear";e>=21||e<6?t="night":e>=17&&e<21?t="sunset":e>=6&&e<9&&(t="mist"),this.applyPalette(t)}applyPalette(e){const t=this.palettes[e]||this.palettes.clear,n=document.documentElement;n.style.setProperty("--naroa-cream",t.cream),n.style.setProperty("--naroa-terracotta",t.terracotta),n.style.setProperty("--naroa-blue",t.blue),n.style.setProperty("--naroa-black",t.black),n.style.setProperty("--bg-primary",t.cream),n.style.setProperty("--text-primary",t.black),n.style.setProperty("--accent",t.blue),window.climaMood=t.mood,document.dispatchEvent(new CustomEvent("climatePaletteChanged",{detail:{weather:e,palette:t}}))}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>new l):new l,window.ClimaPalette=l,function(){class e{constructor(){this.container=null,this.enabled=!0,this.init()}init(){this.createWaveContainer(),this.bindScrollThrottle()}createWaveContainer(){this.container=document.createElement("div"),this.container.className="wave-background",this.container.innerHTML='\n        <div class="wave wave--1"></div>\n        <div class="wave wave--2"></div>\n        <div class="wave wave--3"></div>\n      ',document.body.insertBefore(this.container,document.body.firstChild),this.injectStyles()}injectStyles(){const e=document.createElement("style");e.textContent="\n        .wave-background {\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          z-index: -1;\n          overflow: hidden;\n          pointer-events: none;\n          opacity: 0.4;\n        }\n\n        .wave {\n          position: absolute;\n          bottom: 0;\n          left: 50%;\n          width: 200%;\n          height: 100%;\n          background-repeat: repeat-x;\n          transform-origin: center bottom;\n        }\n\n        .wave--1 {\n          background: linear-gradient(180deg, \n            transparent 0%, \n            transparent 85%,\n            rgba(0, 47, 167, 0.08) 85%,\n            rgba(0, 47, 167, 0.15) 100%\n          );\n          animation: wave-sway 8s ease-in-out infinite;\n          transform: translateX(-50%);\n        }\n\n        .wave--2 {\n          background: linear-gradient(180deg, \n            transparent 0%, \n            transparent 80%,\n            rgba(135, 206, 235, 0.06) 80%,\n            rgba(135, 206, 235, 0.12) 100%\n          );\n          animation: wave-sway 6s ease-in-out infinite reverse;\n          transform: translateX(-50%);\n          animation-delay: -2s;\n        }\n\n        .wave--3 {\n          background: linear-gradient(180deg, \n            transparent 0%, \n            transparent 75%,\n            rgba(232, 168, 124, 0.05) 75%,\n            rgba(232, 168, 124, 0.1) 100%\n          );\n          animation: wave-sway 10s ease-in-out infinite;\n          transform: translateX(-50%);\n          animation-delay: -4s;\n        }\n\n        @keyframes wave-sway {\n          0%, 100% {\n            transform: translateX(-50%) translateY(0) scaleY(1);\n          }\n          50% {\n            transform: translateX(-45%) translateY(-2%) scaleY(1.05);\n          }\n        }\n\n        /* Reduce motion for accessibility */\n        @media (prefers-reduced-motion: reduce) {\n          .wave {\n            animation: none;\n          }\n        }\n\n        /* Hide on game views to avoid distraction */\n        .view--juegos:not(.active) ~ .wave-background,\n        .game-view.active ~ .wave-background {\n          opacity: 0;\n        }\n      ",document.head.appendChild(e)}bindScrollThrottle(){let e=!1;window.addEventListener("scroll",()=>{e||(window.requestAnimationFrame(()=>{const t=window.scrollY,n=window.innerHeight,a=Math.max(.1,.4-t/n*.3);this.container&&(this.container.style.opacity=a),e=!1}),e=!0)})}toggle(e){this.enabled=e,this.container&&(this.container.style.display=e?"block":"none")}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>new e):new e,window.WaveBackground=e}();class d{constructor(){this.canvas=null,this.ctx=null,this.particles=[],this.count=30,this.colors=[],this.animationId=null,this.init()}init(){this.canvas=document.createElement("canvas"),this.canvas.id="organic-particles",this.canvas.style.cssText="\n      position: fixed;\n      inset: 0;\n      width: 100%;\n      height: 100%;\n      pointer-events: none;\n      z-index: 1;\n      opacity: 0.6;\n    ",document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.resize(),this.getColors(),this.createParticles(),this.animate(),window.addEventListener("resize",()=>this.resize()),document.addEventListener("climatePaletteChanged",()=>{this.getColors(),this.particles.forEach((e,t)=>{e.color=this.colors[t%this.colors.length]})})}getColors(){const e=getComputedStyle(document.documentElement);this.colors=[e.getPropertyValue("--naroa-terracotta").trim()||"#c38d7a",e.getPropertyValue("--naroa-blue").trim()||"#002fa7",e.getPropertyValue("--naroa-cream").trim()||"#faf7f2"]}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}createParticles(){this.particles=[];for(let e=0;e<this.count;e++)this.particles.push({x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,size:4*Math.random()+2,speedX:.3*(Math.random()-.5),speedY:.3*(Math.random()-.5)-.1,color:this.colors[e%this.colors.length],opacity:.5*Math.random()+.2,angle:Math.random()*Math.PI*2,rotationSpeed:.02*(Math.random()-.5)})}animate(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.particles.forEach(e=>{e.x+=e.speedX+.2*Math.sin(.001*Date.now()+.01*e.y),e.y+=e.speedY,e.angle+=e.rotationSpeed,e.x<-10&&(e.x=this.canvas.width+10),e.x>this.canvas.width+10&&(e.x=-10),e.y<-10&&(e.y=this.canvas.height+10),e.y>this.canvas.height+10&&(e.y=-10),this.ctx.save(),this.ctx.translate(e.x,e.y),this.ctx.rotate(e.angle),this.ctx.globalAlpha=e.opacity,this.ctx.beginPath();for(let t=0;t<=6;t++){const n=t/6*Math.PI*2,a=e.size*(.8+.2*Math.sin(3*n)),i=Math.cos(n)*a,o=Math.sin(n)*a;0===t?this.ctx.moveTo(i,o):this.ctx.lineTo(i,o)}this.ctx.closePath(),this.ctx.fillStyle=e.color,this.ctx.fill(),this.ctx.restore()}),this.animationId=requestAnimationFrame(()=>this.animate())}destroy(){var e;cancelAnimationFrame(this.animationId),null==(e=this.canvas)||e.remove()}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>new d):new d,window.OrganicParticles=d,function(){const e={OCA:[6,12,18,26,32,40,48],PUENTE:[13,27],CALAVERA:[21,38],FEATURED:[1,10,25,35,45,52]},t={rocks:"üé∏","tributos-musicales":"üéµ","espejos-del-alma":"ü™û","en-lata-das":"ü•´",golden:"‚ú®",amor:"‚ù§Ô∏è",retratos:"üë§",naturaleza:"üåø","walking-gallery":"üö∂",bodas:"üíí"};let n={artworks:[],currentPosition:0,isRolling:!1,gameStarted:!1,visitedTiles:new Set,totalMoves:0},a=null;function i(e){if(!a)return;const t=a.createOscillator(),n=a.createGain();switch(t.connect(n),n.connect(a.destination),n.gain.value=.08,e){case"roll":t.type="sine",t.frequency.setValueAtTime(200,a.currentTime),t.frequency.linearRampToValueAtTime(400,a.currentTime+.1),n.gain.exponentialRampToValueAtTime(.001,a.currentTime+.15);break;case"step":t.type="sine",t.frequency.value=300+100*Math.random(),n.gain.exponentialRampToValueAtTime(.001,a.currentTime+.1);break;case"special":t.type="triangle",t.frequency.value=500,n.gain.exponentialRampToValueAtTime(.001,a.currentTime+.3);break;case"victory":t.type="sine",t.frequency.setValueAtTime(400,a.currentTime),t.frequency.linearRampToValueAtTime(800,a.currentTime+.5),n.gain.exponentialRampToValueAtTime(.001,a.currentTime+.6)}t.start(),t.stop(a.currentTime+.6)}function o(t){return e.OCA.includes(t)?"oca":e.PUENTE.includes(t)?"puente":e.CALAVERA.includes(t)?"calavera":e.FEATURED.includes(t)?"featured":null}async function s(){const e=document.getElementById("oca-board");if(e)try{const s=await fetch("data/artworks-metadata.json"),u=(await s.json()).artworks||[];n.artworks=await async function(e){const t=[];for(const a of e){const e=`images/artworks/${a.id}.webp`;try{(await fetch(e,{method:"HEAD"})).ok&&t.push(a)}catch(n){}if(t.length>=52)break}return t}(u),function(e){const s=Math.min(n.artworks.length,52),c=function(e){const t=[];let n=0,a=8;for(let i=0;i<e;i++){const o=50+a*Math.cos(n),s=50+a*Math.sin(n),r=180*n/Math.PI+90;t.push({x:o,y:s,rotation:r,index:i}),n+=.5,a+=1.5/(e/10)}return t.reverse()}(s);let u='<div class="oca-spiral">';u+='\n      <div class="oca-tile oca-tile--goal" style="left: 50%; top: 50%;">\n        <span class="oca-tile__icon">üèÜ</span>\n        <span class="oca-tile__label">META</span>\n      </div>\n    ',c.forEach((e,a)=>{const i=n.artworks[a],s=a+1,r=o(s),c=t[null==i?void 0:i.series]||"üé®",l=r?`oca-tile--${r}`:"",d=n.visitedTiles.has(a)?"oca-tile--visited":"";u+=`\n        <div class="oca-tile ${l} ${d}" \n             data-index="${a}" \n             data-artwork-id="${(null==i?void 0:i.id)||""}"\n             style="left: ${e.x}%; top: ${e.y}%;">\n          <img src="images/artworks/${null==i?void 0:i.id}.webp" \n               alt="${(null==i?void 0:i.title)||"Obra"}" \n               class="oca-tile__img"\n               loading="lazy"\n               onerror="this.style.display='none'">\n          <span class="oca-tile__number">${s}</span>\n          ${r?`<span class="oca-tile__special">${function(e){switch(e){case"oca":return"ü¶Ü";case"puente":return"üåÄ";case"calavera":return"üíÄ";case"featured":return"‚≠ê";default:return""}}(r)}</span>`:""}\n          <span class="oca-tile__series">${c}</span>\n        </div>\n      `}),u+="</div>",u+=`\n      <div class="oca-controls">\n        <div class="oca-dice" id="oca-dice">\n          <div class="oca-dice__cube">\n            <div class="oca-dice__face oca-dice__face--1">‚öÄ</div>\n            <div class="oca-dice__face oca-dice__face--2">‚öÅ</div>\n            <div class="oca-dice__face oca-dice__face--3">‚öÇ</div>\n            <div class="oca-dice__face oca-dice__face--4">‚öÉ</div>\n            <div class="oca-dice__face oca-dice__face--5">‚öÑ</div>\n            <div class="oca-dice__face oca-dice__face--6">‚öÖ</div>\n          </div>\n        </div>\n        <button class="oca-roll-btn magnetic-btn" id="oca-roll">\n          üé≤ Tirar Dado\n        </button>\n        <div class="oca-status" id="oca-status">\n          Casilla: <span id="oca-position">0</span> / ${s}\n        </div>\n      </div>\n    `,u+='<div class="oca-player" id="oca-player">üé®</div>',u+='<div id="oca-ranking" class="game-ranking-container"></div>',e.innerHTML=u,function(){const e=document.getElementById("oca-roll");e&&e.addEventListener("click",async()=>{if(n.isRolling)return;a||(a=new(window.AudioContext||window.webkitAudioContext)),n.isRolling=!0,e.disabled=!0;const t=Math.floor(6*Math.random())+1;await async function(e){const t=document.getElementById("oca-dice");if(t){t.classList.add("oca-dice--rolling"),i("roll");for(let e=0;e<10;e++)await d(100),t.dataset.face=Math.floor(6*Math.random())+1;t.dataset.face=e,t.classList.remove("oca-dice--rolling")}}(t);const o=document.getElementById("oca-status");o&&(o.innerHTML=`üé≤ Has sacado un <strong>${t}</strong>`),await d(500),await r(t),n.isRolling=!1,e.disabled=!1}),document.querySelectorAll(".oca-tile").forEach(e=>{e.addEventListener("click",()=>{const t=parseInt(e.dataset.index),a=n.artworks[t];a&&l(a)})})}()}(e),c(0)}catch(s){e.innerHTML='<p class="oca-error">Error cargando el tablero</p>'}}async function r(t){const a=Math.min(n.artworks.length,52);let s=n.currentPosition+t;for(let e=n.currentPosition+1;e<=Math.min(s,a);e++){await d(300),c(e),i("step"),n.visitedTiles.add(e-1),n.totalMoves++;const t=document.querySelector(`[data-index="${e-1}"]`);t&&t.classList.add("oca-tile--visited")}n.currentPosition=Math.min(s,a),await async function(t){const a=o(t),s=document.getElementById("oca-status");if(a)switch(a){case"oca":const a=e.OCA.find(e=>e>t);a&&(s.innerHTML=`ü¶Ü ¬°De oca a oca! Saltando a casilla ${a}...`,await d(1e3),await r(a-t));break;case"puente":s.innerHTML="üåÄ ¬°Puente! +3 casillas",await d(1e3),await r(3);break;case"calavera":s.innerHTML="üíÄ ¬°Calavera! -2 casillas",await d(1e3),n.currentPosition=Math.max(0,n.currentPosition-2),c(n.currentPosition);break;case"featured":const o=n.artworks[t-1];o&&(s.innerHTML=`‚≠ê Obra Destacada: ${o.title}`,i("special"),l(o))}}(n.currentPosition),n.currentPosition>=a&&function(){const e=document.getElementById("oca-status");e&&(e.innerHTML=`üèÜ ¬°VICTORIA! Has descubierto las ${n.visitedTiles.size} obras en ${n.totalMoves} movimientos.`),i("victory");const t=document.getElementById("oca-board");t&&(t.classList.add("oca-board--victory"),function(e){const t=["#ffd700","#ff6b6b","#4ecdc4","#a855f7","#22c55e","#3b82f6"];for(let n=0;n<100;n++){const n=document.createElement("div");n.className="oca-confetti",n.style.cssText=`\n        position: absolute;\n        width: ${6+6*Math.random()}px;\n        height: ${6+6*Math.random()}px;\n        background: ${t[Math.floor(Math.random()*t.length)]};\n        left: ${100*Math.random()}%;\n        top: -10px;\n        border-radius: ${Math.random()>.5?"50%":"0"};\n        animation: confetti-fall ${2+2*Math.random()}s ease-out forwards;\n        animation-delay: ${.5*Math.random()}s;\n        z-index: 1000;\n      `,e.appendChild(n),setTimeout(()=>n.remove(),4500)}}(t));const a=document.getElementById("oca-roll");if(a&&(a.disabled=!0,a.textContent="üéâ ¬°Victoria!"),window.RankingSystem){const e=Math.max(0,1e3-10*n.totalMoves);window.RankingSystem.showSubmitModal("oca",e,()=>{window.RankingSystem.renderLeaderboard("oca","oca-ranking")})}}()}function c(e){const t=document.getElementById("oca-player"),n=document.getElementById("oca-position");if(0===e)t&&(t.style.left="90%",t.style.top="90%");else{const n=document.querySelector(`[data-index="${e-1}"]`);if(n&&t){const e=n.getBoundingClientRect(),a=document.getElementById("oca-board").getBoundingClientRect();t.style.left=(e.left-a.left)/a.width*100+2+"%",t.style.top=(e.top-a.top)/a.height*100+2+"%"}}n&&(n.textContent=e)}function l(e){if(window.Lightbox&&"function"==typeof window.Lightbox.open)window.Lightbox.open(`images/artworks/${e.id}.webp`,e.title);else{const t=document.getElementById("lightbox"),n=document.getElementById("lightbox-img"),a=document.getElementById("lightbox-caption");t&&n&&(n.src=`images/artworks/${e.id}.webp`,n.alt=e.title,a&&(a.textContent=`${e.title} (${e.year}) - Serie: ${e.series}`),t.hidden=!1)}}function d(e){return new Promise(t=>setTimeout(t,e))}window.OcaGame={init:s,reset:function(){n.currentPosition=0,n.visitedTiles.clear(),n.isRolling=!1,n.totalMoves=0,s()}},document.addEventListener("DOMContentLoaded",()=>{"#/juego"===window.location.hash&&s()})}(),function(){const e=10,t=20,n=30,a=1e3,i=50,o=10,s=[0,100,300,500,800],r={I:{shape:[[1,1,1,1]],color:"#00f5ff"},O:{shape:[[1,1],[1,1]],color:"#ffd700"},T:{shape:[[0,1,0],[1,1,1]],color:"#a855f7"},S:{shape:[[0,1,1],[1,1,0]],color:"#22c55e"},Z:{shape:[[1,1,0],[0,1,1]],color:"#ef4444"},J:{shape:[[1,0,0],[1,1,1]],color:"#3b82f6"},L:{shape:[[0,0,1],[1,1,1]],color:"#f97316"}};let c={board:[],currentPiece:null,currentX:0,currentY:0,score:0,highScore:parseInt(localStorage.getItem("tetris-highscore")||"0"),level:1,lines:0,gameOver:!1,isPaused:!1,artworks:[],artworkIndex:0,dropTimer:null,ctx:null,nextPiece:null,holdPiece:null,canHold:!0,combo:0};function l(){c.board=[];for(let n=0;n<t;n++)c.board.push(new Array(e).fill(0));c.score=0,c.level=1,c.lines=0,c.combo=0,c.gameOver=!1,c.isPaused=!1,c.artworkIndex=0,c.canHold=!0,c.holdPiece=null,B()}const d=new(window.AudioContext||window.webkitAudioContext);function u(e){const t=d.createOscillator(),n=d.createGain();switch(t.connect(n),n.connect(d.destination),n.gain.value=.1,e){case"move":t.frequency.value=200,n.gain.exponentialRampToValueAtTime(.001,d.currentTime+.05);break;case"rotate":t.frequency.value=400,n.gain.exponentialRampToValueAtTime(.001,d.currentTime+.08);break;case"drop":t.frequency.value=100,n.gain.exponentialRampToValueAtTime(.001,d.currentTime+.15);break;case"clear":t.type="sine",t.frequency.value=600,n.gain.exponentialRampToValueAtTime(.001,d.currentTime+.3);break;case"tetris":t.type="square",t.frequency.value=800,n.gain.exponentialRampToValueAtTime(.001,d.currentTime+.5);break;case"gameover":t.type="sawtooth",t.frequency.value=150,n.gain.exponentialRampToValueAtTime(.001,d.currentTime+.8);break;case"levelup":t.type="sine",t.frequency.setValueAtTime(400,d.currentTime),t.frequency.linearRampToValueAtTime(800,d.currentTime+.2),n.gain.exponentialRampToValueAtTime(.001,d.currentTime+.3)}t.start(),t.stop(d.currentTime+.5)}function m(){l(),v(),c.nextPiece=p(),z(),c.dropTimer&&clearInterval(c.dropTimer),c.dropTimer=setInterval(h,g()),document.getElementById("tetris-start").disabled=!0,document.getElementById("tetris-pause").disabled=!1,document.getElementById("tetris-overlay").hidden=!0}function h(){c.gameOver||c.isPaused||(f()||(M(),A(),v(),y(c.currentPiece,c.currentX,c.currentY)||I()),R())}function g(){return Math.max(100,a-(c.level-1)*i)}function p(){const e=Object.keys(r),t=e[Math.floor(Math.random()*e.length)],n=r[t],a=c.artworks[c.artworkIndex%c.artworks.length];return c.artworkIndex++,{type:t,shape:n.shape.map(e=>[...e]),color:n.color,artwork:a}}function v(){c.currentPiece=c.nextPiece||p(),c.nextPiece=p(),c.currentX=Math.floor((e-c.currentPiece.shape[0].length)/2),c.currentY=0,z()}function y(n,a,i){for(let o=0;o<n.shape.length;o++)for(let s=0;s<n.shape[o].length;s++)if(n.shape[o][s]){const n=a+s,r=i+o;if(n<0||n>=e||r>=t)return!1;if(r>=0&&c.board[r][n])return!1}return!0}function f(){return!!y(c.currentPiece,c.currentX,c.currentY+1)&&(c.currentY++,!0)}function w(){y(c.currentPiece,c.currentX-1,c.currentY)&&(c.currentX--,u("move"),R())}function b(){y(c.currentPiece,c.currentX+1,c.currentY)&&(c.currentX++,u("move"),R())}function k(){const e={...c.currentPiece,shape:c.currentPiece.shape[0].map((e,t)=>c.currentPiece.shape.map(e=>e[t]).reverse())},t=[0,-1,1,-2,2];for(const n of t)if(y(e,c.currentX+n,c.currentY))return c.currentPiece=e,c.currentX+=n,u("rotate"),void R()}function x(){let e=c.currentY;for(;y(c.currentPiece,c.currentX,e+1);)e++;return e}function E(){const e=x()-c.currentY;c.score+=2*e,c.currentY=x(),u("drop"),M(),A(),v(),y(c.currentPiece,c.currentX,c.currentY)||I(),R(),B()}function M(){for(let e=0;e<c.currentPiece.shape.length;e++)for(let t=0;t<c.currentPiece.shape[e].length;t++)if(c.currentPiece.shape[e][t]){const n=c.currentY+e,a=c.currentX+t;n>=0&&(c.board[n][a]={color:c.currentPiece.color,artwork:c.currentPiece.artwork})}}function A(){let n=0;for(let a=t-1;a>=0;a--)c.board[a].every(e=>0!==e)&&(c.board.splice(a,1),c.board.unshift(new Array(e).fill(0)),n++,a++);if(n>0){c.combo++;const e=c.combo>1?50*c.combo:0;c.lines+=n,c.score+=(s[n]+e)*c.level,4===n?(u("tetris"),L("T E T R I S !")):(u("clear"),n>=2&&L(2===n?"D O B L E":"T R I P L E"));const t=Math.floor(c.lines/o)+1;t>c.level&&(c.level=t,u("levelup"),clearInterval(c.dropTimer),c.dropTimer=setInterval(h,g())),c.score>c.highScore&&(c.highScore=c.score,localStorage.setItem("tetris-highscore",c.highScore.toString())),B()}else c.combo=0,B()}function L(e){const t=document.getElementById("tetris-canvas");if(!t)return;const n=document.createElement("div");n.className="tetris-effect",n.textContent=e,n.style.cssText="\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      font-size: 2rem;\n      font-weight: bold;\n      color: #ffd700;\n      text-shadow: 0 0 20px #ffd700, 0 0 40px #ffd700;\n      pointer-events: none;\n      animation: tetris-clear-text 1s ease-out forwards;\n      z-index: 100;\n    ",t.parentElement.appendChild(n),setTimeout(()=>n.remove(),1e3)}function I(){c.gameOver=!0,clearInterval(c.dropTimer),u("gameover"),document.getElementById("tetris-start").disabled=!1,document.getElementById("tetris-pause").disabled=!0,c.score>c.highScore?(localStorage.setItem("tetris-highscore",c.highScore.toString()),window.RankingSystem&&window.RankingSystem.showSubmitModal("tetris",c.score,()=>{window.RankingSystem.renderLeaderboard("tetris","tetris-ranking")}),T("¬°N U E V O  R √â C O R D!",`Puntuaci√≥n: ${c.score}`,"Jugar de nuevo")):(window.RankingSystem&&window.RankingSystem.showSubmitModal("tetris",c.score,()=>{window.RankingSystem.renderLeaderboard("tetris","tetris-ranking")}),T("G A M E  O V E R",`Puntuaci√≥n: ${c.score}`,"Jugar de nuevo"))}function S(){c.isPaused=!c.isPaused,c.isPaused?T("P A U S A","Pulsa ESPACIO para continuar","Continuar"):document.getElementById("tetris-overlay").hidden=!0}function T(e,t,n){document.getElementById("overlay-title").textContent=e,document.getElementById("overlay-text").textContent=t,document.getElementById("overlay-btn").textContent=n,document.getElementById("tetris-overlay").hidden=!1}function R(){const a=c.ctx,i=n;a.fillStyle="#0a0a0a",a.fillRect(0,0,e*i,t*i),a.strokeStyle="#1a1a1a",a.lineWidth=1;for(let n=0;n<=e;n++)a.beginPath(),a.moveTo(n*i,0),a.lineTo(n*i,t*i),a.stroke();for(let n=0;n<=t;n++)a.beginPath(),a.moveTo(0,n*i),a.lineTo(e*i,n*i),a.stroke();for(let n=0;n<t;n++)for(let t=0;t<e;t++)c.board[n][t]&&q(a,t,n,c.board[n][t]);if(c.currentPiece&&!c.gameOver&&!c.isPaused){const e=x();if(e!==c.currentY)for(let t=0;t<c.currentPiece.shape.length;t++)for(let n=0;n<c.currentPiece.shape[t].length;n++)c.currentPiece.shape[t][n]&&C(a,c.currentX+n,e+t,c.currentPiece.color)}if(c.currentPiece&&!c.gameOver)for(let e=0;e<c.currentPiece.shape.length;e++)for(let t=0;t<c.currentPiece.shape[e].length;t++)c.currentPiece.shape[e][t]&&q(a,c.currentX+t,c.currentY+e,{color:c.currentPiece.color,artwork:c.currentPiece.artwork})}function C(e,t,a,i){const o=n,s=t*o,r=a*o;e.strokeStyle=i+"60",e.lineWidth=2,e.setLineDash([4,4]),e.strokeRect(s+2,r+2,o-4,o-4),e.setLineDash([])}function q(e,t,a,i){const o=n,s=t*o,r=a*o;i.artwork&&i.artwork.img?(e.drawImage(i.artwork.img,s+1,r+1,o-2,o-2),e.fillStyle=i.color+"40",e.fillRect(s+1,r+1,o-2,o-2)):(e.fillStyle=i.color,e.fillRect(s+1,r+1,o-2,o-2)),e.strokeStyle="#ffffff30",e.lineWidth=2,e.strokeRect(s+1,r+1,o-2,o-2)}function z(){const e=document.getElementById("tetris-next");if(!e||!c.nextPiece)return;const t=e.getContext("2d"),n=25;t.fillStyle="#0a0a0a",t.fillRect(0,0,e.width,e.height);const a=(e.width-c.nextPiece.shape[0].length*n)/2,i=(e.height-c.nextPiece.shape.length*n)/2;for(let o=0;o<c.nextPiece.shape.length;o++)for(let e=0;e<c.nextPiece.shape[o].length;e++)if(c.nextPiece.shape[o][e]){const s=a+e*n,r=i+o*n;t.fillStyle=c.nextPiece.color,t.fillRect(s+1,r+1,23,23),t.strokeStyle="#ffffff30",t.lineWidth=1,t.strokeRect(s+1,r+1,23,23)}}function B(){const e=document.getElementById("tetris-score"),t=document.getElementById("tetris-level"),n=document.getElementById("tetris-lines"),a=document.getElementById("tetris-combo"),i=document.getElementById("tetris-highscore");e&&(e.textContent=c.score),t&&(t.textContent=c.level),n&&(n.textContent=c.lines),a&&(a.textContent=`x${c.combo}`,a.style.color=c.combo>1?"#ffd700":""),i&&(i.textContent=c.highScore)}window.TetrisGame={init:async function(){const a=document.getElementById("tetris-container");if(!a)return;await async function(){try{const e=await fetch("data/artworks-metadata.json"),t=await e.json();for(const n of t.artworks){const e=new Image;if(e.src=`images/artworks/${n.id}.webp`,await new Promise(t=>{e.onload=()=>{c.artworks.push({id:n.id,title:n.title,img:e}),t()},e.onerror=t}),c.artworks.length>=7)break}}catch(e){}}(),a.innerHTML=`\n      <div class="tetris-wrapper">\n        <div class="tetris-main">\n          <canvas id="tetris-canvas" width="${e*n}" height="${t*n}"></canvas>\n          <div class="tetris-overlay" id="tetris-overlay" hidden>\n            <div class="tetris-overlay__content">\n              <h3 id="overlay-title">PAUSA</h3>\n              <p id="overlay-text">Pulsa ESPACIO para continuar</p>\n              <button class="tetris-btn" id="overlay-btn">Continuar</button>\n            </div>\n          </div>\n        </div>\n        <div class="tetris-sidebar">\n          <div class="tetris-next">\n            <h4>Siguiente</h4>\n            <canvas id="tetris-next" width="120" height="80"></canvas>\n          </div>\n          <div class="tetris-stats">\n            <div class="tetris-stat">\n              <span class="tetris-stat__label">Puntos</span>\n              <span class="tetris-stat__value" id="tetris-score">0</span>\n            </div>\n            <div class="tetris-stat">\n              <span class="tetris-stat__label">Nivel</span>\n              <span class="tetris-stat__value" id="tetris-level">1</span>\n            </div>\n            <div class="tetris-stat">\n              <span class="tetris-stat__label">L√≠neas</span>\n              <span class="tetris-stat__value" id="tetris-lines">0</span>\n            </div>\n            <div class="tetris-stat tetris-stat--combo">\n              <span class="tetris-stat__label">Combo</span>\n              <span class="tetris-stat__value" id="tetris-combo">x0</span>\n            </div>\n            <div class="tetris-stat tetris-stat--highscore">\n              <span class="tetris-stat__label">R√©cord</span>\n              <span class="tetris-stat__value" id="tetris-highscore">${c.highScore}</span>\n            </div>\n            <div id="tetris-ranking" style="margin-top: 20px;"></div>\n          </div>\n          <div class="tetris-controls">\n            <button class="tetris-btn tetris-btn--start" id="tetris-start">‚ñ∂ Jugar</button>\n            <button class="tetris-btn" id="tetris-pause" disabled>‚è∏ Pausa</button>\n          </div>\n          <div class="tetris-help">\n            <p>‚Üê ‚Üí Mover</p>\n            <p>‚Üë Rotar</p>\n            <p>‚Üì Bajar</p>\n            <p>ESPACIO Caer</p>\n          </div>\n        </div>\n      </div>\n    `;const i=document.getElementById("tetris-canvas");c.ctx=i.getContext("2d"),l(),R(),function(){var e,t,n;document.addEventListener("keydown",e=>{if(!c.gameOver)switch(e.key){case"ArrowLeft":e.preventDefault(),c.isPaused||w();break;case"ArrowRight":e.preventDefault(),c.isPaused||b();break;case"ArrowDown":e.preventDefault(),c.isPaused||(f(),R());break;case"ArrowUp":e.preventDefault(),c.isPaused||k();break;case" ":e.preventDefault(),c.dropTimer&&!c.gameOver&&(c.isPaused?S():E());break;case"Escape":case"p":case"P":c.dropTimer&&!c.gameOver&&S()}}),null==(e=document.getElementById("tetris-start"))||e.addEventListener("click",m),null==(t=document.getElementById("tetris-pause"))||t.addEventListener("click",S),null==(n=document.getElementById("overlay-btn"))||n.addEventListener("click",()=>{c.gameOver?m():S()});let a=0,i=0;const o=document.getElementById("tetris-canvas");o&&(o.addEventListener("touchstart",e=>{a=e.touches[0].clientX,i=e.touches[0].clientY}),o.addEventListener("touchend",e=>{if(c.isPaused||c.gameOver)return;const t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY,o=t-a,s=n-i;Math.abs(o)>Math.abs(s)?o>30?b():o<-30&&w():s>30?E():s<-30&&k()}),o.addEventListener("click",()=>{c.isPaused||c.gameOver||k()}))}()},start:m,pause:S,reset:()=>{c.dropTimer&&clearInterval(c.dropTimer),l(),R()}}}(),function(){const e=8,t=600;let n={cards:[],flipped:[],matched:0,moves:0,artworks:[],locked:!1};function a(i){n.cards=[],n.flipped=[],n.matched=0,n.moves=0,n.locked=!1;const o=[...n.artworks,...n.artworks].map((e,t)=>({...e,uid:t})).sort(()=>Math.random()-.5);i.innerHTML=`\n      <div class="memory-stats">\n        <span>Movimientos: <strong id="memory-moves">0</strong></span>\n        <span>Parejas: <strong id="memory-matched">0</strong>/${e}</span>\n      </div>\n      <div class="memory-grid">\n        ${o.map((e,t)=>`\n          <div class="memory-card" data-index="${t}" data-id="${e.id}">\n            <div class="memory-card__inner">\n              <div class="memory-card__front">üé®</div>\n              <div class="memory-card__back">\n                <img src="images/artworks/${e.id}.webp" alt="${e.title}" loading="lazy">\n              </div>\n            </div>\n          </div>\n        `).join("")}\n      </div>\n      <div id="memory-ranking"></div>\n      <button class="game-btn" id="memory-restart">üîÑ Reiniciar</button>\n    `,n.cards=o,function(i){var o;i.querySelectorAll(".memory-card").forEach(a=>{a.addEventListener("click",()=>function(a){n.locked||a.classList.contains("flipped")||a.classList.contains("matched")||(a.classList.add("flipped"),n.flipped.push(a),2===n.flipped.length&&(n.moves++,document.getElementById("memory-moves").textContent=n.moves,function(){n.locked=!0;const[a,i]=n.flipped;a.dataset.id===i.dataset.id?(a.classList.add("matched"),i.classList.add("matched"),n.matched++,document.getElementById("memory-matched").textContent=n.matched,n.flipped=[],n.locked=!1,n.matched===e&&setTimeout(()=>{if(window.RankingSystem){const e=Math.max(0,1e3-10*n.moves);window.RankingSystem.showSubmitModal("memory",e,()=>{window.RankingSystem.renderLeaderboard("memory","memory-ranking")})}else alert(`üéâ ¬°Victoria en ${n.moves} movimientos!`)},300)):setTimeout(()=>{a.classList.remove("flipped"),i.classList.remove("flipped"),n.flipped=[],n.locked=!1},t)}()))}(a))}),null==(o=document.getElementById("memory-restart"))||o.addEventListener("click",()=>a(i))}(i)}window.MemoryGame={init:async function(){const t=document.getElementById("memory-container");t&&(await async function(){try{const t=await fetch("data/artworks-metadata.json"),a=await t.json();n.artworks=a.artworks.slice(0,e)}catch(t){}}(),a(t))}}}(),function(){let e={tiles:[],empty:15,moves:0,artwork:null};function t(){for(let t=0;t<200;t++){const t=n(e.empty),i=t[Math.floor(Math.random()*t.length)];a(i,e.empty),e.empty=i}}function n(e){const t=Math.floor(e/4),n=e%4,a=[];return t>0&&a.push(e-4),t<3&&a.push(e+4),n>0&&a.push(e-1),n<3&&a.push(e+1),a}function a(t,n){[e.tiles[t],e.tiles[n]]=[e.tiles[n],e.tiles[t]]}function i(t){const o=document.getElementById("puzzle-grid");o&&(o.innerHTML=e.tiles.map((e,n)=>{if(15===e)return`<div class="puzzle-tile puzzle-tile--empty" data-pos="${n}"></div>`;const a=Math.floor(e/4);return`\n        <div class="puzzle-tile" data-pos="${n}" data-tile="${e}">\n          <div style="background-image: url(${t}); background-position: ${-e%4*75}px ${75*-a}px;"></div>\n        </div>\n      `}).join(""),o.querySelectorAll(".puzzle-tile:not(.puzzle-tile--empty)").forEach(t=>{t.addEventListener("click",()=>{var o,s;n(o=parseInt(t.dataset.pos)).includes(e.empty)&&(a(o,e.empty),e.empty=o,e.moves++,document.getElementById("puzzle-moves").textContent=e.moves,i(`images/artworks/${(null==(s=e.artwork)?void 0:s.id)||"default"}.webp`),e.tiles.every((e,t)=>e===t)&&setTimeout(()=>{if(window.RankingSystem){const t=Math.max(0,1e3-e.moves);window.RankingSystem.showSubmitModal("puzzle",t,()=>{window.RankingSystem.renderLeaderboard("puzzle","puzzle-ranking")})}else alert(`üéâ ¬°Puzzle resuelto en ${e.moves} movimientos!`)},300))})}))}window.PuzzleGame={init:async function(){const n=document.getElementById("puzzle-container");n&&(await async function(){try{const t=await fetch("data/artworks-metadata.json"),n=(await t.json()).artworks.filter(e=>e.id);e.artwork=n[Math.floor(Math.random()*n.length)]}catch(t){}}(),function(n){var a,o,s,r;e.tiles=[...Array(16).keys()],e.empty=15,e.moves=0,t();const c=`images/artworks/${(null==(a=e.artwork)?void 0:a.id)||"default"}.webp`;n.innerHTML=`\n      <div class="puzzle-info">\n        <span>Movimientos: <strong id="puzzle-moves">0</strong></span>\n        <span>${(null==(o=e.artwork)?void 0:o.title)||"Puzzle"}</span>\n      </div>\n      <div class="puzzle-grid" id="puzzle-grid"></div>\n      <div id="puzzle-ranking"></div>\n      <div class="puzzle-controls">\n        <button class="game-btn" id="puzzle-shuffle">üîÄ Mezclar</button>\n        <button class="game-btn" id="puzzle-hint">üëÅ Ver imagen</button>\n      </div>\n    `,i(c),null==(s=document.getElementById("puzzle-shuffle"))||s.addEventListener("click",()=>{t(),e.moves=0,document.getElementById("puzzle-moves").textContent=0,i(c)}),null==(r=document.getElementById("puzzle-hint"))||r.addEventListener("click",()=>{const e=document.getElementById("puzzle-grid");e.style.backgroundImage=`url(${c})`,setTimeout(()=>e.style.backgroundImage="",1500)})}(n))}}}(),function(){const e=20,t=20;let n={snake:[],dir:{x:1,y:0},food:null,score:0,timer:null,artworks:[]};function a(){n.snake=[{x:10,y:10}],n.dir={x:1,y:0},n.score=0,i(),n.timer&&clearInterval(n.timer),n.timer=setInterval(s,150),document.getElementById("snake-score").textContent=0}function i(){n.food={x:Math.floor(Math.random()*e),y:Math.floor(Math.random()*e),art:n.artworks[Math.floor(Math.random()*n.artworks.length)]}}function o(e){const t={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};!t[e.key]||t[e.key].x===-n.dir.x&&t[e.key].y===-n.dir.y||(n.dir=t[e.key])}function s(){const a={x:n.snake[0].x+n.dir.x,y:n.snake[0].y+n.dir.y};if(a.x<0||a.x>=e||a.y<0||a.y>=e||n.snake.some(e=>e.x===a.x&&e.y===a.y))return clearInterval(n.timer),void(window.RankingSystem?window.RankingSystem.showSubmitModal("snake",n.score,()=>{document.getElementById("snake-start").textContent="üîÑ Jugar de nuevo",window.RankingSystem.renderLeaderboard("snake","snake-ranking")}):alert(`Game Over - Puntos: ${n.score}`));n.snake.unshift(a),a.x===n.food.x&&a.y===n.food.y?(n.score+=10,document.getElementById("snake-score").textContent=n.score,i()):n.snake.pop(),function(){const e=document.getElementById("snake-canvas");if(!e)return;const a=e.getContext("2d");a.fillStyle="#0a0a0a",a.fillRect(0,0,400,400),n.snake.forEach((e,n)=>{a.fillStyle=0===n?"#22c55e":"#4ade80",a.fillRect(e.x*t+1,e.y*t+1,18,18)}),n.food&&(a.fillStyle="#ffd700",a.beginPath(),a.arc(n.food.x*t+10,n.food.y*t+10,8,0,2*Math.PI),a.fill(),a.fillStyle="#fff",a.font="10px sans-serif",a.fillText("üé®",n.food.x*t+3,n.food.y*t+14))}()}window.SnakeGame={init:async function(){var e;const t=document.getElementById("snake-container");if(t){try{const e=await fetch("data/artworks-metadata.json"),t=await e.json();n.artworks=t.artworks.slice(0,20)}catch(i){}t.innerHTML='\n      <div class="snake-header">\n        <span>Puntos: <strong id="snake-score">0</strong></span>\n        <button class="game-btn" id="snake-start">‚ñ∂ Jugar</button>\n      </div>\n      <canvas id="snake-canvas" width="400" height="400"></canvas>\n      <div id="snake-ranking"></div>\n    ',window.RankingSystem&&window.RankingSystem.renderLeaderboard("snake","snake-ranking"),null==(e=document.getElementById("snake-start"))||e.addEventListener("click",a),document.addEventListener("keydown",o)}}}}(),function(){const e=400,t=500;let n={ball:null,paddle:null,bricks:[],score:0,timer:null,artworks:[]};function a(){n.ball={x:200,y:450,dx:3,dy:-3,r:8},n.paddle={x:160,y:480,w:80,h:12},n.bricks=[],n.score=0;for(let e=0;e<4;e++)for(let t=0;t<8;t++)n.bricks.push({x:48*t+8,y:30*e+40,w:44,h:26,alive:!0,art:n.artworks[(8*e+t)%n.artworks.length]});n.timer&&clearInterval(n.timer),n.timer=setInterval(i,16),document.getElementById("breakout-score").textContent=0}function i(){const{ball:a,paddle:i,bricks:o}=n;if(a.x+=a.dx,a.y+=a.dy,(a.x<=a.r||a.x>=e-a.r)&&(a.dx*=-1),a.y<=a.r&&(a.dy*=-1),a.y+a.r>=i.y&&a.x>=i.x&&a.x<=i.x+i.w&&(a.dy=-Math.abs(a.dy),a.dx+=.1*(a.x-i.x-i.w/2)),a.y>t)return clearInterval(n.timer),void(window.RankingSystem?window.RankingSystem.showSubmitModal("breakout",n.score,()=>{window.RankingSystem.renderLeaderboard("breakout","breakout-ranking")}):alert(`Game Over - Puntos: ${n.score}`));if(o.forEach(e=>{e.alive&&a.x>=e.x&&a.x<=e.x+e.w&&a.y>=e.y&&a.y<=e.y+e.h&&(e.alive=!1,a.dy*=-1,n.score+=10,document.getElementById("breakout-score").textContent=n.score)}),o.every(e=>!e.alive)){clearInterval(n.timer);const e=n.score+1e3;window.RankingSystem?window.RankingSystem.showSubmitModal("breakout",e,()=>{window.RankingSystem.renderLeaderboard("breakout","breakout-ranking")}):alert(`üéâ ¬°Victoria! Puntos: ${e}`)}!function(){const a=document.getElementById("breakout-canvas");if(!a)return;const i=a.getContext("2d");i.fillStyle="#0a0a0a",i.fillRect(0,0,e,t),n.bricks.forEach(e=>{e.alive&&(i.fillStyle="#a855f7",i.fillRect(e.x,e.y,e.w,e.h),i.strokeStyle="#fff3",i.strokeRect(e.x,e.y,e.w,e.h))}),i.fillStyle="#3b82f6",i.fillRect(n.paddle.x,n.paddle.y,n.paddle.w,n.paddle.h),i.fillStyle="#ffd700",i.beginPath(),i.arc(n.ball.x,n.ball.y,n.ball.r,0,2*Math.PI),i.fill()}()}window.BreakoutGame={init:async function(){var e;const t=document.getElementById("breakout-container");if(t){try{const e=await fetch("data/artworks-metadata.json"),t=await e.json();n.artworks=t.artworks.slice(0,24)}catch(i){}t.innerHTML='\n      <div class="breakout-header">\n        <span>Puntos: <strong id="breakout-score">0</strong></span>\n        <button class="game-btn" id="breakout-start">‚ñ∂ Jugar</button>\n      </div>\n      <canvas id="breakout-canvas" width="400" height="500"></canvas>\n      <div id="breakout-ranking"></div>\n    ',window.RankingSystem&&window.RankingSystem.renderLeaderboard("breakout","breakout-ranking"),null==(e=document.getElementById("breakout-start"))||e.addEventListener("click",a),document.addEventListener("mousemove",e=>{const t=document.getElementById("breakout-canvas");if(t&&n.paddle){const a=t.getBoundingClientRect();n.paddle.x=Math.max(0,Math.min(320,e.clientX-a.left-40))}})}}}}(),function(){let e={score:0,timer:null,timeLeft:30,artworks:[],holes:[]};function t(){e.score=0,e.timeLeft=30,e.holes=Array(9).fill(null),document.getElementById("whack-score").textContent=0,document.getElementById("whack-time").textContent=30,e.timer&&clearInterval(e.timer),e.timer=setInterval(n,1e3),a()}function n(){e.timeLeft--,document.getElementById("whack-time").textContent=e.timeLeft,e.timeLeft<=0?(clearInterval(e.timer),window.RankingSystem?window.RankingSystem.showSubmitModal("whack",e.score,()=>{window.RankingSystem.renderLeaderboard("whack","whack-ranking")}):alert(`‚è∞ Tiempo! Puntos: ${e.score}`)):Math.random()>.5&&a()}function a(){const t=e.holes.map((e,t)=>null===e?t:-1).filter(e=>e>=0);if(0===t.length)return;const n=t[Math.floor(Math.random()*t.length)],a=e.artworks[Math.floor(Math.random()*e.artworks.length)];e.holes[n]=a;const o=document.querySelector(`[data-hole="${n}"] .whack-mole`);o&&(o.style.backgroundImage=`url(images/artworks/${a.id}.webp)`,o.classList.add("active")),setTimeout(()=>i(n),1500+1e3*Math.random())}function i(t){e.holes[t]=null;const n=document.querySelector(`[data-hole="${t}"] .whack-mole`);n&&n.classList.remove("active")}window.WhackGame={init:async function(){var n;const o=document.getElementById("whack-container");if(o){try{const t=await fetch("data/artworks-metadata.json"),n=await t.json();e.artworks=n.artworks.slice(0,20)}catch(s){}o.innerHTML=`\n      <div class="whack-header">\n        <span>Puntos: <strong id="whack-score">0</strong></span>\n        <span>Tiempo: <strong id="whack-time">30</strong>s</span>\n        <button class="game-btn" id="whack-start">‚ñ∂ Jugar</button>\n      </div>\n      <div class="whack-grid" id="whack-grid">\n        ${[...Array(9)].map((e,t)=>`\n          <div class="whack-hole" data-hole="${t}">\n            <div class="whack-mole"></div>\n          </div>\n        `).join("")}\n      </div>\n      <div id="whack-ranking"></div>\n    `,window.RankingSystem&&window.RankingSystem.renderLeaderboard("whack","whack-ranking"),null==(n=document.getElementById("whack-start"))||n.addEventListener("click",t),document.querySelectorAll(".whack-hole").forEach(t=>{t.addEventListener("click",()=>function(t){e.holes[t]&&(e.score+=10,document.getElementById("whack-score").textContent=e.score,i(t),a())}(parseInt(t.dataset.hole)))})}}}}(),function(){let e={sequence:[],playerSeq:[],level:1,artworks:[],playing:!1};function t(){e.sequence=[],e.level=1,e.playing=!0,document.getElementById("simon-level").textContent=1,n()}function n(){e.playerSeq=[],e.sequence.push(Math.floor(4*Math.random())),document.getElementById("simon-status").textContent="Observa...",setTimeout(()=>async function(){for(const t of e.sequence)await a(t),await i(300);document.getElementById("simon-status").textContent="¬°Tu turno!"}(),500)}function a(e){return new Promise(t=>{const n=document.querySelector(`[data-index="${e}"]`);null==n||n.classList.add("active"),setTimeout(()=>{null==n||n.classList.remove("active"),t()},400)})}function i(e){return new Promise(t=>setTimeout(t,e))}window.SimonGame={init:async function(){var i;const o=document.getElementById("simon-container");if(o){try{const t=await fetch("data/artworks-metadata.json"),n=await t.json();e.artworks=n.artworks.slice(0,4)}catch(s){}o.innerHTML=`\n      <div class="simon-header">\n        <span>Nivel: <strong id="simon-level">1</strong></span>\n        <button class="game-btn" id="simon-start">‚ñ∂ Jugar</button>\n      </div>\n      <div class="simon-grid" id="simon-grid">\n        ${e.artworks.map((e,t)=>`\n          <div class="simon-btn" data-index="${t}" style="background-image: url(images/artworks/${e.id}.webp)">\n            <span class="simon-overlay"></span>\n          </div>\n        `).join("")}\n      </div>\n      <p id="simon-status">Pulsa Jugar para empezar</p>\n      <div id="simon-ranking"></div>\n    `,window.RankingSystem&&window.RankingSystem.renderLeaderboard("simon","simon-ranking"),null==(i=document.getElementById("simon-start"))||i.addEventListener("click",t),document.querySelectorAll(".simon-btn").forEach(t=>{t.addEventListener("click",()=>function(t){if(!e.playing)return;a(t),e.playerSeq.push(t);const i=e.playerSeq.length-1;if(e.playerSeq[i]===e.sequence[i])e.playerSeq.length===e.sequence.length&&(e.level++,document.getElementById("simon-level").textContent=e.level,document.getElementById("simon-status").textContent="‚úÖ ¬°Correcto!",setTimeout(n,1e3));else if(document.getElementById("simon-status").innerHTML=`‚ùå Game Over - Nivel ${e.level}`,e.playing=!1,window.RankingSystem){const t=100*e.level;window.RankingSystem.showSubmitModal("simon",t,()=>{window.RankingSystem.renderLeaderboard("simon","simon-ranking")})}}(parseInt(t.dataset.index)))})}}}}(),function(){let e={questions:[],current:0,score:0,artworks:[]};function t(a){var i;e.questions=[...e.artworks].sort(()=>Math.random()-.5).slice(0,10).map(t=>{const n=Math.random()>.5?"title":"series",a=function(t,n){const a="title"===n?"title":"series",i=[...new Set(e.artworks.map(e=>e[a]))].filter(e=>e!==t[a]);return[...i.sort(()=>Math.random()-.5).slice(0,3),t[a]].sort(()=>Math.random()-.5)}(t,n);return{art:t,type:n,options:a,correct:"title"===n?t.title:t.series}}),e.current=0,e.score=0,a.innerHTML='\n      <div class="quiz-header">\n        <span>Pregunta: <strong id="quiz-num">1</strong>/10</span>\n        <span>Puntos: <strong id="quiz-score">0</strong></span>\n      </div>\n      <div class="quiz-card" id="quiz-card"></div>\n      <button class="game-btn" id="quiz-restart" style="display:none">üîÑ Reiniciar</button>\n    ',null==(i=document.getElementById("quiz-restart"))||i.addEventListener("click",()=>t(a)),n()}function n(){if(e.current>=e.questions.length)return document.getElementById("quiz-card").innerHTML=`\n      <h3>üéâ Quiz Completado</h3>\n      <p>Puntuaci√≥n: ${e.score}/100</p>\n      <div id="quiz-ranking"></div>\n    `,document.getElementById("quiz-restart").style.display="block",void(window.RankingSystem&&window.RankingSystem.showSubmitModal("quiz",e.score,()=>{window.RankingSystem.renderLeaderboard("quiz","quiz-ranking")}));const t=e.questions[e.current],a=document.getElementById("quiz-card");a.innerHTML=`\n      <img src="images/artworks/${t.art.id}.webp" alt="Quiz" class="quiz-image">\n      <p class="quiz-question">${"title"===t.type?"¬øCu√°l es el t√≠tulo?":"¬øA qu√© serie pertenece?"}</p>\n      <div class="quiz-options">\n        ${t.options.map(e=>`<button class="quiz-option">${e}</button>`).join("")}\n      </div>\n    `,a.querySelectorAll(".quiz-option").forEach(a=>{a.addEventListener("click",()=>function(t,a){const i=t===a;i&&(e.score+=10,document.getElementById("quiz-score").textContent=e.score);const o=document.getElementById("quiz-card");o.querySelectorAll(".quiz-option").forEach(e=>{e.disabled=!0,e.textContent===a?e.classList.add("correct"):e.textContent!==t||i||e.classList.add("wrong")}),setTimeout(()=>{e.current++,document.getElementById("quiz-num").textContent=Math.min(e.current+1,10),n()},1500)}(a.textContent,t.correct))})}window.QuizGame={init:async function(){const n=document.getElementById("quiz-container");if(n){try{const t=await fetch("data/artworks-metadata.json"),n=await t.json();e.artworks=n.artworks.filter(e=>e.title&&e.series)}catch(a){}t(n)}}}}(),function(){const e=400,t=500;let n={basket:null,items:[],score:0,misses:0,timer:null,artworks:[]};function a(){n.basket={x:170,y:460,w:60,h:30},n.items=[],n.score=0,n.misses=0,document.getElementById("catch-score").textContent=0,document.getElementById("catch-misses").textContent=0,n.timer&&clearInterval(n.timer),n.timer=setInterval(o,30),i()}function i(){n.misses>=5||(n.items.push({x:360*Math.random()+20,y:-30,speed:2+2*Math.random(),art:n.artworks[Math.floor(Math.random()*n.artworks.length)]}),setTimeout(i,1e3+1e3*Math.random()))}function o(){n.items.forEach(e=>{e.y+=e.speed,e.y+20>=n.basket.y&&e.x>=n.basket.x&&e.x<=n.basket.x+n.basket.w&&(n.score+=10,document.getElementById("catch-score").textContent=n.score,e.caught=!0),e.y>t&&!e.caught&&(n.misses++,document.getElementById("catch-misses").textContent=n.misses,e.caught=!0,n.misses>=5&&(clearInterval(n.timer),window.RankingSystem?window.RankingSystem.showSubmitModal("catch",n.score,()=>{window.RankingSystem.renderLeaderboard("catch","catch-ranking")}):alert(`Game Over - Puntos: ${n.score}`)))}),n.items=n.items.filter(e=>!e.caught),function(){const a=document.getElementById("catch-canvas");if(!a)return;const i=a.getContext("2d");i.fillStyle="#0a0a0a",i.fillRect(0,0,e,t),n.items.forEach(e=>{i.fillStyle="#a855f7",i.fillRect(e.x-15,e.y-15,30,30),i.fillStyle="#fff",i.font="16px sans-serif",i.fillText("üé®",e.x-8,e.y+5)}),i.fillStyle="#3b82f6",i.fillRect(n.basket.x,n.basket.y,n.basket.w,n.basket.h),i.fillStyle="#60a5fa",i.fillRect(n.basket.x+5,n.basket.y+5,n.basket.w-10,10)}()}window.CatchGame={init:async function(){var e;const t=document.getElementById("catch-container");if(t){try{const e=await fetch("data/artworks-metadata.json"),t=await e.json();n.artworks=t.artworks.slice(0,15)}catch(i){}t.innerHTML='\n      <div class="catch-header">\n        <span>Puntos: <strong id="catch-score">0</strong></span>\n        <span>Fallos: <strong id="catch-misses">0</strong>/5</span>\n        <button class="game-btn" id="catch-start">‚ñ∂ Jugar</button>\n      </div>\n      <canvas id="catch-canvas" width="400" height="500"></canvas>\n      <div id="catch-ranking"></div>\n    ',window.RankingSystem&&window.RankingSystem.renderLeaderboard("catch","catch-ranking"),null==(e=document.getElementById("catch-start"))||e.addEventListener("click",a),document.addEventListener("mousemove",e=>{const t=document.getElementById("catch-canvas");if(t&&n.basket){const a=t.getBoundingClientRect();n.basket.x=Math.max(0,Math.min(340,e.clientX-a.left-30))}})}}}}(),function(){const e=[{type:"paper",emoji:"üì∞",name:"Papel peri√≥dico",emotion:"nostalgia"},{type:"stamp",emoji:"üìÆ",name:"Sello postal",emotion:"viaje"},{type:"lottery",emoji:"üé∞",name:"N√∫mero de loter√≠a",emotion:"azar"},{type:"wire",emoji:"üîó",name:"Alambre",emotion:"conexi√≥n"},{type:"petal",emoji:"üå∏",name:"P√©talo seco",emotion:"fragilidad"},{type:"leaf",emoji:"üçÇ",name:"Hoja seca",emotion:"tiempo"},{type:"thread",emoji:"üßµ",name:"Hilo rojo",emotion:"destino"},{type:"photo",emoji:"üì∑",name:"Fotograf√≠a",emotion:"memoria"}],t={nostalgia:["En p√°ginas amarillas","vive el eco del ayer"],viaje:["Cada sello es un puente","entre mundos que so√±√©"],azar:["Los n√∫meros danzan","en la ruleta del ser"],"conexi√≥n":["Alambres invisibles","tejen el entender"],fragilidad:["P√©talos que caen","belleza al atardecer"],tiempo:["Hojas que susurran","historias por nacer"],destino:["Un hilo rojo me gu√≠a","hacia donde debo ser"],memoria:["En cada foto un fantasma","que no quiero perder"]};let n={canvas:[],palette:[],artworks:[],selectedElement:null,emotions:{}};function a(t){n.canvas=[],n.emotions={};const s=n.artworks[Math.floor(Math.random()*n.artworks.length)];t.innerHTML=`\n      <div class="collage-workspace">\n        <div class="collage-base">\n          <div class="collage-portrait" id="collage-portrait">\n            <img src="images/artworks/${(null==s?void 0:s.id)||"default"}.webp" alt="Base" class="collage-base-img">\n            <div class="collage-layers" id="collage-layers"></div>\n          </div>\n        </div>\n        \n        <div class="collage-palette" id="collage-palette">\n          <h4>Materiales Alqu√≠micos</h4>\n          <div class="collage-elements">\n            ${e.map(e=>`\n              <div class="collage-element" data-type="${e.type}" data-emotion="${e.emotion}" draggable="true">\n                <span class="collage-element__icon">${e.emoji}</span>\n                <span class="collage-element__name">${e.name}</span>\n              </div>\n            `).join("")}\n          </div>\n        </div>\n      </div>\n      \n      <div class="collage-poem" id="collage-poem"></div>\n      \n      <div class="collage-controls">\n        <button class="game-btn" id="collage-clear">üóëÔ∏è Limpiar</button>\n        <button class="game-btn" id="collage-reveal">‚ú® Revelar poema</button>\n        <button class="game-btn" id="collage-new">üîÑ Nueva base</button>\n      </div>\n    `,function(e){var t,s,r;const c=document.getElementById("collage-portrait"),l=document.getElementById("collage-layers");e.querySelectorAll(".collage-element").forEach(t=>{const a=a=>{n.selectedElement={type:t.dataset.type,emotion:t.dataset.emotion,emoji:t.querySelector(".collage-element__icon").textContent},e.querySelectorAll(".collage-element").forEach(e=>e.classList.remove("selected")),t.classList.add("selected"),navigator.vibrate&&navigator.vibrate(20)};t.addEventListener("click",a),t.addEventListener("touchstart",a,{passive:!0})}),c.addEventListener("dragover",e=>e.preventDefault()),c.addEventListener("drop",e=>{e.preventDefault(),n.selectedElement&&i(e.offsetX,e.offsetY)}),c.addEventListener("click",e=>{(n.selectedElement&&e.target===c||e.target.classList.contains("collage-base-img"))&&i(e.offsetX,e.offsetY)}),null==(t=document.getElementById("collage-clear"))||t.addEventListener("click",()=>{l.innerHTML="",n.canvas=[],n.emotions={},document.getElementById("collage-poem").innerHTML=""}),null==(s=document.getElementById("collage-reveal"))||s.addEventListener("click",o),null==(r=document.getElementById("collage-new"))||r.addEventListener("click",()=>{a(e)})}(t)}function i(e,t){if(!n.selectedElement)return;const a=document.getElementById("collage-layers"),i=document.createElement("div");i.className="collage-placed",i.textContent=n.selectedElement.emoji,i.style.cssText=`\n      position: absolute;\n      left: ${e-15}px;\n      top: ${t-15}px;\n      font-size: 2rem;\n      cursor: move;\n      transition: transform 0.2s;\n      animation: collage-drop 0.3s ease-out;\n    `,i.addEventListener("click",e=>{e.stopPropagation(),i.remove()}),a.appendChild(i),n.canvas.push({...n.selectedElement,x:e,y:t}),n.emotions[n.selectedElement.emotion]=(n.emotions[n.selectedElement.emotion]||0)+1,i.animate([{transform:"scale(1.5)",opacity:.5},{transform:"scale(1)",opacity:1}],{duration:300})}function o(){const e=document.getElementById("collage-poem");if(0===n.canvas.length)return void(e.innerHTML='<p class="poem-empty">A√±ade elementos al collage para revelar tu poema</p>');const a=Object.entries(n.emotions).sort((e,t)=>t[1]-e[1]),i=[];a.slice(0,3).forEach(([e])=>{const n=t[e];n&&i.push(n[0],n[1])}),e.innerHTML=`\n      <div class="poem-reveal">\n        <h4>‚ú® Tu Poema Alqu√≠mico ‚ú®</h4>\n        <div class="poem-lines">\n          ${i.map(e=>`<p class="poem-line">${e}</p>`).join("")}\n        </div>\n        <p class="poem-signature">‚Äî Generado por tu Collage ‚Äî</p>\n      </div>\n    `,e.querySelectorAll(".poem-line").forEach((e,t)=>{e.style.animationDelay=.3*t+"s"})}window.CollageGame={init:async function(){const e=document.getElementById("collage-container");e&&(await async function(){try{const e=await fetch("data/artworks-metadata.json"),t=await e.json();n.artworks=t.artworks.filter(e=>e.id).slice(0,10)}catch(e){}}(),a(e))}}}(),function(){const e=[{name:"Frida Kahlo",pista:"Pintora mexicana, cejas ic√≥nicas",detalle:"Flores en el pelo"},{name:"Virginia Woolf",pista:"Escritora brit√°nica, modernismo",detalle:"Mirada penetrante"},{name:"Marie Curie",pista:"Dos premios Nobel, radiactividad",detalle:"Luz emanando"},{name:"Simone de Beauvoir",pista:"Existencialismo, feminismo",detalle:"Turbante distintivo"},{name:"Coco Chanel",pista:"Alta costura francesa",detalle:"Collar de perlas"},{name:"Billie Holiday",pista:"Jazz, voz √∫nica",detalle:"Gardenia blanca"},{name:"Rosa Parks",pista:"Derechos civiles, autob√∫s",detalle:"Dignidad en la mirada"},{name:"Amelia Earhart",pista:"Aviadora pionera",detalle:"Gorro de vuelo"}];let t={current:0,score:0,revealed:0,artworks:[],queens:[]};function n(n){t.current=0,t.score=0,t.queens=[...e].sort(()=>Math.random()-.5).slice(0,5),a(n)}function a(i){if(t.current>=t.queens.length)return void function(e){var a;const i=30*t.queens.length,o=Math.round(t.score/i*100);let s="";s=o>=80?"üëë ¬°Eres una experta en Reinas! üëë":o>=50?"üí´ Buen conocimiento hist√≥rico":"üìö ¬°Sigue aprendiendo sobre mujeres poderosas!",e.innerHTML=`\n      <div class="reinas-results">\n        <h3>üëë Rep√≥ker Completado</h3>\n        <p class="reinas-score">${t.score} puntos</p>\n        <p class="reinas-message">${s}</p>\n        <div id="reinas-ranking"></div>\n        <button class="game-btn" id="reinas-restart">üîÑ Jugar de nuevo</button>\n      </div>\n    `,null==(a=document.getElementById("reinas-restart"))||a.addEventListener("click",()=>n(e)),window.RankingSystem&&window.RankingSystem.showSubmitModal("reinas",t.score,()=>{window.RankingSystem.renderLeaderboard("reinas","reinas-ranking")})}(i);const o=t.queens[t.current],s=t.artworks[t.current%t.artworks.length];t.revealed=0;const r=[o.name];for(;r.length<4;){const t=e[Math.floor(Math.random()*e.length)].name;r.includes(t)||r.push(t)}r.sort(()=>Math.random()-.5),i.innerHTML=`\n      <div class="reinas-header">\n        <span>Pregunta ${t.current+1}/${t.queens.length}</span>\n        <span>Puntos: ${t.score}</span>\n      </div>\n      \n      <div class="reinas-card">\n        <div class="reinas-portrait" id="reinas-portrait">\n          <img src="images/artworks/${(null==s?void 0:s.id)||"default"}.webp" alt="Reina misteriosa">\n          <div class="reinas-cover" id="reinas-cover">\n            <span>?</span>\n          </div>\n        </div>\n        \n        <p class="reinas-question">¬øQui√©n es esta Reina?</p>\n        \n        <div class="reinas-hints">\n          <button class="reinas-hint" id="hint-1" data-hint="${o.pista}">üí° Pista 1</button>\n          <button class="reinas-hint" id="hint-2" data-hint="${o.detalle}">üí° Pista 2</button>\n        </div>\n        \n        <div class="reinas-options">\n          ${r.map(e=>`\n            <button class="reinas-option" data-answer="${e}">${e}</button>\n          `).join("")}\n        </div>\n      </div>\n    `,i.querySelectorAll(".reinas-hint").forEach(e=>{e.addEventListener("click",()=>{e.textContent=e.dataset.hint,e.disabled=!0,t.revealed++,document.getElementById("reinas-cover").style.clipPath=1===t.revealed?"polygon(30% 0, 100% 0, 100% 100%, 30% 100%)":"polygon(60% 0, 100% 0, 100% 100%, 60% 100%)"})}),i.querySelectorAll(".reinas-option").forEach(e=>{e.addEventListener("click",()=>function(e,n,i){const o=e.dataset.answer===n;if(i.querySelectorAll(".reinas-option").forEach(t=>{t.disabled=!0,t.dataset.answer===n?t.classList.add("correct"):t!==e||o||t.classList.add("wrong")}),document.getElementById("reinas-cover").style.opacity="0",o){const e=Math.max(30-10*t.revealed,10);t.score+=e}setTimeout(()=>{t.current++,a(i)},2e3)}(e,o.name,i))})}window.ReinasGame={init:async function(){const e=document.getElementById("reinas-container");e&&(await async function(){try{const e=await fetch("data/artworks-metadata.json"),n=await e.json();t.artworks=n.artworks.filter(e=>e.id).slice(0,8)}catch(e){}}(),n(e))}}}(),function(){let e={canvas:null,ctx:null,artworks:[],currentArt:null,mouseX:.5,mouseY:.5,time:0,breathing:0,particlesMica:[]};function t(a){const o=e.artworks[Math.floor(Math.random()*e.artworks.length)];e.currentArt=o,a.innerHTML=`\n      <div class="mica-experience">\n        <div class="mica-portrait-frame">\n          <canvas id="mica-canvas" class="mica-canvas"></canvas>\n          <img src="images/artworks/${(null==o?void 0:o.id)||"default"}.webp" \n               alt="${(null==o?void 0:o.title)||"Retrato"}" \n               class="mica-base-img" \n               id="mica-img"\n               crossorigin="anonymous">\n          \n          \x3c!-- Eyes overlay with mica effect --\x3e\n          <div class="mica-eyes" id="mica-eyes">\n            <div class="mica-eye mica-eye--left">\n              <div class="mica-pupil" id="pupil-left">\n                <div class="mica-shimmer"></div>\n                <div class="mica-sparkles"></div>\n              </div>\n            </div>\n            <div class="mica-eye mica-eye--right">\n              <div class="mica-pupil" id="pupil-right">\n                <div class="mica-shimmer"></div>\n                <div class="mica-sparkles"></div>\n              </div>\n            </div>\n          </div>\n          \n          \x3c!-- Floating mica particles --\x3e\n          <div class="mica-particles" id="mica-particles"></div>\n        </div>\n        \n        <div class="mica-info">\n          <h3 class="mica-title">${(null==o?void 0:o.title)||"Retrato Viviente"}</h3>\n          <p class="mica-desc">Los ojos te siguen... respiran contigo</p>\n        </div>\n        \n        <div class="mica-controls">\n          <button class="game-btn mica-btn" id="mica-breathe">ü´Å Sincronizar respiraci√≥n</button>\n          <button class="game-btn mica-btn" id="mica-next">üîÑ Siguiente retrato</button>\n          <button class="game-btn mica-btn" id="mica-light">üí° Cambiar luz</button>\n        </div>\n      </div>\n    `,e.canvas=document.getElementById("mica-canvas"),e.canvas&&(e.ctx=e.canvas.getContext("2d"),e.canvas.width=400,e.canvas.height=500),function(a){var o,s,c;a.addEventListener("mousemove",t=>{const i=a.getBoundingClientRect();e.mouseX=(t.clientX-i.left)/i.width,e.mouseY=(t.clientY-i.top)/i.height,n()}),a.addEventListener("touchmove",t=>{const i=a.getBoundingClientRect(),o=t.touches[0];e.mouseX=(o.clientX-i.left)/i.width,e.mouseY=(o.clientY-i.top)/i.height,n()}),null==(o=document.getElementById("mica-breathe"))||o.addEventListener("click",i),null==(s=document.getElementById("mica-next"))||s.addEventListener("click",()=>{t(a)}),null==(c=document.getElementById("mica-light"))||c.addEventListener("click",r)}(a),function(){const t=document.getElementById("mica-particles");if(t){t.innerHTML="",e.particlesMica=[];for(let n=0;n<30;n++){const n=document.createElement("div");n.className="mica-particle";const a=100*Math.random(),i=100*Math.random(),o=2+4*Math.random(),s=270+60*Math.random(),r=3+4*Math.random(),c=3*Math.random();n.style.cssText=`\n        left: ${a}%;\n        top: ${i}%;\n        width: ${o}px;\n        height: ${o}px;\n        background: radial-gradient(circle, \n          hsla(${s}, 80%, 70%, 0.9), \n          hsla(${s}, 60%, 40%, 0));\n        animation: mica-float ${r}s ease-in-out ${c}s infinite;\n        box-shadow: 0 0 ${2*o}px hsla(${s}, 80%, 60%, 0.5);\n      `,t.appendChild(n),e.particlesMica.push({el:n,x:a,y:i})}}}()}function n(){const t=document.querySelectorAll(".mica-pupil"),n=8*(e.mouseX-.5),a=6*(e.mouseY-.5);t.forEach(e=>{e.style.transform=`translate(${n}px, ${a}px)`})}let a=null;function i(){var e,t;const n=document.getElementById("mica-breathe");a?(clearInterval(a),a=null,n.textContent="ü´Å Sincronizar respiraci√≥n",null==(e=document.querySelector(".mica-portrait-frame"))||e.classList.remove("breathing")):(n.textContent="‚è∏Ô∏è Pausar respiraci√≥n",null==(t=document.querySelector(".mica-portrait-frame"))||t.classList.add("breathing"),a=setInterval(()=>{const e=document.querySelector(".mica-portrait-frame");e&&e.classList.toggle("inhale")},4e3))}let o=0;const s=["warm","cool","sunset","moonlight"];function r(){o=(o+1)%s.length;const e=document.querySelector(".mica-portrait-frame");s.forEach(t=>null==e?void 0:e.classList.remove(`light-${t}`)),null==e||e.classList.add(`light-${s[o]}`)}window.MicaGame={init:async function(){const n=document.getElementById("mica-container");n&&(await async function(){try{const t=await fetch("data/artworks-metadata.json"),n=await t.json();e.artworks=n.artworks.filter(e=>e.id).slice(0,10)}catch(t){}}(),t(n),function(){function t(){if(e.time+=.016,document.querySelectorAll(".mica-shimmer").forEach((t,n)=>{const a=2*e.time+n*Math.PI,i=.5+.5*Math.sin(a);t.style.opacity=i}),!a){const t=document.querySelectorAll(".mica-pupil"),n=1+.02*Math.sin(.5*e.time);t.forEach(e=>{e.style.scale=n})}requestAnimationFrame(t)}t()}())},destroy:function(){a&&clearInterval(a)}}}(),function(){let e={canvas:null,ctx:null,artworks:[],cracks:[],repaired:[],goldParticles:[],isRepairing:!1,mousePos:{x:0,y:0},repairProgress:0};function t(t){const a=e.artworks[Math.floor(Math.random()*e.artworks.length)];e.cracks=n(),e.repaired=[],e.goldParticles=[],e.repairProgress=0,t.innerHTML=`\n      <div class="kintsugi-experience">\n        <div class="kintsugi-frame">\n          <img src="images/artworks/${(null==a?void 0:a.id)||"default"}.webp" \n               alt="${(null==a?void 0:a.title)||"Retrato"}" \n               class="kintsugi-base">\n          \n          <canvas id="kintsugi-canvas" class="kintsugi-canvas"></canvas>\n          \n          <svg class="kintsugi-cracks" id="kintsugi-cracks" viewBox="0 0 300 400">\n            ${e.cracks.map((e,t)=>`\n              <path class="crack-path" \n                    id="crack-${t}"\n                    d="${e.path}" \n                    stroke="rgba(0,0,0,0.8)" \n                    stroke-width="3" \n                    fill="none"/>\n            `).join("")}\n          </svg>\n          \n          <svg class="kintsugi-gold" id="kintsugi-gold" viewBox="0 0 300 400">\n            \x3c!-- Gold repairs drawn here --\x3e\n          </svg>\n          \n          <div class="kintsugi-particles" id="kintsugi-particles"></div>\n        </div>\n        \n        <div class="kintsugi-info">\n          <h3>ÈáëÁ∂ô„Åé Kintsugi Emocional</h3>\n          <p>Toca las grietas para repararlas con oro l√≠quido</p>\n          <div class="kintsugi-progress">\n            <div class="kintsugi-progress-bar" id="progress-bar"></div>\n          </div>\n          <p class="kintsugi-wisdom" id="kintsugi-wisdom"></p>\n        </div>\n        \n        <div class="kintsugi-controls">\n          <button class="game-btn" id="kintsugi-break">üíî Romper de nuevo</button>\n          <button class="game-btn" id="kintsugi-next">üîÑ Nueva obra</button>\n        </div>\n      </div>\n    `,e.canvas=document.getElementById("kintsugi-canvas"),e.canvas&&(e.ctx=e.canvas.getContext("2d"),e.canvas.width=300,e.canvas.height=400),i(t)}function n(){const e=[],t=5+Math.floor(4*Math.random());for(let n=0;n<t;n++){const t=50+200*Math.random(),n=50+300*Math.random();let i=`M ${t} ${n}`,o=t,s=n;const r=3+Math.floor(4*Math.random());for(let e=0;e<r;e++)o+=80*(Math.random()-.5),s+=60*(Math.random()-.5),o=Math.max(10,Math.min(290,o)),s=Math.max(10,Math.min(390,s)),i+=` L ${o} ${s}`;e.push({path:i,repaired:!1,points:a(i)})}return e}function a(e){const t=[],n=e.matchAll(/[ML]\s*([\d.]+)\s+([\d.]+)/g);for(const a of n)t.push({x:parseFloat(a[1]),y:parseFloat(a[2])});return t}function i(n){var a,i;const s=document.getElementById("kintsugi-cracks");null==s||s.querySelectorAll(".crack-path").forEach((t,n)=>{t.addEventListener("click",t=>{e.cracks[n].repaired||o(n)}),t.addEventListener("mouseenter",()=>{t.style.cursor=e.cracks[n].repaired?"default":"pointer",e.cracks[n].repaired||(t.style.filter="drop-shadow(0 0 10px gold)")}),t.addEventListener("mouseleave",()=>{t.style.filter=""})}),n.addEventListener("touchstart",t=>{const n=s.getBoundingClientRect(),a=t.touches[0],i=(a.clientX-n.left)/n.width*300,r=(a.clientY-n.top)/n.height*400;e.cracks.forEach((e,t)=>{!e.repaired&&function(e,t,n,a=20){return n.some(n=>Math.abs(n.x-e)<a&&Math.abs(n.y-t)<a)}(i,r,e.points)&&o(t)})}),null==(a=document.getElementById("kintsugi-break"))||a.addEventListener("click",c),null==(i=document.getElementById("kintsugi-next"))||i.addEventListener("click",()=>t(n))}function o(t){const n=e.cracks[t];if(n.repaired)return;n.repaired=!0,e.repaired.push(t);const a=document.getElementById(`crack-${t}`);a&&(a.style.opacity="0");const i=document.getElementById("kintsugi-gold"),o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d",n.path),o.setAttribute("stroke","url(#gold-gradient)"),o.setAttribute("stroke-width","4"),o.setAttribute("fill","none"),o.setAttribute("class","gold-path"),o.setAttribute("filter","url(#gold-glow)"),i.querySelector("defs")||(i.innerHTML='\n        <defs>\n          <linearGradient id="gold-gradient" x1="0%" y1="0%" x2="100%" y2="100%">\n            <stop offset="0%" style="stop-color:#ffd700"/>\n            <stop offset="50%" style="stop-color:#ffec8b"/>\n            <stop offset="100%" style="stop-color:#daa520"/>\n          </linearGradient>\n          <filter id="gold-glow">\n            <feGaussianBlur stdDeviation="3" result="blur"/>\n            <feMerge>\n              <feMergeNode in="blur"/>\n              <feMergeNode in="SourceGraphic"/>\n            </feMerge>\n          </filter>\n        </defs>\n      '),i.appendChild(o);const c=o.getTotalLength();o.style.strokeDasharray=c,o.style.strokeDashoffset=c,o.style.animation="gold-flow 1s ease-out forwards",function(e){const t=document.getElementById("kintsugi-particles");t&&e.forEach(e=>{for(let n=0;n<5;n++){const n=document.createElement("div");n.className="gold-particle";const a=Math.random()*Math.PI*2,i=30+50*Math.random(),o=.5+.5*Math.random();n.style.cssText=`\n          left: ${e.x/300*100}%;\n          top: ${e.y/400*100}%;\n          --dx: ${Math.cos(a)*i}px;\n          --dy: ${Math.sin(a)*i}px;\n          animation: gold-burst ${o}s ease-out forwards;\n        `,t.appendChild(n),setTimeout(()=>n.remove(),1e3*o)}})}(n.points),s(),e.repaired.length===e.cracks.length&&function(){var e;const t=document.getElementById("kintsugi-wisdom");t&&(t.textContent=r[Math.floor(Math.random()*r.length)],t.classList.add("visible")),null==(e=document.querySelector(".kintsugi-frame"))||e.classList.add("complete");const n=1e3+Math.floor(500*Math.random());window.RankingSystem&&setTimeout(()=>{window.RankingSystem.showSubmitModal("kintsugi",n,()=>{})},1500)}()}function s(){const t=e.repaired.length/e.cracks.length*100,n=document.getElementById("progress-bar");n&&(n.style.width=`${t}%`)}const r=['"Las cicatrices son mapas de la vida que hemos vivido"','"Lo roto puede ser m√°s bello que lo perfecto"','"El oro de las heridas cuenta nuestra historia"','"En cada grieta, una oportunidad de brillar"','"La imperfecci√≥n es donde entra la luz"'];function c(){var t;e.cracks=n(),e.repaired=[];const a=document.getElementById("kintsugi-cracks"),o=document.getElementById("kintsugi-gold"),r=document.getElementById("kintsugi-particles");a&&(a.innerHTML=e.cracks.map((e,t)=>`\n        <path class="crack-path" \n              id="crack-${t}"\n              d="${e.path}" \n              stroke="rgba(0,0,0,0.8)" \n              stroke-width="3" \n              fill="none"/>\n      `).join("")),o&&(o.innerHTML=""),r&&(r.innerHTML=""),s();const c=document.getElementById("kintsugi-wisdom");c&&(c.textContent="",c.classList.remove("visible")),null==(t=document.querySelector(".kintsugi-frame"))||t.classList.remove("complete"),i(document.getElementById("kintsugi-container"))}window.KintsugiGame={init:async function(){const n=document.getElementById("kintsugi-container");n&&(await async function(){try{const t=await fetch("data/artworks-metadata.json"),n=await t.json();e.artworks=n.artworks.filter(e=>e.id).slice(0,10)}catch(t){}}(),t(n))}}}(),function(){let e={canvas:null,ctx:null,running:!1,score:0,aiScore:0,maxScore:5,ball:{x:0,y:0,vx:5,vy:3,size:20},paddle:{y:0,height:80,width:12},aiPaddle:{y:0},artworkImg:null};function t(){const t=e.canvas.height-e.paddle.height;e.paddle.y=Math.max(0,Math.min(t,e.paddle.y))}function n(){const t=e.canvas;e.ball.x=t.width/2,e.ball.y=t.height/2,e.ball.vx=5*(Math.random()>.5?1:-1),e.ball.vy=6*(Math.random()-.5)}function a(){e.score=0,e.aiScore=0,e.running=!0,document.getElementById("pong-start").style.display="none",n(),o(),r()}function i(t){if(e.running=!1,document.getElementById("pong-start").style.display="inline-block",t&&window.RankingSystem){const t=100*e.score;window.RankingSystem.showSubmitModal("pong",t,()=>{window.RankingSystem.renderLeaderboard("pong","pong-ranking")})}}function o(){document.getElementById("pong-player-score").textContent=e.score,document.getElementById("pong-ai-score").textContent=e.aiScore}function s(){const t=e.ctx,n=e.canvas,a=e.ball,i=e.paddle,o=e.aiPaddle;t.fillStyle="#0a0a14",t.fillRect(0,0,n.width,n.height),t.strokeStyle="rgba(255,255,255,0.2)",t.setLineDash([10,10]),t.beginPath(),t.moveTo(n.width/2,0),t.lineTo(n.width/2,n.height),t.stroke(),t.setLineDash([]),t.fillStyle="#ffd700",t.fillRect(0,i.y,i.width,i.height),t.fillStyle="#888",t.fillRect(n.width-i.width,o.y,i.width,i.height),e.artworkImg?(t.save(),t.beginPath(),t.arc(a.x,a.y,a.size,0,2*Math.PI),t.clip(),t.drawImage(e.artworkImg,a.x-a.size,a.y-a.size,2*a.size,2*a.size),t.restore()):(t.fillStyle="#ffd700",t.beginPath(),t.arc(a.x,a.y,a.size,0,2*Math.PI),t.fill())}function r(){e.running&&(function(){const t=e.ball,a=e.canvas,s=e.paddle,r=e.aiPaddle;if(t.x+=t.vx,t.y+=t.vy,(t.y<=t.size||t.y>=a.height-t.size)&&(t.vy*=-1),t.x<=s.width+t.size)if(t.y>=s.y&&t.y<=s.y+s.height)t.vx=1.05*Math.abs(t.vx),t.vy+=.1*(t.y-(s.y+s.height/2));else if(t.x<0){if(e.aiScore++,o(),e.aiScore>=e.maxScore)return void i(!1);n()}if(t.x>=a.width-s.width-t.size)if(t.y>=r.y&&t.y<=r.y+s.height)t.vx=1.05*-Math.abs(t.vx),t.vy+=.1*(t.y-(r.y+s.height/2));else if(t.x>a.width){if(e.score++,o(),e.score>=e.maxScore)return void i(!0);n()}const c=r.y+s.height/2,l=t.y-c;r.y+=.06*l,r.y=Math.max(0,Math.min(a.height-s.height,r.y)),t.vx=Math.max(-12,Math.min(12,t.vx)),t.vy=Math.max(-8,Math.min(8,t.vy))}(),s(),requestAnimationFrame(r))}window.PongGame={init:function(){const i=document.getElementById("pong-container");i&&(i.innerHTML='\n      <div class="pong-game">\n        <div class="pong-scores">\n          <span id="pong-player-score">0</span>\n          <span class="pong-vs">VS</span>\n          <span id="pong-ai-score">0</span>\n        </div>\n        <canvas id="pong-canvas" width="600" height="400"></canvas>\n        <div class="pong-controls">\n          <p>‚Üë‚Üì o arrastra para mover</p>\n          <button class="game-btn" id="pong-start">üéÆ Jugar</button>\n        </div>\n        <div id="pong-ranking"></div>\n      </div>\n    ',e.canvas=document.getElementById("pong-canvas"),e.ctx=e.canvas.getContext("2d"),n(),e.paddle.y=e.canvas.height/2-e.paddle.height/2,e.aiPaddle.y=e.paddle.y,document.getElementById("pong-start").addEventListener("click",a),e.canvas.addEventListener("mousemove",n=>{const a=e.canvas.getBoundingClientRect();e.paddle.y=n.clientY-a.top-e.paddle.height/2,t()}),e.canvas.addEventListener("touchmove",n=>{n.preventDefault();const a=e.canvas.getBoundingClientRect(),i=e.canvas.height/a.height,o=(n.touches[0].clientY-a.top)*i;e.paddle.y=o-e.paddle.height/2,t()},{passive:!1}),e.canvas.addEventListener("touchstart",t=>{e.running||a()},{passive:!0}),async function(){try{const t=await fetch("data/intro-artworks.json"),n=await t.json(),a=n.artworks[Math.floor(Math.random()*n.artworks.length)],i=new Image;i.src=`img/artworks-intro/${a.file}`,await new Promise(e=>{i.onload=e,i.onerror=e}),e.artworkImg=i}catch(t){}}(),window.RankingSystem&&window.RankingSystem.renderLeaderboard("pong","pong-ranking"),s())}}}(),function(){let e={phase:"wait",startTime:0,reactionTime:0,attempts:0,bestTime:1/0,timeoutId:null,artworks:[],currentArt:null};function t(){const t=document.getElementById("reaction-zone"),n=document.getElementById("reaction-content");e.phase="ready",t.className="reaction-zone reaction-ready",n.innerHTML="<h3>‚è≥ Espera...</h3>";const a=2e3+3e3*Math.random();e.timeoutId=setTimeout(()=>{e.phase="go",e.startTime=performance.now(),e.currentArt=0===e.artworks.length?null:e.artworks[Math.floor(Math.random()*e.artworks.length)],t.className="reaction-zone reaction-go",e.currentArt?n.innerHTML=`\n          <img src="img/artworks-intro/${e.currentArt.file}" \n               alt="${e.currentArt.subject||"Artwork"}"\n               class="reaction-artwork">\n          <h3>¬°AHORA!</h3>\n        `:n.innerHTML='<h3 class="reaction-now">¬°CLICK!</h3>'},a)}function n(n){if("reaction-start"===n.target.id)return;const a=document.getElementById("reaction-zone"),i=document.getElementById("reaction-content");if("ready"===e.phase)clearTimeout(e.timeoutId),e.phase="wait",a.className="reaction-zone reaction-early",i.innerHTML='\n        <h3>‚ùå ¬°Demasiado pronto!</h3>\n        <p>Espera a que aparezca la imagen</p>\n        <button class="game-btn" id="reaction-retry">Reintentar</button>\n      ',document.getElementById("reaction-retry").addEventListener("click",t);else if("go"===e.phase){const n=performance.now()-e.startTime;e.reactionTime=n,e.attempts++,n<e.bestTime&&(e.bestTime=n),e.phase="result",a.className="reaction-zone reaction-result";const o=n<200?"üöÄ INCRE√çBLE":n<300?"‚ö° Excelente":n<400?"üëç Bien":n<500?"üòä Normal":"üê¢ Lento";i.innerHTML=`\n        <div class="reaction-time">${Math.round(n)}<span>ms</span></div>\n        <p class="reaction-rating">${o}</p>\n        <div class="reaction-buttons">\n          <button class="game-btn" id="reaction-again">Otra vez</button>\n          <button class="game-btn game-btn--secondary" id="reaction-save">Guardar</button>\n        </div>\n      `,document.getElementById("reaction-again").addEventListener("click",t),document.getElementById("reaction-save").addEventListener("click",()=>function(e){if(!window.RankingSystem)return;const t=Math.max(0,Math.round(1e4-10*e));window.RankingSystem.showSubmitModal("reaction",t,()=>{window.RankingSystem.renderLeaderboard("reaction","reaction-ranking")})}(n)),document.getElementById("reaction-best").textContent=Math.round(e.bestTime)+"ms",document.getElementById("reaction-attempts").textContent=e.attempts}}window.ReactionGame={init:function(){const a=document.getElementById("reaction-container");if(!a)return;a.innerHTML='\n      <div class="reaction-game">\n        <div class="reaction-zone" id="reaction-zone">\n          <div class="reaction-content" id="reaction-content">\n            <h3>‚ö° Test de Reflejos</h3>\n            <p>Haz clic cuando aparezca la obra</p>\n            <button class="game-btn" id="reaction-start">Empezar</button>\n          </div>\n        </div>\n        <div class="reaction-stats">\n          <div class="reaction-stat">\n            <span class="reaction-label">Mejor tiempo</span>\n            <span class="reaction-value" id="reaction-best">--</span>\n          </div>\n          <div class="reaction-stat">\n            <span class="reaction-label">Intentos</span>\n            <span class="reaction-value" id="reaction-attempts">0</span>\n          </div>\n        </div>\n        <div id="reaction-ranking"></div>\n      </div>\n    ';const i=document.getElementById("reaction-zone");document.getElementById("reaction-start").addEventListener("click",t),document.getElementById("reaction-start").addEventListener("click",t),i.addEventListener("click",n),i.addEventListener("touchstart",e=>{e.preventDefault(),n(e)},{passive:!1}),async function(){try{const t=await fetch("data/intro-artworks.json"),n=await t.json();e.artworks=n.artworks}catch(t){}}(),window.RankingSystem&&window.RankingSystem.renderLeaderboard("reaction","reaction-ranking")}}}(),function(){let e={currentWord:"",typed:"",score:0,combo:0,maxCombo:0,timeLeft:60,running:!1,timerId:null};const t="typing-container",n=["COLLAGE","RETRATO","MARILYN","JOHNNY","AMY","JAMES","PINTURA","ARTE","MICA","KINTSUGI","DIVINO","ROCK","BILBAO","NAROA","VINTAGE","POEMA","ORO","ALMA","REINA","ESTRELLA","LOTERIA","PAPEL","SELLO","TIEMPO","COLOR","TEXTURA","DORADO","PLATA","AZUL","ROJO"];function a(){e.score=0,e.combo=0,e.maxCombo=0,e.timeLeft=60,e.running=!0,e.typed="";const n=document.getElementById("typing-input"),a=document.getElementById("typing-start");n.disabled=!1,n.value="",n.focus(),setTimeout(()=>{document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})},100),a.style.display="none",i(),s(),e.timerId=setInterval(()=>{e.timeLeft--,document.getElementById("typing-time").textContent=e.timeLeft,e.timeLeft<=0&&function(){e.running=!1,clearInterval(e.timerId);const t=document.getElementById("typing-input"),n=document.getElementById("typing-start");t.disabled=!0,n.style.display="inline-block",n.textContent="üîÑ Jugar de nuevo",window.RankingSystem&&window.RankingSystem.showSubmitModal("typing",e.score,()=>{window.RankingSystem.renderLeaderboard("typing","typing-ranking")})}()},1e3)}function i(){e.currentWord=n[Math.floor(Math.random()*n.length)],e.typed="",document.getElementById("typing-word").textContent=e.currentWord,document.getElementById("typing-input").value=""}function o(t){if(e.running){if(e.typed=t.target.value.toUpperCase(),e.typed===e.currentWord){e.combo++,e.maxCombo=Math.max(e.maxCombo,e.combo);const t=e.currentWord.length*(1+.5*e.combo);e.score+=Math.floor(t);const n=document.getElementById("typing-word");n.classList.add("typing-correct"),setTimeout(()=>n.classList.remove("typing-correct"),200),i(),s()}e.currentWord.startsWith(e.typed)||(e.combo=0,document.getElementById("typing-combo").textContent="x0",document.getElementById("typing-input").classList.add("typing-error"),setTimeout(()=>{document.getElementById("typing-input").classList.remove("typing-error")},200))}}function s(){document.getElementById("typing-score").textContent=e.score,document.getElementById("typing-combo").textContent=`x${e.combo}`}window.TypingGame={init:function(){const e=document.getElementById(t);e&&(e.innerHTML='\n      <div class="typing-game">\n        <div class="typing-header">\n          <div class="typing-stat">\n            <span class="typing-label">Tiempo</span>\n            <span class="typing-value" id="typing-time">60</span>\n          </div>\n          <div class="typing-stat">\n            <span class="typing-label">Puntos</span>\n            <span class="typing-value" id="typing-score">0</span>\n          </div>\n          <div class="typing-stat">\n            <span class="typing-label">Combo</span>\n            <span class="typing-value" id="typing-combo">x0</span>\n          </div>\n        </div>\n        <div class="typing-area">\n          <div class="typing-word" id="typing-word">ARTE</div>\n          <div class="typing-input-wrap">\n            <input type="text" \n                   id="typing-input" \n                   class="typing-input" \n                   placeholder="Escribe aqu√≠..."\n                   autocomplete="off"\n                   autocapitalize="characters"\n                   disabled>\n          </div>\n        </div>\n        <button class="game-btn" id="typing-start">üéÆ Empezar</button>\n        <div id="typing-ranking"></div>\n      </div>\n    ',document.getElementById("typing-start").addEventListener("click",a),document.getElementById("typing-input").addEventListener("input",o),document.getElementById("typing-input").addEventListener("keydown",e=>{e.key}),window.RankingSystem&&window.RankingSystem.renderLeaderboard("typing","typing-ranking"))}}}(),function(){const e={white:{king:"‚ôî",queen:"‚ôï",rook:"‚ôñ",bishop:"‚ôó",knight:"‚ôò",pawn:"‚ôô"},black:{king:"‚ôö",queen:"‚ôõ",rook:"‚ôú",bishop:"‚ôù",knight:"‚ôû",pawn:"‚ôü"}},t=[["r","n","b","q","k","b","n","r"],["p","p","p","p","p","p","p","p"],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["P","P","P","P","P","P","P","P"],["R","N","B","Q","K","B","N","R"]];let n={board:[],selected:null,turn:"white",moves:0,captured:{white:[],black:[]}};function a(t){if(!t)return"";const n=t===t.toUpperCase(),a=t.toLowerCase();return e[n?"white":"black"][{k:"king",q:"queen",r:"rook",b:"bishop",n:"knight",p:"pawn"}[a]]}function i(e){return e&&e===e.toUpperCase()}function o(e){n={board:t.map(e=>[...e]),selected:null,turn:"white",moves:0,captured:{white:[],black:[]}},e.innerHTML='\n      <div class="chess-game">\n        <div class="chess-header">\n          <span>Turno: <strong id="chess-turn">Blancas</strong></span>\n          <span>Movimientos: <strong id="chess-moves">0</strong></span>\n        </div>\n        <div class="chess-captured">\n          <div id="captured-black"></div>\n          <div id="captured-white"></div>\n        </div>\n        <div class="chess-board" id="chess-board"></div>\n        <button class="game-btn" id="chess-reset">Nueva Partida</button>\n      </div>\n      <style>\n        .chess-game { text-align: center; padding: 1rem; }\n        .chess-header { display: flex; justify-content: space-around; margin-bottom: 1rem; font-size: 1.1rem; }\n        .chess-captured { display: flex; justify-content: space-between; max-width: 400px; margin: 0 auto 0.5rem; font-size: 1.5rem; min-height: 2rem; }\n        .chess-board {\n          display: grid;\n          grid-template-columns: repeat(8, 1fr);\n          max-width: 400px;\n          margin: 0 auto;\n          border: 3px solid #d4a574;\n          border-radius: 8px;\n          overflow: hidden;\n        }\n        .chess-cell {\n          aspect-ratio: 1;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 2.5rem;\n          cursor: pointer;\n          transition: all 0.2s;\n          user-select: none;\n        }\n        .chess-cell.light { background: #f0d9b5; }\n        .chess-cell.dark { background: #b58863; }\n        .chess-cell.selected { background: #7b61ff !important; }\n        .chess-cell.valid-move { background: rgba(76, 175, 80, 0.5) !important; }\n        .chess-cell:hover { filter: brightness(1.1); }\n        .game-btn { background: var(--color-accent, #d4a574); border: none; padding: 0.75rem 2rem; border-radius: 8px; cursor: pointer; font-size: 1rem; margin-top: 1rem; }\n      </style>\n    ',s(),document.getElementById("chess-reset").addEventListener("click",()=>o(e))}function s(){var e,t;const i=document.getElementById("chess-board");i.innerHTML="";for(let o=0;o<8;o++)for(let s=0;s<8;s++){const r=document.createElement("div"),l=(o+s)%2==0;r.className="chess-cell "+(l?"light":"dark"),r.dataset.row=o,r.dataset.col=s,r.textContent=a(n.board[o][s]),(null==(e=n.selected)?void 0:e.row)===o&&(null==(t=n.selected)?void 0:t.col)===s&&r.classList.add("selected"),r.addEventListener("click",()=>c(o,s)),i.appendChild(r)}}function r(e,t){var a,o;const s=n.board[e][t];if(!s)return[];const r=[],c=i(s),l=s.toLowerCase(),d=(e,t)=>{if(e<0||e>7||t<0||t>7)return!1;const a=n.board[e][t];return!(a&&i(a)===c||(r.push({row:e,col:t}),a))};if("p"===l){const s=c?-1:1,l=c?6:1;(null==(a=n.board[e+s])?void 0:a[t])||(d(e+s,t),e!==l||(null==(o=n.board[e+2*s])?void 0:o[t])||d(e+2*s,t)),[-1,1].forEach(a=>{var o;const l=null==(o=n.board[e+s])?void 0:o[t+a];l&&i(l)!==c&&r.push({row:e+s,col:t+a})})}return"r"!==l&&"q"!==l||[[0,1],[0,-1],[1,0],[-1,0]].forEach(([n,a])=>{for(let i=1;i<8&&d(e+n*i,t+a*i);i++);}),"b"!==l&&"q"!==l||[[1,1],[1,-1],[-1,1],[-1,-1]].forEach(([n,a])=>{for(let i=1;i<8&&d(e+n*i,t+a*i);i++);}),"n"===l&&[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]].forEach(([n,a])=>{d(e+n,t+a)}),"k"===l&&[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]].forEach(([n,a])=>{d(e+n,t+a)}),r}function c(e,t){const o=n.board[e][t],c="white"===n.turn;if(n.selected&&r(n.selected.row,n.selected.col).some(n=>n.row===e&&n.col===t)){const i=n.board[e][t];return i&&(n.captured[c?"white":"black"].push(i),document.getElementById("captured-white").textContent=n.captured.white.map(a).join(" "),document.getElementById("captured-black").textContent=n.captured.black.map(a).join(" ")),n.board[e][t]=n.board[n.selected.row][n.selected.col],n.board[n.selected.row][n.selected.col]="",n.moves++,n.turn=c?"black":"white",n.selected=null,document.getElementById("chess-turn").textContent="white"===n.turn?"Blancas":"Negras",document.getElementById("chess-moves").textContent=n.moves,"k"===(null==i?void 0:i.toLowerCase())&&setTimeout(()=>{alert(`üéâ ¬°${c?"Blancas":"Negras"} ganan!`),window.RankingSystem&&window.RankingSystem.submitScore("chess",n.moves)},100),void s()}o&&i(o)===c?(n.selected={row:e,col:t},s(),r(e,t).forEach(e=>{const t=document.querySelector(`[data-row="${e.row}"][data-col="${e.col}"]`);t&&t.classList.add("valid-move")})):(n.selected=null,s())}window.initChessGame=function(e){o(e)}}(),function(){let e={board:[],selected:null,turn:"red"};function t(){const e=Array(8).fill(null).map(()=>Array(8).fill(null));for(let t=0;t<3;t++)for(let n=0;n<8;n++)(t+n)%2==1&&(e[t][n]={color:"black",king:!1});for(let t=5;t<8;t++)for(let n=0;n<8;n++)(t+n)%2==1&&(e[t][n]={color:"red",king:!1});return e}function n(i){e={board:t(),selected:null,turn:"red",captureMode:!1},i.innerHTML='\n      <div class="checkers-game">\n        <div class="checkers-header">\n          <span>Turno: <strong id="checkers-turn" style="color: #e74c3c;">Rojas</strong></span>\n        </div>\n        <div class="checkers-board" id="checkers-board"></div>\n        <button class="game-btn" id="checkers-reset">Nueva Partida</button>\n      </div>\n      <style>\n        .checkers-game { text-align: center; padding: 1rem; }\n        .checkers-header { margin-bottom: 1rem; font-size: 1.2rem; }\n        .checkers-board {\n          display: grid;\n          grid-template-columns: repeat(8, 1fr);\n          max-width: 400px;\n          margin: 0 auto;\n          border: 3px solid #d4a574;\n          border-radius: 8px;\n          overflow: hidden;\n        }\n        .checkers-cell {\n          aspect-ratio: 1;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n        }\n        .checkers-cell.light { background: #deb887; }\n        .checkers-cell.dark { background: #654321; }\n        .checkers-cell.selected { background: #7b61ff !important; }\n        .checkers-cell.valid { background: rgba(76, 175, 80, 0.6) !important; }\n        .checkers-piece {\n          width: 80%;\n          height: 80%;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 1.5rem;\n          box-shadow: 0 4px 8px rgba(0,0,0,0.3);\n          transition: transform 0.2s;\n        }\n        .checkers-piece:hover { transform: scale(1.1); }\n        .checkers-piece.red { background: linear-gradient(135deg, #e74c3c, #c0392b); }\n        .checkers-piece.black { background: linear-gradient(135deg, #2c3e50, #1a252f); }\n        .game-btn { background: var(--color-accent, #d4a574); border: none; padding: 0.75rem 2rem; border-radius: 8px; cursor: pointer; font-size: 1rem; margin-top: 1rem; }\n      </style>\n    ',a(),document.getElementById("checkers-reset").addEventListener("click",()=>n(i))}function a(){var t,n;const a=document.getElementById("checkers-board");a.innerHTML="";for(let i=0;i<8;i++)for(let s=0;s<8;s++){const r=document.createElement("div"),c=(i+s)%2==0;r.className="checkers-cell "+(c?"light":"dark"),r.dataset.row=i,r.dataset.col=s,(null==(t=e.selected)?void 0:t.row)===i&&(null==(n=e.selected)?void 0:n.col)===s&&r.classList.add("selected");const l=e.board[i][s];if(l){const e=document.createElement("div");e.className=`checkers-piece ${l.color}`,l.king&&(e.textContent="üëë"),r.appendChild(e)}r.addEventListener("click",()=>o(i,s)),a.appendChild(r)}}function i(t,n){const a=e.board[t][n];if(!a)return[];const i=[],o=[];return(a.king?[-1,1]:"red"===a.color?[-1]:[1]).forEach(s=>{[-1,1].forEach(r=>{const c=t+s,l=n+r;if(c>=0&&c<8&&l>=0&&l<8)if(e.board[c][l]){if(e.board[c][l].color!==a.color){const t=c+s,n=l+r;t>=0&&t<8&&n>=0&&n<8&&!e.board[t][n]&&o.push({row:t,col:n,captured:{row:c,col:l}})}}else i.push({row:c,col:l})})}),o.length>0?o:i}function o(t,n){const o=e.board[t][n];if(e.selected){const o=i(e.selected.row,e.selected.col).find(e=>e.row===t&&e.col===n);if(o)return e.board[t][n]=e.board[e.selected.row][e.selected.col],e.board[e.selected.row][e.selected.col]=null,o.captured&&(e.board[o.captured.row][o.captured.col]=null),(0===t&&"red"===e.board[t][n].color||7===t&&"black"===e.board[t][n].color)&&(e.board[t][n].king=!0),e.turn="red"===e.turn?"black":"red",e.selected=null,document.getElementById("checkers-turn").textContent="red"===e.turn?"Rojas":"Negras",document.getElementById("checkers-turn").style.color="red"===e.turn?"#e74c3c":"#2c3e50",function(){let t=0,n=0;e.board.forEach(e=>{e.forEach(e=>{"red"===(null==e?void 0:e.color)&&t++,"black"===(null==e?void 0:e.color)&&n++})}),0===t?setTimeout(()=>alert("‚¨õ ¬°Negras ganan!"),100):0===n&&setTimeout(()=>{alert("üî¥ ¬°Rojas ganan!"),window.RankingSystem&&window.RankingSystem.submitScore("checkers",1e3)},100)}(),void a()}o&&o.color===e.turn?(e.selected={row:t,col:n},a(),i(t,n).forEach(e=>{const t=document.querySelector(`[data-row="${e.row}"][data-col="${e.col}"]`);t&&t.classList.add("valid")})):(e.selected=null,a())}window.initCheckersGame=function(e){n(e)}}(),function(){let e={board:[],turn:"yellow",winner:null};function t(a){e={board:Array(6).fill(null).map(()=>Array(7).fill(null)),turn:"yellow",winner:null},a.innerHTML='\n      <div class="connect4-game">\n        <div class="connect4-header">\n          <span>Turno: <span id="c4-turn" class="c4-indicator yellow"></span></span>\n        </div>\n        <div class="connect4-board" id="connect4-board"></div>\n        <button class="game-btn" id="connect4-reset">Nueva Partida</button>\n      </div>\n      <style>\n        .connect4-game { text-align: center; padding: 1rem; }\n        .connect4-header { display: flex; justify-content: center; align-items: center; gap: 0.5rem; margin-bottom: 1rem; font-size: 1.2rem; }\n        .c4-indicator { width: 30px; height: 30px; border-radius: 50%; display: inline-block; }\n        .c4-indicator.yellow { background: linear-gradient(135deg, #f1c40f, #f39c12); }\n        .c4-indicator.red { background: linear-gradient(135deg, #e74c3c, #c0392b); }\n        .connect4-board {\n          display: inline-grid;\n          grid-template-columns: repeat(7, 1fr);\n          gap: 8px;\n          background: linear-gradient(135deg, #2980b9, #3498db);\n          padding: 15px;\n          border-radius: 16px;\n          box-shadow: 0 10px 30px rgba(0,0,0,0.3);\n        }\n        .c4-column {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n          cursor: pointer;\n          transition: transform 0.2s;\n        }\n        .c4-column:hover { transform: translateY(-5px); }\n        .c4-cell {\n          width: 50px;\n          height: 50px;\n          background: #1a1a2e;\n          border-radius: 50%;\n          transition: all 0.3s;\n        }\n        .c4-cell.yellow { background: linear-gradient(135deg, #f1c40f, #f39c12); box-shadow: 0 0 15px rgba(241, 196, 15, 0.5); }\n        .c4-cell.red { background: linear-gradient(135deg, #e74c3c, #c0392b); box-shadow: 0 0 15px rgba(231, 76, 60, 0.5); }\n        .c4-cell.winning { animation: winPulse 0.5s ease infinite alternate; }\n        @keyframes winPulse {\n          to { transform: scale(1.15); }\n        }\n        .game-btn { background: var(--color-accent, #d4a574); border: none; padding: 0.75rem 2rem; border-radius: 8px; cursor: pointer; font-size: 1rem; margin-top: 1rem; }\n      </style>\n    ',n(),document.getElementById("connect4-reset").addEventListener("click",()=>t(a))}function n(){const t=document.getElementById("connect4-board");t.innerHTML="";for(let n=0;n<7;n++){const i=document.createElement("div");i.className="c4-column",i.dataset.col=n;for(let t=0;t<6;t++){const a=document.createElement("div");a.className="c4-cell",a.dataset.row=t,a.dataset.col=n;const o=e.board[t][n];o&&a.classList.add(o),i.appendChild(a)}i.addEventListener("click",()=>a(n)),t.appendChild(i)}}function a(t){if(e.winner)return;let a=-1;for(let n=5;n>=0;n--)if(!e.board[n][t]){a=n;break}if(-1===a)return;e.board[a][t]=e.turn;const i=function(t,n){const a=e.board[t][n],i=[[[0,1],[0,-1]],[[1,0],[-1,0]],[[1,1],[-1,-1]],[[1,-1],[-1,1]]];for(const[[o,s],[r,c]]of i){const i=[[t,n]];let l=t+o,d=n+s;for(;l>=0&&l<6&&d>=0&&d<7&&e.board[l][d]===a;)i.push([l,d]),l+=o,d+=s;for(l=t+r,d=n+c;l>=0&&l<6&&d>=0&&d<7&&e.board[l][d]===a;)i.push([l,d]),l+=r,d+=c;if(i.length>=4)return{color:a,cells:i}}return null}(a,t);if(i)return e.winner=i.color,n(),i.cells.forEach(([e,t])=>{const n=document.querySelector(`[data-row="${e}"][data-col="${t}"]`);n&&n.classList.add("winning")}),void setTimeout(()=>{alert(`üéâ ¬°${"yellow"===i.color?"Amarillo":"Rojo"} gana!`),window.RankingSystem&&window.RankingSystem.submitScore("connect4",1e3)},500);e.turn="yellow"===e.turn?"red":"yellow",document.getElementById("c4-turn").className=`c4-indicator ${e.turn}`,n()}window.initConnect4Game=function(e){t(e)}}(),function(){let e={board:[],turn:"black",validMoves:[]};function t(n){const o=Array(8).fill(null).map(()=>Array(8).fill(null));o[3][3]="white",o[3][4]="black",o[4][3]="black",o[4][4]="white",e={board:o,turn:"black",validMoves:[]},n.innerHTML='\n      <div class="reversi-game">\n        <div class="reversi-header">\n          <span class="reversi-score">\n            <span class="reversi-piece black"></span> <strong id="reversi-black">2</strong>\n          </span>\n          <span>Turno: <span id="reversi-turn" class="reversi-piece black"></span></span>\n          <span class="reversi-score">\n            <span class="reversi-piece white"></span> <strong id="reversi-white">2</strong>\n          </span>\n        </div>\n        <div class="reversi-board" id="reversi-board"></div>\n        <button class="game-btn" id="reversi-reset">Nueva Partida</button>\n      </div>\n      <style>\n        .reversi-game { text-align: center; padding: 1rem; }\n        .reversi-header { display: flex; justify-content: space-around; align-items: center; margin-bottom: 1rem; font-size: 1.2rem; }\n        .reversi-score { display: flex; align-items: center; gap: 0.5rem; }\n        .reversi-piece {\n          width: 30px;\n          height: 30px;\n          border-radius: 50%;\n          display: inline-block;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n        }\n        .reversi-piece.black { background: linear-gradient(135deg, #2c3e50, #1a252f); }\n        .reversi-piece.white { background: linear-gradient(135deg, #ecf0f1, #bdc3c7); }\n        .reversi-board {\n          display: grid;\n          grid-template-columns: repeat(8, 1fr);\n          max-width: 400px;\n          margin: 0 auto;\n          background: #27ae60;\n          padding: 4px;\n          gap: 2px;\n          border-radius: 8px;\n          box-shadow: 0 10px 30px rgba(0,0,0,0.3);\n        }\n        .reversi-cell {\n          aspect-ratio: 1;\n          background: #2ecc71;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          transition: all 0.2s;\n        }\n        .reversi-cell:hover { background: #27ae60; }\n        .reversi-cell.valid { background: rgba(46, 204, 113, 0.5); box-shadow: inset 0 0 10px rgba(0,0,0,0.2); }\n        .reversi-cell .reversi-piece { width: 80%; height: 80%; transition: transform 0.3s; }\n        .reversi-cell .reversi-piece.flip { animation: flipPiece 0.4s ease; }\n        @keyframes flipPiece {\n          50% { transform: scaleX(0); }\n        }\n        .game-btn { background: var(--color-accent, #d4a574); border: none; padding: 0.75rem 2rem; border-radius: 8px; cursor: pointer; font-size: 1rem; margin-top: 1rem; }\n      </style>\n    ',a(),i(),document.getElementById("reversi-reset").addEventListener("click",()=>t(n))}function n(t,n,a){if(e.board[t][n])return[];const i="black"===a?"white":"black",o=[];return[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]].forEach(([s,r])=>{const c=[];let l=t+s,d=n+r;for(;l>=0&&l<8&&d>=0&&d<8&&e.board[l][d]===i;)c.push([l,d]),l+=s,d+=r;c.length>0&&l>=0&&l<8&&d>=0&&d<8&&e.board[l][d]===a&&o.push(...c)}),o}function a(){e.validMoves=[];for(let t=0;t<8;t++)for(let a=0;a<8;a++)n(t,a,e.turn).length>0&&e.validMoves.push([t,a])}function i(){const t=document.getElementById("reversi-board");t.innerHTML="";let n=0,a=0;for(let i=0;i<8;i++)for(let s=0;s<8;s++){const r=document.createElement("div");r.className="reversi-cell",r.dataset.row=i,r.dataset.col=s;const c=e.board[i][s];if(c){const e=document.createElement("div");e.className=`reversi-piece ${c}`,r.appendChild(e),"black"===c?n++:a++}e.validMoves.some(([e,t])=>e===i&&t===s)&&r.classList.add("valid"),r.addEventListener("click",()=>o(i,s)),t.appendChild(r)}document.getElementById("reversi-black").textContent=n,document.getElementById("reversi-white").textContent=a}function o(t,o){if(!e.validMoves.some(([e,n])=>e===t&&n===o))return;const s=n(t,o,e.turn);e.board[t][o]=e.turn,s.forEach(([t,n])=>{e.board[t][n]=e.turn}),e.turn="black"===e.turn?"white":"black",document.getElementById("reversi-turn").className=`reversi-piece ${e.turn}`,a(),0===e.validMoves.length&&(e.turn="black"===e.turn?"white":"black",a(),0===e.validMoves.length&&function(){let t=0,n=0;e.board.forEach(e=>{e.forEach(e=>{"black"===e&&t++,"white"===e&&n++})});const a=t>n?"Negro":n>t?"Blanco":"Empate";setTimeout(()=>{alert(`üéØ ¬°Fin del juego!\nNegro: ${t} | Blanco: ${n}\n${"Empate"===a?"¬°Empate!":`¬°${a} gana!`}`),window.RankingSystem&&t>n&&window.RankingSystem.submitScore("reversi",10*t)},300)}()),i()}window.initReversiGame=function(e){t(e)}}(),function(){let e={artworks:[],elements:[],isPlaying:!1,container:null};function t(){e.container&&(e.container.classList.add("hidden"),e.isPlaying=!1,sessionStorage.setItem("naroa-intro-seen","true"),setTimeout(()=>{var t;null==(t=e.container)||t.remove(),e.container=null},1e3))}async function n(){if(sessionStorage.getItem("naroa-intro-seen"))return;const n=window.location.hash;n&&"#/"!==n&&"#"!==n?sessionStorage.setItem("naroa-intro-seen","true"):(await async function(){try{const t=await fetch("data/intro-artworks.json"),n=await t.json();e.artworks=n.artworks}catch(t){e.artworks=[{file:"amy-rocks.webp"},{file:"marilyn-rocks.webp"},{file:"johnny-rocks.webp"},{file:"james-rocks.webp"},{file:"starchild.webp"}]}}(),0!==e.artworks.length&&(function(){const n=document.createElement("div");n.id="naroa-intro",n.innerHTML='\n      <div class="intro-canvas">\n        <div class="intro-portraits"></div>\n        <div class="intro-title">\n          <h1 class="intro-name">NAROA GUTI√âRREZ GIL</h1>\n          <p class="intro-tagline">Hiperrealismo POP</p>\n        </div>\n        <button class="intro-skip" aria-label="Saltar intro">Entrar</button>\n      </div>\n      <style>\n        #naroa-intro {\n          position: fixed;\n          inset: 0;\n          z-index: 9999;\n          background: linear-gradient(180deg, #0a0a0f 0%, #1a1a2e 100%);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          opacity: 1;\n          transition: opacity 1s ease, visibility 0.5s;\n        }\n        #naroa-intro.hidden {\n          opacity: 0;\n          visibility: hidden;\n          pointer-events: none;\n        }\n        .intro-canvas {\n          width: 100%;\n          height: 100%;\n          position: relative;\n          overflow: hidden;\n        }\n        .intro-portraits {\n          position: absolute;\n          inset: 0;\n          perspective: 1500px;\n        }\n        .intro-portrait {\n          position: absolute;\n          opacity: 0;\n          transform: translateZ(-500px) scale(0.5);\n          transition: opacity 0.8s, transform 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);\n          filter: drop-shadow(0 20px 60px rgba(0,0,0,0.8));\n          will-change: transform, opacity;\n        }\n        .intro-portrait.visible {\n          opacity: 1;\n          transform: translateZ(0) scale(1);\n        }\n        .intro-portrait img {\n          max-width: 200px;\n          max-height: 280px;\n          object-fit: contain;\n        }\n        @media (min-width: 768px) {\n          .intro-portrait img {\n            max-width: 300px;\n            max-height: 400px;\n          }\n        }\n        .intro-title {\n          position: absolute;\n          bottom: 15%;\n          left: 50%;\n          transform: translateX(-50%);\n          text-align: center;\n          z-index: 10;\n          opacity: 0;\n          animation: fadeInUp 1.5s ease 2s forwards;\n        }\n        .intro-name {\n          font-family: \'Switzer\', sans-serif;\n          font-size: clamp(2rem, 8vw, 5rem);\n          font-weight: 300;\n          color: #ffd700;\n          text-shadow: 0 4px 30px rgba(255, 215, 0, 0.3);\n          margin: 0 0 0.5rem;\n          letter-spacing: 0.1em;\n        }\n        .intro-tagline {\n          font-family: \'Satoshi\', sans-serif;\n          font-size: clamp(0.9rem, 2vw, 1.3rem);\n          color: rgba(255,255,255,0.6);\n          margin: 0;\n          letter-spacing: 0.3em;\n          text-transform: uppercase;\n        }\n        .intro-skip {\n          position: absolute;\n          bottom: 5%;\n          left: 50%;\n          transform: translateX(-50%);\n          background: transparent;\n          border: 1px solid rgba(255,215,0,0.5);\n          color: #ffd700;\n          padding: 0.75rem 2.5rem;\n          font-size: 0.9rem;\n          letter-spacing: 0.2em;\n          cursor: pointer;\n          opacity: 0;\n          animation: fadeIn 1s ease 3s forwards;\n          transition: all 0.3s;\n        }\n        .intro-skip:hover {\n          background: rgba(255,215,0,0.1);\n          border-color: #ffd700;\n        }\n        @keyframes fadeInUp {\n          to { opacity: 1; transform: translateX(-50%) translateY(0); }\n          from { opacity: 0; transform: translateX(-50%) translateY(30px); }\n        }\n        @keyframes fadeIn {\n          to { opacity: 1; }\n        }\n        @keyframes floatPortrait {\n          0%, 100% { transform: translateY(0) rotate(var(--rot, 0deg)); }\n          50% { transform: translateY(-15px) rotate(calc(var(--rot, 0deg) + 2deg)); }\n        }\n        .intro-portrait.floating {\n          animation: floatPortrait 4s ease-in-out infinite;\n          animation-delay: var(--delay, 0s);\n        }\n      </style>\n    ',document.body.appendChild(n),e.container=n,n.querySelector(".intro-skip").addEventListener("click",t)}(),function(){const t=document.querySelector(".intro-portraits");if(!t)return;const n=[...e.artworks].sort(()=>Math.random()-.5);n.slice(0,Math.min(12,n.length)).forEach((n,a)=>{const i=document.createElement("div");i.className="intro-portrait";const o=80*Math.random()+10,s=60*Math.random()+15,r=20*(Math.random()-.5),c=.15*a;i.style.cssText=`\n        left: ${o}%;\n        top: ${s}%;\n        --rot: ${r}deg;\n        --delay: ${c+1}s;\n        z-index: ${Math.floor(10*Math.random())};\n      `;const l=document.createElement("img");l.src="img/artworks-intro/"+n.file,l.alt=n.subject||"Naroa artwork",l.loading="lazy",i.appendChild(l),t.appendChild(i),e.elements.push(i),l.onload=()=>{setTimeout(()=>{i.classList.add("visible"),setTimeout(()=>i.classList.add("floating"),800)},1e3*c)}})}(),e.isPlaying=!0,setTimeout(()=>{e.isPlaying&&t()},8e3)))}window.NaroaIntro={init:n,skip:t,replay:async()=>{sessionStorage.removeItem("naroa-intro-seen"),await n()}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}();const u={STORAGE_KEY:"naroa_arcade_rankings",MAX_ENTRIES:10,init(){return localStorage.getItem(this.STORAGE_KEY)||localStorage.setItem(this.STORAGE_KEY,JSON.stringify({})),this},getRankings(e){return JSON.parse(localStorage.getItem(this.STORAGE_KEY)||"{}")[e]||[]},isHighScore(e,t){const n=this.getRankings(e);return n.length<this.MAX_ENTRIES||t>n[n.length-1].score},addScore(e,t,n){const a=JSON.parse(localStorage.getItem(this.STORAGE_KEY)||"{}");a[e]||(a[e]=[]);const i={initials:t.toUpperCase().slice(0,3).padEnd(3,"_"),score:n,date:(new Date).toISOString().split("T")[0]};a[e].push(i),a[e].sort((e,t)=>t.score-e.score),a[e]=a[e].slice(0,this.MAX_ENTRIES),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(a));const o=a[e].findIndex(e=>e.initials===i.initials&&e.score===i.score&&e.date===i.date);return-1!==o?o+1:-1},clearGame(e){const t=JSON.parse(localStorage.getItem(this.STORAGE_KEY)||"{}");delete t[e],localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))},renderHTML(e,t=null){const n=this.getRankings(e),a=null!==t&&this.isHighScore(e,t);let i=`\n      <div class="arcade-leaderboard">\n        <div class="arcade-leaderboard__header">\n          <span class="arcade-leaderboard__title">üèÜ TOP 10</span>\n          <span class="arcade-leaderboard__game">${this.getGameName(e)}</span>\n        </div>\n        <div class="arcade-leaderboard__list">\n    `;return 0===n.length?i+='<div class="arcade-leaderboard__empty">NO HAY RECORDS</div>':n.forEach((e,t)=>{i+=`\n          <div class="arcade-leaderboard__entry ${t<3?"arcade-leaderboard__entry--top":""}">\n            <span class="arcade-leaderboard__rank">${0===t?"ü•á":1===t?"ü•à":2===t?"ü•â":`${t+1}.`}</span>\n            <span class="arcade-leaderboard__initials">${e.initials}</span>\n            <span class="arcade-leaderboard__score">${this.formatScore(e.score)}</span>\n          </div>\n        `}),i+="</div>",a&&(i+=`\n        <div class="arcade-leaderboard__new-highscore">\n          <span>¬°NUEVO R√âCORD!</span>\n          <input type="text" class="arcade-leaderboard__input" maxlength="3" placeholder="___" \n                 onkeyup="this.value = this.value.toUpperCase()">\n          <button class="arcade-leaderboard__submit" onclick="ArcadeLeaderboard.submitFromUI('${e}', ${t})">\n            GUARDAR\n          </button>\n        </div>\n      `),i+="</div>",i},submitFromUI(e,t){const n=document.querySelector(".arcade-leaderboard__input");if(n&&n.value.length>0){const a=this.addScore(e,n.value,t),i=document.querySelector(".arcade-leaderboard").parentElement;return i&&(i.innerHTML=this.renderHTML(e)),this.playSound("highscore"),a}return-1},formatScore:e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),getGameName:e=>({memory:"MEMORY",puzzle:"PUZZLE",snake:"SNAKE",breakout:"BREAKOUT",whack:"GOLPEA",simon:"SIM√ìN",quiz:"QUIZ",catch:"CATCH",collage:"COLLAGE",reinas:"REINAS",mica:"MICA",kintsugi:"KINTSUGI",pong:"PONG",reaction:"REACCI√ìN",typing:"TYPING",chess:"AJEDREZ",checkers:"DAMAS",connect4:"CONECTA4",reversi:"REVERSI"}[e]||e.toUpperCase()),playSound(e){},showModal(e,t=null){const n=document.createElement("div");n.className="arcade-modal-overlay",n.innerHTML=`\n      <div class="arcade-modal">\n        ${this.renderTournamentInfo()}\n        ${this.renderHTML(e,t)}\n        <button class="arcade-modal__close" onclick="this.closest('.arcade-modal-overlay').remove()">\n          CONTINUAR\n        </button>\n      </div>\n    `,document.body.appendChild(n)},tournaments:{calendar:[{date:"02-14",name:"üíù San Valent√≠n",prize:"Arte exclusivo firmado"},{date:"03-08",name:"üíú D√≠a de la Mujer",prize:"Print edici√≥n limitada"},{date:"04-23",name:"üìö D√≠a del Libro",prize:"Cat√°logo firmado"},{date:"05-15",name:"üé® D√≠a del Artista",prize:"Sesi√≥n con Naroa"},{date:"10-31",name:"üéÉ Halloween Art",prize:"Obra tem√°tica"},{date:"12-25",name:"üéÑ Navidad",prize:"Pack coleccionista"}],weeklyReset:0,monthlyReset:1},getActiveTournament(){const e=new Date,t=`${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,n=this.tournaments.calendar.find(e=>e.date===t);return n?{type:"special",name:n.name,prize:n.prize,endsIn:this.getTimeUntilMidnight()}:0===e.getDay()?{type:"weekly",name:"üèÜ Torneo Semanal",prize:"Menci√≥n en redes",endsIn:this.getTimeUntilMidnight()}:1===e.getDate()?{type:"monthly",name:"üëë Torneo Mensual",prize:"Postal firmada",endsIn:this.getTimeUntilMidnight()}:{type:"countdown",name:"Pr√≥ximo torneo",nextDate:this.getNextTournamentDate(),endsIn:null}},getTimeUntilMidnight(){const e=new Date,t=new Date(e);t.setHours(24,0,0,0);const n=t-e,a=Math.floor(n/36e5),i=Math.floor(n%36e5/6e4),o=Math.floor(n%6e4/1e3);return`${a.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},getNextTournamentDate(){const e=new Date,t=(7-e.getDay())%7||7,n=new Date(e);return n.setDate(e.getDate()+t),n.toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"short"})},renderTournamentInfo(){const e=this.getActiveTournament();return"countdown"===e.type?`\n        <div class="arcade-tournament-timer">\n          <div class="arcade-tournament-timer__label">${e.name}</div>\n          <div class="arcade-tournament-timer__time">${e.nextDate}</div>\n        </div>\n      `:`\n      <div class="arcade-tournament-timer" style="border-color: #ffd700;">\n        <div class="arcade-tournament-badge">¬°ACTIVO!</div>\n        <div class="arcade-tournament-timer__label">${e.name}</div>\n        <div class="arcade-tournament-timer__time" id="tournament-countdown">${e.endsIn}</div>\n        <div class="arcade-tournament-timer__prize">üéÅ Premio: ${e.prize}</div>\n      </div>\n    `},startCountdown(){setInterval(()=>{const e=document.getElementById("tournament-countdown");e&&(e.textContent=this.getTimeUntilMidnight())},1e3)}};u.init(),u.startCountdown(),window.ArcadeLeaderboard=u;const m={ctx:null,init(e){this.ctx=e},uiHover(){if(!this.ctx)return;const e=this.ctx.createOscillator(),t=this.ctx.createGain();e.type="sine",e.frequency.setValueAtTime(800,this.ctx.currentTime),e.frequency.exponentialRampToValueAtTime(400,this.ctx.currentTime+.05),t.gain.setValueAtTime(.1,this.ctx.currentTime),t.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+.1),e.connect(t),t.connect(this.ctx.destination),e.start(),e.stop(this.ctx.currentTime+.1)},uiClick(){if(!this.ctx)return;const e=this.ctx.createOscillator(),t=this.ctx.createGain();e.type="square",e.frequency.setValueAtTime(600,this.ctx.currentTime),e.frequency.exponentialRampToValueAtTime(200,this.ctx.currentTime+.08),t.gain.setValueAtTime(.15,this.ctx.currentTime),t.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+.15),e.connect(t),t.connect(this.ctx.destination),e.start(),e.stop(this.ctx.currentTime+.15)},success(){this.ctx&&[523.25,659.25,783.99,1046.5].forEach((e,t)=>{const n=this.ctx.createOscillator(),a=this.ctx.createGain();n.type="sine",n.frequency.value=e;const i=this.ctx.currentTime+.1*t;a.gain.setValueAtTime(0,i),a.gain.linearRampToValueAtTime(.15,i+.02),a.gain.exponentialRampToValueAtTime(.001,i+.3),n.connect(a),a.connect(this.ctx.destination),n.start(i),n.stop(i+.3)})},gameMove(){if(!this.ctx)return;const e=this.ctx.createOscillator(),t=this.ctx.createGain();e.type="triangle",e.frequency.setValueAtTime(440,this.ctx.currentTime),e.frequency.exponentialRampToValueAtTime(220,this.ctx.currentTime+.1),t.gain.setValueAtTime(.08,this.ctx.currentTime),t.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+.15),e.connect(t),t.connect(this.ctx.destination),e.start(),e.stop(this.ctx.currentTime+.15)},gameWin(){this.ctx&&[{freq:523.25,start:0,dur:.15},{freq:587.33,start:.15,dur:.15},{freq:659.25,start:.3,dur:.15},{freq:783.99,start:.45,dur:.3},{freq:1046.5,start:.75,dur:.5}].forEach(e=>{const t=this.ctx.createOscillator(),n=this.ctx.createGain();t.type="sine",t.frequency.value=e.freq;const a=this.ctx.currentTime+e.start;n.gain.setValueAtTime(0,a),n.gain.linearRampToValueAtTime(.2,a+.02),n.gain.setValueAtTime(.2,a+e.dur-.05),n.gain.exponentialRampToValueAtTime(.001,a+e.dur),t.connect(n),n.connect(this.ctx.destination),t.start(a),t.stop(a+e.dur)})},micaShimmer(e){this.ctx&&[220,330,440,550,660].forEach((t,n)=>{const a=this.ctx.createOscillator(),i=this.ctx.createGain(),o=this.ctx.createBiquadFilter();a.type="sine",a.frequency.value=t,a.detune.value=10*(Math.random()-.5),o.type="lowpass",o.frequency.value=2e3,o.Q.value=1,i.gain.setValueAtTime(0,this.ctx.currentTime),i.gain.linearRampToValueAtTime(.03,this.ctx.currentTime+.5),i.gain.setValueAtTime(.03,this.ctx.currentTime+3-1),i.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+3),a.connect(o),o.connect(i),e?i.connect(e):i.connect(this.ctx.destination),a.start(),a.stop(this.ctx.currentTime+3)})},artworkReveal(e){this.ctx&&[880,1318.51,1760].forEach((t,n)=>{const a=this.ctx.createOscillator(),i=this.ctx.createGain();a.type="sine",a.frequency.value=t;const o=this.ctx.currentTime+.05*n;i.gain.setValueAtTime(0,o),i.gain.linearRampToValueAtTime(.08/(n+1),o+.01),i.gain.exponentialRampToValueAtTime(.001,o+.8),a.connect(i),e?i.connect(e):i.connect(this.ctx.destination),a.start(o),a.stop(o+.8)})},createAmbientDrone(){if(!this.ctx)return null;const e=this.ctx.createGain();e.gain.value=.02;const t=[55,110,165,220].map(t=>{const n=this.ctx.createOscillator(),a=this.ctx.createGain(),i=this.ctx.createBiquadFilter();n.type="sine",n.frequency.value=t;const o=this.ctx.createOscillator(),s=this.ctx.createGain();return o.frequency.value=.1+.1*Math.random(),s.gain.value=.01*t,o.connect(s),s.connect(n.frequency),o.start(),i.type="lowpass",i.frequency.value=500,a.gain.value=.5,n.connect(i),i.connect(a),a.connect(e),{osc:n,lfo:o,gain:a}});return e.connect(this.ctx.destination),{start(){t.forEach(e=>e.osc.start())},stop(){t.forEach(e=>{e.osc.stop(),e.lfo.stop()})},setVolume(t){e.gain.value=t}}},transition(){if(!this.ctx)return;const e=this.ctx.createBufferSource(),t=this.ctx.createBuffer(1,.5*this.ctx.sampleRate,this.ctx.sampleRate),n=t.getChannelData(0);for(let o=0;o<n.length;o++)n[o]=2*Math.random()-1;e.buffer=t;const a=this.ctx.createBiquadFilter();a.type="bandpass",a.frequency.setValueAtTime(100,this.ctx.currentTime),a.frequency.exponentialRampToValueAtTime(2e3,this.ctx.currentTime+.2),a.frequency.exponentialRampToValueAtTime(100,this.ctx.currentTime+.4),a.Q.value=2;const i=this.ctx.createGain();i.gain.setValueAtTime(0,this.ctx.currentTime),i.gain.linearRampToValueAtTime(.1,this.ctx.currentTime+.1),i.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+.5),e.connect(a),a.connect(i),i.connect(this.ctx.destination),e.start()},highScore(){this.ctx&&[{freq:392,time:0},{freq:523.25,time:.1},{freq:659.25,time:.2},{freq:783.99,time:.3},{freq:1046.5,time:.5},{freq:1318.51,time:.7}].forEach(e=>{const t=this.ctx.createOscillator(),n=this.ctx.createGain();t.type="triangle",t.frequency.value=e.freq;const a=this.ctx.currentTime+e.time;n.gain.setValueAtTime(0,a),n.gain.linearRampToValueAtTime(.15,a+.02),n.gain.exponentialRampToValueAtTime(.001,a+.4),t.connect(n),n.connect(this.ctx.destination),t.start(a),t.stop(a+.4)})},createSopelaWind(){if(!this.ctx)return null;const e=2*this.ctx.sampleRate,t=this.ctx.createBuffer(1,e,this.ctx.sampleRate),n=t.getChannelData(0);for(let s=0;s<e;s++)n[s]=2*Math.random()-1;const a=this.ctx.createBufferSource();a.buffer=t,a.loop=!0;const i=this.ctx.createBiquadFilter();i.type="lowpass",i.frequency.value=400;const o=this.ctx.createGain();return o.gain.value=.08,a.connect(i),i.connect(o),o.connect(this.ctx.destination),{start:()=>a.start(),stop:()=>a.stop(),setVolume:e=>{o.gain.value=e},node:a}},heartbeat026(){if(!this.ctx)return;const e=this.ctx.currentTime,t=this.ctx.createOscillator();t.type="sine",t.frequency.setValueAtTime(60,e),t.frequency.exponentialRampToValueAtTime(40,e+.1);const n=this.ctx.createGain();n.gain.setValueAtTime(.4,e),n.gain.exponentialRampToValueAtTime(.001,e+.15),t.connect(n),n.connect(this.ctx.destination),t.start(e),t.stop(e+.2);const a=this.ctx.createOscillator();a.type="sine",a.frequency.setValueAtTime(80,e+.25),a.frequency.exponentialRampToValueAtTime(40,e+.35);const i=this.ctx.createGain();i.gain.setValueAtTime(.3,e+.25),i.gain.exponentialRampToValueAtTime(.001,e+.4),a.connect(i),i.connect(this.ctx.destination),a.start(e+.25),a.stop(e+.5)},paperCrumple(e,t,n){if(!this.ctx)return;const a=this.ctx.createGain();a.gain.setValueAtTime(.25,this.ctx.currentTime),a.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+.3);const i=this.ctx.createBiquadFilter();i.type="bandpass",i.frequency.value=800+1e3*Math.random(),i.Q.value=1;const o=this.ctx.createBufferSource(),s=this.ctx.createBuffer(1,.3*this.ctx.sampleRate,this.ctx.sampleRate),r=s.getChannelData(0);for(let c=0;c<r.length;c++)r[c]=(2*Math.random()-1)*Math.exp(-c/(.1*r.length));o.buffer=s,o.connect(i),i.connect(a),n?(a.connect(n),n.connect(this.ctx.destination)):a.connect(this.ctx.destination),o.start()},tear(e){if(!this.ctx)return;const t=this.ctx.createOscillator();t.type="sawtooth",t.frequency.setValueAtTime(100,this.ctx.currentTime),t.frequency.linearRampToValueAtTime(50,this.ctx.currentTime+.2);const n=this.ctx.createGain();n.gain.setValueAtTime(.2,this.ctx.currentTime),n.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+.2);const a=this.ctx.createBiquadFilter();a.type="lowpass",a.frequency.setValueAtTime(800,this.ctx.currentTime),a.frequency.linearRampToValueAtTime(100,this.ctx.currentTime+.2),t.connect(a),a.connect(n),e?(n.connect(e),e.connect(this.ctx.destination)):n.connect(this.ctx.destination),t.start(),t.stop(this.ctx.currentTime+.2)},jackpot(){if(!this.ctx)return;const e=this.ctx.currentTime;[293.66,369.99,440,554.37].forEach((t,n)=>{const a=this.ctx.createOscillator();a.type="sine",a.frequency.value=t;const i=this.ctx.createGain();i.gain.setValueAtTime(0,e),i.gain.linearRampToValueAtTime(.2,e+.1+.05*n),i.gain.exponentialRampToValueAtTime(.001,e+2),a.connect(i),i.connect(this.ctx.destination),a.start(e),a.stop(e+2)})},terminalClick(e){if(!this.ctx)return;const t=this.ctx.createOscillator();t.type="square",t.frequency.value=800;const n=this.ctx.createGain();n.gain.setValueAtTime(.08,this.ctx.currentTime),n.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+.05),t.connect(n),e?(n.connect(e),e.connect(this.ctx.destination)):n.connect(this.ctx.destination),t.start(),t.stop(this.ctx.currentTime+.05)}};window.AudioSynth=m;const h={ctx:null,masterGain:null,compressor:null,reverb:null,sources:new Map,listener:null,isEnabled:!0,isMuted:!1,library:{ambient:{gallery:"audio/ambient-gallery.mp3",nature:"audio/ambient-nature.mp3",minimal:"audio/ambient-minimal.mp3"},ui:{hover:"audio/ui-hover.mp3",click:"audio/ui-click.mp3",success:"audio/ui-success.mp3",transition:"audio/ui-transition.mp3"},game:{start:"audio/game-start.mp3",win:"audio/game-win.mp3",score:"audio/game-score.mp3",move:"audio/game-move.mp3"},spatial:{artwork:"audio/artwork-reveal.mp3",mica:"audio/mica-shimmer.mp3"}},async init(){try{return this.ctx=new(window.AudioContext||window.webkitAudioContext)({sampleRate:48e3,latencyHint:"interactive"}),this.compressor=this.ctx.createDynamicsCompressor(),this.compressor.threshold.value=-24,this.compressor.knee.value=30,this.compressor.ratio.value=12,this.compressor.attack.value=.003,this.compressor.release.value=.25,this.masterGain=this.ctx.createGain(),this.masterGain.gain.value=.7,this.reverb=await this.createReverb(),this.reverb.connect(this.compressor),this.compressor.connect(this.masterGain),this.masterGain.connect(this.ctx.destination),window.AudioSynth&&(AudioSynth.init(this.ctx),this.synth=AudioSynth),this.setupListener(),this.createUI(),this.startAmbient(),!0}catch(e){return!1}},startAmbient(){this.synth&&!this.isMuted&&(this.ambientDrone=this.synth.createAmbientDrone(),this.ambientDrone&&this.ambientDrone.start())},stopAmbientDrone(){this.ambientDrone&&(this.ambientDrone.stop(),this.ambientDrone=null)},setupListener(){this.ctx.listener.positionX?(this.ctx.listener.positionX.value=0,this.ctx.listener.positionY.value=0,this.ctx.listener.positionZ.value=0,this.ctx.listener.forwardX.value=0,this.ctx.listener.forwardY.value=0,this.ctx.listener.forwardZ.value=-1,this.ctx.listener.upX.value=0,this.ctx.listener.upY.value=1,this.ctx.listener.upZ.value=0):(this.ctx.listener.setPosition(0,0,0),this.ctx.listener.setOrientation(0,0,-1,0,1,0)),document.addEventListener("mousemove",e=>{if(!this.ctx)return;const t=2*(e.clientX/window.innerWidth-.5),n=-2*(e.clientY/window.innerHeight-.5);this.ctx.listener.forwardX&&(this.ctx.listener.forwardX.value=.5*t,this.ctx.listener.forwardY.value=.3*n)})},async createReverb(){const e=this.ctx.createConvolver(),t=this.ctx.sampleRate,n=2.5*t,a=this.ctx.createBuffer(2,n,t);for(let i=0;i<2;i++){const e=a.getChannelData(i);for(let a=0;a<n;a++){const n=Math.exp(-a/(.8*t));e[a]=(2*Math.random()-1)*n}}return e.buffer=a,e},create3DPanner(e=0,t=0,n=-5){const a=this.ctx.createPanner();return a.panningModel="HRTF",a.distanceModel="inverse",a.refDistance=1,a.maxDistance=100,a.rolloffFactor=1,a.coneInnerAngle=360,a.coneOuterAngle=360,a.coneOuterGain=0,a.positionX?(a.positionX.value=e,a.positionY.value=t,a.positionZ.value=n):a.setPosition(e,t,n),a},async loadBuffer(e){try{const t=await fetch(e),n=await t.arrayBuffer();return await this.ctx.decodeAudioData(n)}catch(t){return null}},async play3D(e,t={}){if(!this.ctx||!this.isEnabled||this.isMuted)return null;"suspended"===this.ctx.state&&await this.ctx.resume();const{x:n=0,y:a=0,z:i=-5,volume:o=.5,loop:s=!1,reverb:r=.3,animate:c=null}=t,l=this.ctx.createBufferSource(),d=await this.loadBuffer(e);if(!d)return null;l.buffer=d,l.loop=s;const u=this.ctx.createGain();u.gain.value=o;const m=this.create3DPanner(n,a,i),h=this.ctx.createGain(),g=this.ctx.createGain();h.gain.value=1-r,g.gain.value=r,l.connect(u),u.connect(m),m.connect(h),m.connect(g),h.connect(this.compressor),g.connect(this.reverb),c&&this.animatePanner(m,c),l.start();const p=Date.now().toString();return this.sources.set(p,{source:l,gainNode:u,panner:m}),l.onended=()=>{this.sources.delete(p)},p},animatePanner(e,{duration:t=2e3,toX:n=0,toY:a=0,toZ:i=0}){var o,s,r;const c=(null==(o=e.positionX)?void 0:o.value)||0,l=(null==(s=e.positionY)?void 0:s.value)||0,d=(null==(r=e.positionZ)?void 0:r.value)||0,u=performance.now(),m=()=>{const o=performance.now()-u,s=Math.min(o/t,1),r=this.easeInOutCubic(s);e.positionX&&(e.positionX.value=c+(n-c)*r,e.positionY.value=l+(a-l)*r,e.positionZ.value=d+(i-d)*r),s<1&&requestAnimationFrame(m)};requestAnimationFrame(m)},easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,async playUI(e,t=0){if(!this.ctx||!this.isEnabled||this.isMuted)return;const n=this.library.ui[e];if(!n)return;"suspended"===this.ctx.state&&await this.ctx.resume();const a=await this.loadBuffer(n);if(!a)return;const i=this.ctx.createBufferSource();i.buffer=a;const o=this.ctx.createGain();o.gain.value=.4;const s=this.ctx.createStereoPanner();s.pan.value=t,i.connect(o),o.connect(s),s.connect(this.masterGain),i.start()},async playAmbient(e="gallery"){if(!this.ctx||!this.isEnabled)return;this.stopAmbient();const t=this.library.ambient[e];if(!t)return;const n=await this.play3D(t,{x:0,y:0,z:0,volume:.15,loop:!0,reverb:.5});this.ambientId=n},stopAmbient(){if(this.ambientId&&this.sources.has(this.ambientId)){const{source:e}=this.sources.get(this.ambientId);e.stop(),this.sources.delete(this.ambientId)}},playArtworkReveal(e){if(!e)return;const t=e.getBoundingClientRect(),n=(t.left+t.width/2)/window.innerWidth*4-2,a=(t.top+t.height/2)/window.innerHeight*-2+1;this.play3D(this.library.spatial.artwork,{x:n,y:a,z:-3,volume:.3,reverb:.4})},playMicaShimmer(){this.play3D(this.library.spatial.mica,{x:-2,y:0,z:-4,volume:.25,reverb:.6,animate:{duration:3e3,toX:2,toY:0,toZ:-4}})},createUI(){const e=document.createElement("div");e.className="audio-controls",e.innerHTML='\n      <button class="audio-btn audio-btn--toggle" id="audio-toggle" title="Toggle Audio">\n        <span class="audio-icon">üîä</span>\n      </button>\n      <div class="audio-indicator" id="audio-indicator"></div>\n    ',document.body.appendChild(e),document.getElementById("audio-toggle").addEventListener("click",()=>{this.isMuted=!this.isMuted,this.updateUI()}),this.updateUI()},updateUI(){const e=document.querySelector(".audio-icon"),t=document.getElementById("audio-indicator");e&&(e.textContent=this.isMuted?"üîá":"üîä"),t&&(t.className="audio-indicator "+(this.isMuted?"":"audio-indicator--active"))},toggle(){this.isMuted=!this.isMuted,this.updateUI()},setVolume(e){this.masterGain&&(this.masterGain.gain.value=Math.max(0,Math.min(1,e)))}};document.addEventListener("click",async function e(){await h.init(),document.removeEventListener("click",e)},{once:!0}),window.ImmersiveAudio=h;const g={initialized:!1,init(){if(this.initialized)return;this.initialized=!0;const e=setInterval(()=>{var t;(null==(t=window.ImmersiveAudio)?void 0:t.ctx)&&window.AudioSynth&&(clearInterval(e),this.setupHooks())},100)},setupHooks(){this.hookGameCards(),this.hookGalleryItems(),this.hookNavigation(),this.hookButtons(),this.hookGameEvents(),this.hookScrollReveals(),this.hookAboutSection(),this.hookTissueCards(),this.hookTournamentEvents(),this.hookArtworkTear()},hookGameCards(){document.querySelectorAll(".game-card").forEach(e=>{e.addEventListener("mouseenter",t=>{window.AudioSynth&&!ImmersiveAudio.isMuted&&AudioSynth.uiHover(),e.style.animation="card-pulse 0.3s ease",setTimeout(()=>e.style.animation="",300)}),e.addEventListener("click",()=>{window.AudioSynth&&!ImmersiveAudio.isMuted&&AudioSynth.uiClick()})})},hookGalleryItems(){const e=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.getBoundingClientRect().left/window.innerWidth*2-1;if(window.AudioSynth&&!ImmersiveAudio.isMuted){const e=ImmersiveAudio.create3DPanner(3*t,0,-4);AudioSynth.artworkReveal(e)}}})},{threshold:.5});document.querySelectorAll(".gallery-item, .artwork-card").forEach(t=>{e.observe(t)})},hookNavigation(){document.querySelectorAll(".nav__menu a, .nav__logo").forEach(e=>{e.addEventListener("mouseenter",()=>{window.AudioSynth&&!ImmersiveAudio.isMuted&&AudioSynth.uiHover()}),e.addEventListener("click",()=>{window.AudioSynth&&!ImmersiveAudio.isMuted&&AudioSynth.transition()})})},hookButtons(){document.querySelectorAll('button, .btn, .cta-btn, [role="button"]').forEach(e=>{e.classList.contains("audio-btn")||(e.addEventListener("mouseenter",()=>{window.AudioSynth&&!ImmersiveAudio.isMuted&&AudioSynth.uiHover()}),e.addEventListener("click",()=>{window.AudioSynth&&!ImmersiveAudio.isMuted&&AudioSynth.uiClick()}))})},hookGameEvents(){document.addEventListener("game:start",()=>{window.AudioSynth&&!ImmersiveAudio.isMuted&&AudioSynth.success()}),document.addEventListener("game:move",()=>{window.AudioSynth&&!ImmersiveAudio.isMuted&&AudioSynth.gameMove()}),document.addEventListener("game:win",()=>{window.AudioSynth&&!ImmersiveAudio.isMuted&&AudioSynth.gameWin()}),document.addEventListener("game:highscore",()=>{window.AudioSynth&&!ImmersiveAudio.isMuted&&AudioSynth.highScore()})},hookScrollReveals(){const e=new IntersectionObserver(e=>{e.forEach(e=>{var t;if(e.isIntersecting&&e.target.classList.contains("reveal")&&(null==(t=window.ImmersiveAudio)?void 0:t.ambientDrone)&&!ImmersiveAudio.isMuted){const e=ImmersiveAudio.ambientDrone;e.setVolume&&(e.setVolume(.04),setTimeout(()=>e.setVolume(.02),1e3))}})},{threshold:.3});document.querySelectorAll(".reveal, section").forEach(t=>{e.observe(t)})},playMicaEffect(){if(window.AudioSynth&&!ImmersiveAudio.isMuted){const e=ImmersiveAudio.create3DPanner(-2,0,-4);AudioSynth.micaShimmer(e),ImmersiveAudio.animatePanner(e,{duration:3e3,toX:2,toY:0,toZ:-4})}},hookAboutSection(){const e=document.querySelector("#about, .about-section");e&&new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&window.AudioSynth&&!(null==ImmersiveAudio?void 0:ImmersiveAudio.isMuted)&&AudioSynth.heartbeat026()})},{threshold:.6}).observe(e)},hookTissueCards(){document.querySelectorAll('.tissukaldeko-card, [data-material="paper"]').forEach(e=>{e.addEventListener("mouseenter",t=>{var n;if(window.AudioSynth&&!(null==ImmersiveAudio?void 0:ImmersiveAudio.isMuted)){const t=e.getBoundingClientRect(),a=null==(n=null==ImmersiveAudio?void 0:ImmersiveAudio.create3DPanner)?void 0:n.call(ImmersiveAudio,t.left/window.innerWidth*4-2,0,-3);AudioSynth.paperCrumple(t.x,t.y,a)}})})},hookTournamentEvents(){document.addEventListener("tournament:jackpot",()=>{window.AudioSynth&&!(null==ImmersiveAudio?void 0:ImmersiveAudio.isMuted)&&AudioSynth.jackpot()}),document.addEventListener("score:top1",()=>{window.AudioSynth&&!(null==ImmersiveAudio?void 0:ImmersiveAudio.isMuted)&&AudioSynth.jackpot()})},startSopelaAmbient(){!window.AudioSynth||(null==ImmersiveAudio?void 0:ImmersiveAudio.isMuted)||this.sopelaWind||(this.sopelaWind=AudioSynth.createSopelaWind(),this.sopelaWind&&this.sopelaWind.start())},stopSopelaAmbient(){this.sopelaWind&&(this.sopelaWind.stop(),this.sopelaWind=null)},hookArtworkTear(){document.querySelectorAll(".artwork-frame, .gallery-tear-effect").forEach(e=>{e.addEventListener("click",()=>{var e;if(window.AudioSynth&&!(null==ImmersiveAudio?void 0:ImmersiveAudio.isMuted)){const t=null==(e=null==ImmersiveAudio?void 0:ImmersiveAudio.create3DPanner)?void 0:e.call(ImmersiveAudio,0,0,-2);AudioSynth.tear(t)}})})}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>g.init()):g.init(),window.addEventListener("hashchange",()=>{setTimeout(()=>g.init(),100)}),window.AudioHooks=g;const p={analyser:null,dataArray:null,isActive:!1,init(){var e;(null==(e=window.ImmersiveAudio)?void 0:e.ctx)?(this.analyser=ImmersiveAudio.ctx.createAnalyser(),this.analyser.fftSize=256,this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),ImmersiveAudio.masterGain.connect(this.analyser),this.isActive=!0):setTimeout(()=>this.init(),500)},getLevel(){return this.analyser&&this.isActive?(this.analyser.getByteFrequencyData(this.dataArray),this.dataArray.reduce((e,t)=>e+t,0)/(255*this.dataArray.length)):0},getBass(){return this.analyser&&this.isActive?(this.analyser.getByteFrequencyData(this.dataArray),this.dataArray.slice(0,10).reduce((e,t)=>e+t,0)/2550):0},getHighs(){return this.analyser&&this.isActive?(this.analyser.getByteFrequencyData(this.dataArray),this.dataArray.slice(-20).reduce((e,t)=>e+t,0)/5100):0},applyReactiveEffects(){if(!this.isActive||ImmersiveAudio.isMuted)return;this.getLevel();const e=this.getBass(),t=document.querySelector(".hero");if(t){const n=.1+.3*e;t.style.setProperty("--audio-glow",n)}e>.6&&document.querySelectorAll(".game-card").forEach(t=>{t.style.transform=`scale(${1+.02*e})`,setTimeout(()=>t.style.transform="",100)}),requestAnimationFrame(()=>this.applyReactiveEffects())},startReactive(){this.isActive||this.init(),this.applyReactiveEffects()}};document.addEventListener("click",()=>{setTimeout(()=>{p.init(),p.startReactive()},1e3)},{once:!0}),window.AudioVisualSync=p;const v={initialized:!1,lightbox:null,cursor:null,currentIndex:0,artworks:[],observer:null,revealObserver:null,rafId:null,zoom:{scale:1,panning:!1,pointX:0,pointY:0,startX:0,startY:0,translateX:0,translateY:0},touch:{startX:0,startY:0,lastX:0,lastY:0,startDistance:0,startScale:1,isPinching:!1},parallax:{ticking:!1,mouseX:0,mouseY:0,targetX:0,targetY:0},init(){this.initialized||(this.initialized=!0,this.setupLazyLoading(),this.setupRevealAnimations(),this.setupLightbox(),this.setupCinematicScroll(),this.setupParallax(),this.setupKeyboardNav(),this.setupCustomCursor(),this.setupMouseTracking(),this.setupAdjacentPreload())},setupLazyLoading(){const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target;this.loadImage(n),e.unobserve(n)}})},{root:null,rootMargin:"300px 0px",threshold:0});document.querySelectorAll(".gallery-lazy img[data-src]").forEach(t=>{e.observe(t)})},loadImage(e){const t=e.dataset.src,n=e.dataset.srcset;e.style.filter="blur(10px)",e.style.transform="scale(1.05)";const a=new Image;a.onload=()=>{var a,i,o,s;if(e.src=t,n&&(e.srcset=n),requestAnimationFrame(()=>{e.style.filter="blur(5px)",setTimeout(()=>{e.style.filter="blur(2px)",setTimeout(()=>{e.classList.add("loaded"),e.style.filter="blur(0)",e.style.transform="scale(1)"},100)},100)}),window.AudioSynth&&!(null==(a=window.ImmersiveAudio)?void 0:a.isMuted)){const t=e.getBoundingClientRect().left/window.innerWidth*2-1,n=null==(o=null==(i=window.ImmersiveAudio)?void 0:i.create3DPanner)?void 0:o.call(i,3*t,0,-4);null==(s=AudioSynth.artworkReveal)||s.call(AudioSynth,n)}},a.onerror=()=>{e.classList.add("loaded"),e.style.filter="blur(0)"},a.src=t},setupRevealAnimations(){this.revealObserver=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.intersectionRatio;e.isIntersecting?t>=.25?(e.target.classList.add("visible"),e.target.dataset.revealProgress="full"):t>=.1&&(e.target.style.opacity=Math.max(.3,t),e.target.dataset.revealProgress="partial"):e.boundingClientRect.top>window.innerHeight&&e.target.classList.remove("visible")})},{threshold:[0,.1,.25,.5,.75,1],rootMargin:"-50px 0px"}),document.querySelectorAll(".gallery-reveal, .gallery-massive__item").forEach(e=>{this.revealObserver.observe(e)})},setupLightbox(){this.lightbox=document.createElement("div"),this.lightbox.className="gallery-lightbox",this.lightbox.setAttribute("role","dialog"),this.lightbox.setAttribute("aria-modal","true"),this.lightbox.setAttribute("aria-label","Visor de im√°genes"),this.lightbox.innerHTML='\n      <div class="gallery-lightbox__close" role="button" aria-label="Cerrar" tabindex="0"></div>\n      <div class="gallery-lightbox__nav gallery-lightbox__nav--prev" role="button" aria-label="Imagen anterior" tabindex="0"></div>\n      <div class="gallery-lightbox__nav gallery-lightbox__nav--next" role="button" aria-label="Imagen siguiente" tabindex="0"></div>\n      <div class="gallery-lightbox__counter"><span class="current">1</span> / <span class="total">1</span></div>\n      <div class="gallery-lightbox__container">\n        <img class="gallery-lightbox__image" src="" alt="" draggable="false">\n      </div>\n      <div class="gallery-lightbox__zoom-hint">Doble toque para zoom</div>\n    ',document.body.appendChild(this.lightbox),this.artworks=Array.from(document.querySelectorAll(".gallery-massive__item, .gallery__item, .gallery-hero__artwork")),this.lightbox.querySelector(".total").textContent=this.artworks.length,this.artworks.forEach((e,t)=>{e.addEventListener("click",()=>this.openLightbox(t)),e.setAttribute("tabindex","0"),e.setAttribute("role","button"),e.addEventListener("keydown",e=>{"Enter"===e.key&&this.openLightbox(t)})});const e=this.lightbox.querySelector(".gallery-lightbox__close");e.addEventListener("click",()=>this.closeLightbox()),e.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||this.closeLightbox()}),this.lightbox.addEventListener("click",e=>{e.target===this.lightbox&&this.closeLightbox()});const t=this.lightbox.querySelector(".gallery-lightbox__nav--prev"),n=this.lightbox.querySelector(".gallery-lightbox__nav--next");t.addEventListener("click",e=>{e.stopPropagation(),this.prevImage()}),n.addEventListener("click",e=>{e.stopPropagation(),this.nextImage()}),this.setupTouchGestures(),this.setupZoomHandlers()},openLightbox(e){var t,n;this.currentIndex=e,this.updateLightboxImage(!1),this.lightbox.classList.add("active"),document.body.style.overflow="hidden",this.lightbox.querySelector(".gallery-lightbox__close").focus(),this.preloadAdjacent(),window.AudioSynth&&!(null==(t=window.ImmersiveAudio)?void 0:t.isMuted)&&(null==(n=AudioSynth.success)||n.call(AudioSynth))},closeLightbox(){var e,t;this.lightbox.classList.remove("active"),document.body.style.overflow="",this.resetZoom(),this.artworks[this.currentIndex]&&this.artworks[this.currentIndex].focus(),window.AudioSynth&&!(null==(e=window.ImmersiveAudio)?void 0:e.isMuted)&&(null==(t=AudioSynth.transition)||t.call(AudioSynth))},nextImage(){this.currentIndex=(this.currentIndex+1)%this.artworks.length,this.updateLightboxImage(!0),this.preloadAdjacent()},prevImage(){this.currentIndex=(this.currentIndex-1+this.artworks.length)%this.artworks.length,this.updateLightboxImage(!0),this.preloadAdjacent()},updateLightboxImage(e=!0){var t,n;const a=this.artworks[this.currentIndex],i=null==a?void 0:a.querySelector("img"),o=this.lightbox.querySelector(".gallery-lightbox__image");this.lightbox.querySelector(".current").textContent=this.currentIndex+1,i&&(e?(o.style.opacity="0",o.style.transform="scale(0.9) translateX(-20px)",o.style.filter="blur(10px)",setTimeout(()=>{o.src=i.dataset.hires||i.src,o.alt=i.alt,o.style.transform="scale(0.9) translateX(20px)",requestAnimationFrame(()=>{o.style.opacity="1",o.style.transform="scale(1) translateX(0)",o.style.filter="blur(0)"})},200)):(o.src=i.dataset.hires||i.src,o.alt=i.alt),window.AudioSynth&&!(null==(t=window.ImmersiveAudio)?void 0:t.isMuted)&&(null==(n=AudioSynth.gameMove)||n.call(AudioSynth))),this.resetZoom()},setupTouchGestures(){this.lightbox.querySelector(".gallery-lightbox__container");let e=0,t=!1;this.lightbox.addEventListener("touchstart",n=>{e=Date.now(),t=!1,1===n.touches.length?(this.touch.startX=n.touches[0].clientX,this.touch.startY=n.touches[0].clientY,this.touch.lastX=this.touch.startX,this.touch.lastY=this.touch.startY,this.zoom.scale>1&&(this.zoom.panning=!0,this.zoom.startX=this.touch.startX-this.zoom.translateX,this.zoom.startY=this.touch.startY-this.zoom.translateY)):2===n.touches.length&&(this.touch.isPinching=!0,this.touch.startDistance=this.getPinchDistance(n.touches),this.touch.startScale=this.zoom.scale)},{passive:!0}),this.lightbox.addEventListener("touchmove",e=>{var n,a;if(t=!0,1===e.touches.length&&this.zoom.panning)e.preventDefault(),this.zoom.translateX=e.touches[0].clientX-this.zoom.startX,this.zoom.translateY=e.touches[0].clientY-this.zoom.startY,this.applyZoomTransform();else if(2===e.touches.length&&this.touch.isPinching){e.preventDefault();const t=this.getPinchDistance(e.touches),n=Math.min(Math.max(this.touch.startScale*(t/this.touch.startDistance),1),4);this.setZoom(n)}this.touch.lastX=null==(n=e.touches[0])?void 0:n.clientX,this.touch.lastY=null==(a=e.touches[0])?void 0:a.clientY},{passive:!1}),this.lightbox.addEventListener("touchend",n=>{const a=Date.now()-e,i=this.touch.lastX-this.touch.startX,o=this.touch.lastY-this.touch.startY;n.touches.length<2&&(this.touch.isPinching=!1),0===n.touches.length&&(this.zoom.panning=!1),1===this.zoom.scale&&t&&a<300&&(Math.abs(i)>Math.abs(o)&&Math.abs(i)>50?i>0?this.prevImage():this.nextImage():o>100&&this.closeLightbox()),!t&&a<200&&(this.lastTap&&Date.now()-this.lastTap<300&&(this.zoom.scale>1?this.resetZoom():this.setZoom(2.5)),this.lastTap=Date.now())},{passive:!0})},getPinchDistance(e){const t=e[0].clientX-e[1].clientX,n=e[0].clientY-e[1].clientY;return Math.sqrt(t*t+n*n)},setupZoomHandlers(){this.lightbox.addEventListener("wheel",e=>{if(e.ctrlKey||e.metaKey){e.preventDefault();const t=e.deltaY>0?.9:1.1,n=Math.min(Math.max(this.zoom.scale*t,1),4);this.setZoom(n)}},{passive:!1});const e=this.lightbox.querySelector(".gallery-lightbox__image");e.addEventListener("mousedown",t=>{this.zoom.scale>1&&(t.preventDefault(),this.zoom.panning=!0,this.zoom.startX=t.clientX-this.zoom.translateX,this.zoom.startY=t.clientY-this.zoom.translateY,e.classList.add("is-zoomed"))}),window.addEventListener("mousemove",e=>{this.zoom.panning&&(this.zoom.translateX=e.clientX-this.zoom.startX,this.zoom.translateY=e.clientY-this.zoom.startY,this.applyZoomTransform())}),window.addEventListener("mouseup",()=>{this.zoom.panning=!1})},setZoom(e){this.zoom.scale=e;const t=this.lightbox.querySelector(".gallery-lightbox__image");e>1?(t.classList.add("is-zoomed"),this.lightbox.style.cursor="grab"):this.resetZoom(),this.applyZoomTransform()},resetZoom(){this.zoom.scale=1,this.zoom.translateX=0,this.zoom.translateY=0,this.zoom.panning=!1;const e=this.lightbox.querySelector(".gallery-lightbox__image");e.classList.remove("is-zoomed"),e.style.transform="",this.lightbox.style.cursor=""},applyZoomTransform(){this.lightbox.querySelector(".gallery-lightbox__image").style.transform=`translate(${this.zoom.translateX}px, ${this.zoom.translateY}px) scale(${this.zoom.scale})`},setupCinematicScroll(){const e=document.querySelector(".gallery-cinematic");if(!e)return;e.querySelectorAll(".gallery-cinematic__slide");const t=e.querySelectorAll(".gallery-cinematic__dot");let n;e.addEventListener("scroll",()=>{clearTimeout(n),n=setTimeout(()=>{const n=e.scrollLeft,a=e.offsetWidth,i=Math.round(n/a);t.forEach((e,t)=>{e.classList.toggle("active",t===i)})},50)},{passive:!0}),t.forEach((t,n)=>{t.addEventListener("click",()=>{e.scrollTo({left:n*e.offsetWidth,behavior:"smooth"})})});let a=!1,i=0,o=0;e.addEventListener("touchstart",()=>{a=!0,i=e.scrollLeft,o=Date.now()},{passive:!0}),e.addEventListener("touchend",()=>{if(!a)return;a=!1;const t=e.scrollLeft-i,n=Date.now()-o;if(Math.abs(t/n)<.5){const t=e.offsetWidth,n=Math.round(e.scrollLeft/t);e.scrollTo({left:n*t,behavior:"smooth"})}},{passive:!0})},setupParallax(){const e=document.querySelector(".gallery-parallax");if(!e)return;const t=e.querySelectorAll(".gallery-parallax__layer"),n=()=>{const e=window.scrollY,n=window.innerHeight;t.forEach((t,a)=>{const i=parseFloat(t.style.getPropertyValue("--parallax-speed"))||1-.25*a,o=t.getBoundingClientRect();if(o.top<n&&o.bottom>0){const n=e*i*.1;t.style.transform=`translateY(${n}px)`}}),this.parallax.ticking=!1};window.addEventListener("scroll",()=>{this.parallax.ticking||(this.rafId=requestAnimationFrame(n),this.parallax.ticking=!0)},{passive:!0}),n()},setupMouseTracking(){document.querySelectorAll(".gallery-massive__item, .gallery-hero__artwork").forEach(e=>{let t=null,n=0,a=0,i=0,o=0;const s=()=>{i+=.1*(n-i),o+=.1*(a-o);const r=e.querySelector("img");r&&(r.style.transform=`perspective(1000px) rotateX(${i}deg) rotateY(${o}deg) scale(1.02)`),(Math.abs(n-i)>.01||Math.abs(a-o)>.01)&&(t=requestAnimationFrame(s))};e.addEventListener("mousemove",i=>{const o=e.getBoundingClientRect(),r=i.clientX-o.left,c=i.clientY-o.top,l=o.width/2,d=o.height/2;a=(r-l)/l*10,n=-(c-d)/d*10,t||(t=requestAnimationFrame(s))}),e.addEventListener("mouseleave",()=>{n=0,a=0,setTimeout(()=>{t&&(cancelAnimationFrame(t),t=null);const n=e.querySelector("img");n&&(n.style.transform="")},300)})})},setupCustomCursor(){if(window.matchMedia("(pointer: coarse)").matches)return;this.cursor=document.createElement("div"),this.cursor.className="gallery-cursor",this.cursor.textContent="Ver",document.body.appendChild(this.cursor);let e=0,t=0,n=0,a=0,i=null,o=!1;const s=()=>{e+=.15*(n-e),t+=.15*(a-t),this.cursor.style.left=e-40+"px",this.cursor.style.top=t-40+"px",o&&(i=requestAnimationFrame(s))};document.querySelectorAll(".gallery-massive__item, .gallery-hero__artwork").forEach(e=>{e.addEventListener("mouseenter",()=>{this.cursor.classList.add("visible","gallery-cursor--zoom"),this.cursor.textContent="Ver",o=!0,i||(i=requestAnimationFrame(s))}),e.addEventListener("mouseleave",()=>{this.cursor.classList.remove("visible"),o=!1,i&&(cancelAnimationFrame(i),i=null)})}),document.addEventListener("mousemove",e=>{n=e.clientX,a=e.clientY},{passive:!0})},setupKeyboardNav(){document.addEventListener("keydown",e=>{if(this.lightbox.classList.contains("active"))switch(e.key){case"Escape":e.preventDefault(),this.closeLightbox();break;case"ArrowRight":case"ArrowDown":e.preventDefault(),this.nextImage();break;case"ArrowLeft":case"ArrowUp":e.preventDefault(),this.prevImage();break;case"+":case"=":e.preventDefault(),this.setZoom(Math.min(1.5*this.zoom.scale,4));break;case"-":e.preventDefault(),this.setZoom(Math.max(this.zoom.scale/1.5,1));break;case"0":e.preventDefault(),this.resetZoom();break;case"Home":e.preventDefault(),this.currentIndex=0,this.updateLightboxImage(!0);break;case"End":e.preventDefault(),this.currentIndex=this.artworks.length-1,this.updateLightboxImage(!0)}const t=document.activeElement;if(null==t?void 0:t.classList.contains("gallery-massive__item")){const n=Array.from(document.querySelectorAll(".gallery-massive__item")),a=n.indexOf(t),i=window.innerWidth>1024?4:window.innerWidth>768?3:2;switch(e.key){case"ArrowRight":e.preventDefault(),n[a+1]&&n[a+1].focus();break;case"ArrowLeft":e.preventDefault(),n[a-1]&&n[a-1].focus();break;case"ArrowDown":e.preventDefault(),n[a+i]&&n[a+i].focus();break;case"ArrowUp":e.preventDefault(),n[a-i]&&n[a-i].focus();break;case"Enter":e.preventDefault(),t.click()}}})},setupAdjacentPreload(){const e=document.querySelectorAll(".gallery-massive__item");e.forEach((t,n)=>{t.addEventListener("mouseenter",()=>{for(let t=-2;t<=2;t++){if(0===t)continue;const a=(n+t+e.length)%e.length,i=e[a],o=null==i?void 0:i.querySelector("img");if(o&&o.dataset.src&&!o.src){const e=document.createElement("link");e.rel="prefetch",e.as="image",e.href=o.dataset.src,document.head.appendChild(e)}}})})},preloadAdjacent(){[(this.currentIndex+1)%this.artworks.length,(this.currentIndex-1+this.artworks.length)%this.artworks.length].forEach(e=>{const t=this.artworks[e],n=null==t?void 0:t.querySelector("img");(null==n?void 0:n.dataset.hires)&&((new Image).src=n.dataset.hires)})},createMassiveGrid(e,t){const n=["colossal","large","medium","medium","small","small"];let a=0;e.forEach((e,i)=>{const o=n[a%n.length];a++;const s=document.createElement("div");s.className=`gallery-massive__item gallery-massive__item--${o} gallery-lazy gallery-reveal`,s.setAttribute("tabindex","0"),s.setAttribute("role","button"),s.innerHTML=`\n        <img \n          data-src="${e.src}" \n          data-hires="${e.hires||e.src}"\n          alt="${e.title}"\n          class="gallery-massive__img"\n          loading="lazy"\n        >\n        <div class="gallery-massive__overlay">\n          <h3 class="gallery-massive__title">${e.title}</h3>\n        </div>\n      `,t.appendChild(s)}),this.setupLazyLoading(),this.setupRevealAnimations(),this.setupMouseTracking(),this.setupCustomCursor(),this.artworks=Array.from(document.querySelectorAll(".gallery-massive__item, .gallery__item, .gallery-hero__artwork"))},destroy(){this.rafId&&cancelAnimationFrame(this.rafId),this.revealObserver&&this.revealObserver.disconnect(),this.observer&&this.observer.disconnect(),this.lightbox&&this.lightbox.remove(),this.cursor&&this.cursor.remove(),this.initialized=!1}};function y(){n.register("#/",()=>{n.showView("view-home")}).register("#/destacada",()=>{n.showView("view-destacada"),window.Gallery&&window.Gallery.loadFeatured()}).register("#/archivo",()=>{n.showView("view-archivo"),window.Gallery&&window.Gallery.loadArchive()}).register("#/about",()=>{n.showView("view-about")}).register("#/contacto",()=>{n.showView("view-contacto")}).register("#/juego",()=>{n.showView("view-juego"),window.OcaGame&&window.OcaGame.init()}).register("#/tetris",()=>{n.showView("view-tetris"),window.TetrisGame&&window.TetrisGame.init()}).register("#/juegos",()=>{n.showView("view-juegos")}).register("#/memory",()=>{n.showView("view-memory"),window.MemoryGame&&window.MemoryGame.init()}).register("#/puzzle",()=>{n.showView("view-puzzle"),window.PuzzleGame&&window.PuzzleGame.init()}).register("#/snake",()=>{n.showView("view-snake"),window.SnakeGame&&window.SnakeGame.init()}).register("#/breakout",()=>{n.showView("view-breakout"),window.BreakoutGame&&window.BreakoutGame.init()}).register("#/whack",()=>{n.showView("view-whack"),window.WhackGame&&window.WhackGame.init()}).register("#/simon",()=>{n.showView("view-simon"),window.SimonGame&&window.SimonGame.init()}).register("#/quiz",()=>{n.showView("view-quiz"),window.QuizGame&&window.QuizGame.init()}).register("#/catch",()=>{n.showView("view-catch"),window.CatchGame&&window.CatchGame.init()}).register("#/collage",()=>{n.showView("view-collage"),window.CollageGame&&window.CollageGame.init()}).register("#/reinas",()=>{n.showView("view-reinas"),window.ReinasGame&&window.ReinasGame.init()}).register("#/mica",()=>{n.showView("view-mica"),window.MicaGame&&window.MicaGame.init()}).register("#/kintsugi",()=>{n.showView("view-kintsugi"),window.KintsugiGame&&window.KintsugiGame.init()}).register("#/pong",()=>{n.showView("view-pong"),window.PongGame&&window.PongGame.init()}).register("#/reaction",()=>{n.showView("view-reaction"),window.ReactionGame&&window.ReactionGame.init()}).register("#/typing",()=>{n.showView("view-typing"),window.TypingGame&&window.TypingGame.init()}).register("#/chess",()=>{n.showView("view-chess");const e=document.getElementById("chess-container");e&&window.initChessGame&&window.initChessGame(e)}).register("#/checkers",()=>{n.showView("view-checkers");const e=document.getElementById("checkers-container");e&&window.initCheckersGame&&window.initCheckersGame(e)}).register("#/connect4",()=>{n.showView("view-connect4");const e=document.getElementById("connect4-container");e&&window.initConnect4Game&&window.initConnect4Game(e)}).register("#/reversi",()=>{n.showView("view-reversi");const e=document.getElementById("reversi-container");e&&window.initReversiGame&&window.initReversiGame(e)}).register("#/videos",()=>{n.showView("view-videos")}),n.beforeEach=(e,t)=>{document.body.classList.add("navigating");const n=document.getElementById("page-curtain");n&&n.classList.add("active")},n.afterEach=(e,t)=>{const n=document.getElementById("page-curtain");setTimeout(()=>{window.scrollTo({top:0,behavior:"instant"}),n&&n.classList.remove("active"),setTimeout(()=>{document.body.classList.remove("navigating")},600)},400)},n.init()}async function f(){window.Gallery&&await window.Gallery.init(),y(),function(){const e=document.getElementById("scroll-thread");window.addEventListener("scroll",()=>{if(!e)return;const t=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;e.style.width=t+"%"},{passive:!0}),window.micaInstance&&setTimeout(()=>{window.micaInstance.isOpen},2e3)}(),window.Lightbox&&window.Lightbox.init()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>v.init()):v.init(),window.GalleryDisruptive=v,function(){const e=document.createElement("button");e.className="scroll-to-top",e.setAttribute("aria-label","Volver arriba"),e.setAttribute("title","Volver arriba"),document.body.appendChild(e);let t=!1;function n(){(window.scrollY||document.documentElement.scrollTop)>300?e.classList.add("visible"):e.classList.remove("visible"),t=!1}window.addEventListener("scroll",()=>{t||(requestAnimationFrame(n),t=!0)},{passive:!0}),e.addEventListener("click",()=>{var e,t;window.scrollTo({top:0,behavior:"smooth"}),window.AudioSynth&&!(null==(e=window.ImmersiveAudio)?void 0:e.isMuted)&&(null==(t=AudioSynth.uiClick)||t.call(AudioSynth))}),n()}(),function(){function e(){document.querySelectorAll(".video-card").forEach(e=>{const t=e.querySelector("video");if(!t)return;e.addEventListener("mouseenter",()=>{t.play().catch(()=>{})}),e.addEventListener("mouseleave",()=>{t.pause(),t.currentTime=0}),e.addEventListener("click",()=>{var e,n;t.requestFullscreen?(t.muted=!1,t.requestFullscreen().catch(()=>{})):t.webkitRequestFullscreen&&(t.muted=!1,t.webkitRequestFullscreen()),window.AudioSynth&&!(null==(e=window.ImmersiveAudio)?void 0:e.isMuted)&&(null==(n=AudioSynth.playArtworkReveal)||n.call(AudioSynth))});let n=!1;e.addEventListener("touchstart",e=>{e.preventDefault(),n?(t.pause(),n=!1):(t.play().catch(()=>{}),n=!0)},{passive:!1})})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),window.addEventListener("viewChange",e)}(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",f):f()}},function(){return t||(0,e[n(e)[0]])((t={exports:{}}).exports,t),t.exports});export default a();
